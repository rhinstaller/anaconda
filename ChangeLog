2007-07-25  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (AnacondaYumRepo._getFile): Fix media installs (#249371)

2007-07-24  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2007-07-23  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot: Switch the way we build second stage
	images.  Move to using yum to populate with a set of packages and
	then do pruning of the installed root.  Prune with our file list +
	doing dso dep checking.  This will be slower, but should help to
	avoid us having to maintain the list as much and avoiding the
	problems when things grow new library deps.

2007-07-23  Chris Lumens  <clumens@redhat.com>

	* installmethod.py (InstallMethod.protectedPartitions):  Set default
	value to an empty list instead of None.

2007-07-23  Peter Jones  <pjones@redhat.com>

	* partedUtils.py (DiskSet._labelDevice): log the traceback that
	we're squashing, so we'll be able to fix code bugs when something
	doesn't get on the drive list.

2007-07-20  Peter Jones  <pjones@redhat.com>

	* loader2/modules.c (doLoadModules): only care if a moduleInfo entry
	has locationID set for purposes of extracting paths; not for seeing
	if we should do the usb-storage three-card-monty (#247830 again).

2007-07-20  Chris Lumens  <clumens@redhat.com>

	* docs/kickstart-docs.txt:  class -> dhcpclass since that's what
	loader expects (#248910).

	* loader2/keymaps-*:  Rebuilt (#240087).

2007-07-19  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-07-19  David Cantrell  <dcantrell@redhat.com>

	* fsset.py: Mark iSCSI root with _netdev mount option (patch from
	markmc AT redhat DOT com, #245725).

2007-07-19  Chris Lumens  <clumens@redhat.com>

	* fsset.py (FileSystemSet.add):  Fix duplicate entry check to take
	multiple bind mounts into account (#246424).

	* harddrive.py (HardDriveInstallMethod.mountDirectory):  Mount
	/tmp/isodir read/write for upgrades.
	* partedUtils.py (DiskSet.findExistingRootPartitions):  Don't try to
	remount the root partition on hard drive ISO upgrades when the ISOs
	live on the root partition (#244002).
	* upgrade.py (mountRootPartition):  Support the ISOs being on a
	partition that is set to be upgraded.

2007-07-18  Peter Jones  <pjones@redhat.com>

	* partitions.py (Partitions.sanityCheckAllRequests): remove some
	zealotry that I added this morning.  It is too much.

2007-07-18  Chris Lumens  <clumens@redhat.com>

	* fsset.py (FileSystemSet.turnOnSwap):  Improve error reporting when
	trying to mount swap partitions specified by device name instead of
	label (#248558).

	* partitions.py (Partitions.hasGptLabel):  Fix typo.

	* partitions.py (turnOnFilesystems):  Remove call to refreshDevices.
	* partitioning.py (partitioningComplete):  Likewise.

2007-07-18  Peter Jones  <pjones@redhat.com>

	* fsset.py (FATFileSystem.labelDevice): add support for labeling FAT

	* fsset.py (FileSystemSet.getBootDev): make x86 machines using efi
	use /boot/efi as their mountpoint.  Also mark it bootable in
	.setActive()

	* iutil.py (isEfi): add isEfi, which tells you if you're on an EFI
	machine.

	* partitions.py (Partitions.getBootableRequest): look for /boot/efi
	on x86 machines with efi.  Likewise with .getBootableMountpoints()

	* partitions.py (Partitions.sanityCheckAllRequests): fix handling of
	gpt and EFI for x86 machines using them.  Boot support not yet here,
	coming later.

2007-07-18  Peter Jones  <pjones@redhat.com>

	* partedUtils.py (DiskSet):
	- back port (forward port?) reorganization of openDevices() from rhel5
	- get rid of clearDevices()

	* packages.py (turnOnFilesystems):
	- use refreshDevices() not clearDevices()

	* partitioning.py (partitioningComplete): 
	- use refreshDevices() not clearDevices()

2007-07-16  Peter Jones  <pjones@redhat.com>

	* partedUtils.py (DiskSet.openDevices): don't generate the error
	message on SCSI with >15 partitions at two places.
	
2007-07-16  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	From Jane Dogalt <jdogalt AT yahoo DOT com> (#248085)
	* fsset.py: Add case for skipping formatting the rootfs dependent
	on backend so that we don't format the rootfs for live images.  A
	little bit of a hack, but good enough for now
	* backend.py: Add skipFormatRoot attribute, defaults to False
	* livecd.py: Add skipFormatRoot attribute = True
	* packages.py: Pass skipFormatRoot

2007-07-16  Chris Lumens  <clumens@redhat.com>

	* installclass.py (BaseInstallClass.setExclusiveDisks):  Add a
	method to set up the exclusiveDisks attribute.
	* kickstart.py (doIgnoreDisk):  Add the --only-use option to specify
	which disks should be used.  This is the opposite operation from
	ignoredisk --drives (#198526).
	* partedUtils.py (DiskSet):  Add exclusiveDisks attribute.
	(DiskSet.openDevices):  If the exclusiveDisks list is not empty,
	use it to determine which drives should be used.
	* upgrade.py (findExistingRoots):  Clear out exclusiveDisks list
	as well.

	* packages.py (betaNagScreen):  Remove extra brace.

	* anaconda (setVNCFromKickstart):  Run the kickstart file through the
	new %ksappend handler in pykickstart.
	* kickstart.py (pullRemainingKickstartConfig):  Moved to pykickstart.

2007-07-13  Chris Lumens  <clumens@redhat.com>

	* partedUtils.py (DiskSet.openDevices):  Build up a list of drives
	that we cleared using clearpart.
	(DiskSet.getLabels):  Don't read filesystem labels from drives in the
	cleared list to avoid reserving labels that won't exist after
	partitioning is complete (#209291).

2007-07-12  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-07-10  Peter Jones  <pjones@redhat.com>

	* partitions.py (Partitions.getAvailLVMPartitions): don't call
	lvm.pvlist() N^2 times, it's not going to change.

2007-07-11  Dave Lehman  <dlehman@redhat.com>

	* urlinstall.py (UrlInstallMethod.filesDone): don't log errors when
	unmounting /mnt/source since it wasn't necessarily supposed to be 
	mounted in the first place (#223059)

	* gui.py (InstallKeyWindow): handle F12 shortcut key (#210673)

	* iutil.py (makeDriveDeviceNodes): create device nodes for tape
	drives (#218816)

	* isys/isys.py (tapeDriveList): new function to list tape drives

	* isys/isys.py (driveDict): probe for tape drives, too

2007-07-11  Chris Lumens  <clumens@redhat.com>

	* loader2/loader.c (doLoaderMain):  Allow going back to the network
	configuration screen if the wrong information was entered (#247807,
	lucasgf AT br DOT ibm DOT com).

2007-07-10  Dave Lehman  <dlehman@redhat.com>

	* yuminstall.py (AnacondaYum.doConfigSetup): set up and initialize 
	yum plugins

	* scripts/upd-instroot: include yum-fedorakmod plugin and config file
	in stage2

2007-07-09  Jeremy Katz  <katzj@redhat.com>

	* packages.py (betaNagScreen): Don't map Fedora->Fedora Core

2007-07-06  Jeremy Katz  <katzj@redhat.com>

	* partedUtils.py (DiskSet.openDevices): Fix double space (#246703)
	* partIntfHelpers.py (queryNoFormatPreExisting): Likewise.

2007-07-06  Peter Jones  <pjones@redhat.com>

	* dmraid.py (scanForMPath): Fix module path order so updates get used
	correctly.

2007-07-06  Peter Jones  <pjones@redhat.com>

	* isys/isys.py: add isPaeAvailable() to test for the need to use a PAE
	kernel.

	* yuminstall.py (YumBackend.selectBestKernel): install the PAE kernel
	when applicable (#207573).

2007-07-03  Peter Jones  <pjones@redhat.com>

	* scripts/upd-updates: script to update files in an updates.img that's
	a cpioball.

	* scripts/Makefile: add upd-updates

2007-07-02  Jeremy Katz  <katzj@redhat.com>

	* autopart.py: Change references of "Reboot" -> "Exit installer"
	to make more sense in live install case.
	* exception.py: Likewise.
	* fsset.py: Likewise.
	* gui.py: Likewise.
	* harddrive.py: Likewise.
	* image.py: Likewise.
	* kickstart.py: Likewise.
	* packages.py: Likewise.
	* upgrade.py: Likewise.
	* urlinstall: Likewise.
	* yuminstall.py: Likewise.

	* livecd.py (LiveCDCopyBackend.doRepoSetup): Add mnemonics

2007-06-29  Chris Lumens  <clumens@redhat.com>

	* fsset.py (FileSystemSet.add):  Fix an fsset entry sorting
	problem (#242294, patch from Jeffrey Hutzelman <jhutz AT cmu DOT edu>).

	* yuminstall.py (YumBackend.selectModulePackages):  The modules
	listed in extraModules don't end in .ko.

	* loader2/kickstart.c (newKickstartLocation):  Don't display garbage
	in the dialog box to correct the kickstart file location (#245936).

2007-06-28  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* livecd.py (copytree): Preserve owners on copy (#243479).  Also
	add support for preserving SELinux xattrs during the copy process

2007-06-27  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (AnacondaYumRepo.dirSetup): Fix for yum 3.2.1 not
	making header dir any more since we still need headers (#245918)
	(AnacondaYumRepo.getPackage): Remove no-longer needed hacks for
	split-url installs
	(AnacondaYumRepo.getHeader): Likewise.
	(getcd): Remove unused method.

2007-06-27  Chris Lumens  <clumens@redhat.com>

	* loader2/modules.c (doLoadModules):  Try to extract modules that are
	in a module ball other than the default one first.  This allows driver
	disks to override the shipped modules.

	* scripts/upd-instroot:  Add nss and nspr libraries.

2007-06-27  Peter Jones  <pjones@redhat.com>

	* iscsi.py (iscsiTarget._getPortal): Fix rerror reporting in iscsi
	connection code.

2007-06-26  Chris Lumens  <clumens@redhat.com>

	* backend.py (AnacondaBackend.writeKS):  Add yet another method
	for writing out kickstart config sections, this one being
	optional.
	* instdata.py (InstallData.writeKS):  Call new backend.writeKS
	method, if it exists.
	* yuminstall.py (YumBackend.writeKS):  Add a method to write out
	repo lines to the anaconda-ks.cfg file for all enabled add-on
	repositories (#206152).

	* backend.py (AnacondaBackend.copyDriverDiskModules):  The driver
	disk layout has changed, so this method is no longer needed.
	(AnacondaBackend.copyFirmware):  Add a method to copy driver firmware
	to the installed system.
	(AnacondaBackend.doPostInstall):  Call methods for new driver disk
	postconfig.

	* yuminstall.py (AnacondaYum.doConfigSetup):  Add in any driver
	disk repos.  Rework code a bit to be less repetitive.
	(AnacondaYum.selectModulePackage):  Add a method to select
	packages that provide the modules we loaded from the driver disk
	(#213318).

2007-06-25  Jeremy Katz  <katzj@redhat.com>

	* livecd.py (LiveCDCopyBackend._doFilesystemMangling): Rework this
	to properly handle the case where you have something like
	/usr/local and /usr as separate partitions (#244913)

2007-06-25  David Cantrell  <dcantrell@redhat.com>

	* iw/netconfig_dialog.py (NetworkConfigurator): Remove pointless
	call to sanityCheckIPString().

	* partedUtils.py (DiskSet.openDevices): Do not try to display dialog
	box warning message if intf is None (assumes we are called from the
	labelFactory) (#245609).

2007-06-22  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-06-22  Chris Lumens  <clumens@redhat.com>

	* loader2/driverdisk.h:  Change prototype of chooseManualDriver to
	take a loaderData instead of several module parameters.
	* loader2/driverselect.c (chooseManualDriver):  Likewise.
	(loadDriverFromMedia):  Likewise.

	* loader2/hdinstall.c (mountHardDrive):  Use new loadDriverFromMedia
	interface.

	* loader2/loader.c (manualDeviceCheck):  Change interface to take a
	loaderData instead of several module parameters.  Use new 
	(main):  Use new interfaces.

2007-06-22  Peter Jones  <pjones@redhat.com>

	* loader2/modules.c: Get rid of "modLocation" parameter to
	doLoadModules(); it is never used.  Also call extractModules for each
	location and for NULL (default) location.

2007-06-22  Peter Jones  <pjones@redhat.com>

	* loader2/fwloader.[ch]: add this.  It's a small firmware loader.

	* loader2/udelay.h: add this.  It's some time-related helper
	functions.

	* loader2/Makefile: get rid of the libnash bits, add fwloader.o

	* loader2/driverdisk.c: change the firmware loader path and restart
	it when we add a driver disk.  This also moves many cases of [modlist,
	moddeps, modinfo] to just getting them from loaderData.

	* loader2/driverdisk.h: change headers to match driverdisk.c changes

	* loader2/loader.c: kill NASH_FIRMWARE_LOADER.  Change calls to match
	driverdisk.c changes.  Export loaderSegvHandler().

	* loader2/loader.h: add fw loader pid and search path to loaderData.

2007-06-22  David Cantrell  <dcantrell@redhat.com>

	* iw/netconfig_dialog.py (NetworkConfigurator): Handle IPv4 CIDR
	prefixes in addition to dotted-quad netmasks (patch from HARA
	Hiroshi <hhara AT miraclelinux DOT com>).

2007-06-22  David Cantrell  <dcantrell@redhat.com>

	* iw/netconfig_dialog.py (NetworkConfigurator): Added a special
	handler for IPMissing exceptions.  Display a dialog when the
	configNetDevice function fails (patch from Dawei Pang <dwpang AT
	redflag-linux DOT com>).

	* iw/autopart_type.py (PartitionTypeWindow.addIscsiDrive): Do not
	return unless ret is gtk.RESPONSE_OK (patch from Dawei Pang
	<dwpang ATredflag-linux DOT com>).

2007-06-21  David Cantrell  <dcantrell@redhat.com>

	* iw/netconfig_dialog.py (NetworkConfigurator): Handle IPMissing
	exceptions and log error message when configNetDevice() fails.
	Patch from HARA Hiroshi <hhara AT miraclelinux DOT com>.

2007-06-19  Chris Lumens  <clumens@redhat.com>

	* livecd.py (LiveCDImageMethod.doPostAction):  Fix traceback
	(#244764).

	* loader2/driverdisk.c (loadDriverDisk):  Use copyDirectory to support
	the new style of driver disk layouts.

	* loader2/copy.c (copyDirectory):  Move function out of both init.c
	and method.c, take function pointers for error reporting.
	* loader2/Makefile:  Link in new copy.o object.
	* loader2/driverdisk.c, loader2/init.c, loader2/method.c,
	loader2.urlinstall.c:  Use the new copyDirectory.
	* loader2/method.h:  Remove reference to copyDirectory.

2007-06-18  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-06-18  Bill Nottinghan  <notting@redhat.com>

	* lang-table-kon: Remove obsolete lang-table-kon map
	* Makefile: Likewise 

2007-06-18  Peter Jones  <pjones@redhat.com>

	* isys/Makefile isys/gzlib/*: Remove all of this since we never use
	it.

2007-06-18  Peter Jones  <pjones@redhat.com>

	* loader2/loader.c: Fix notting's "logmessage" typo.

2007-06-18  Bill Nottingham  <notting@redhat.com>

	* loader2/loader.h: Only define FL_NOFB once
	
	* loader2/loader.h: Remove obsolete FL_NOPARPORT
	* docs/command-line.txt: Remove obsolete noparport docs

	* loader2/loader.c: Remove support for nofb and vga16 framebuffer
	* scripts/mk-images: Remove vga16 framebuffer module, bterm terminfo
	* scripts/upd-instroot: Likewise.
	* docs/command-line.txt: Remove nofb docs

2007-06-18  Chris Lumens  <clumens@redhat.com>

	* instdata.py (InstallData.reset):  Fix another syntax error.

	* urlinstall.py (UrlInstallMethod.__init__):  Remove call to
	removed function (#244528).

	* scripts/upd-instroot:  libbz2 has changed location (#243566).

2007-06-15  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* instdata.py (InstallData.writeKS): Fix syntax error (jkeating)

2007-06-15  Chris Lumens  <clumens@redhat.com>

	* exception.py (dumpException):  Don't capture passwords from the
	kickstart file in the exception dump.

	* yuminstall.py (AnacondaCallback.callback):  Don't write out unicode
	text to the install log (#243477).

2007-06-15  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-06-15  Chris Lumens  <clumens@redhat.com>

	* scripts/mk-images:  mksquashfs is stupid and wants its arguments
	in a particular order.

2007-06-14  Chris Lumens  <clumens@redhat.com>

	* command-stubs/Makefile:  pump-stub -> dhclient-stub.

	* scripts/upd-instroot:  Only make the joe symlinks if /etc/joe
	exists.

2007-06-15  David Cantrell  <dcantrell@redhat.com>

	* kickstart.py (ZFCP.parse): Flush drive dict so zFCP devices are
	found and nodes created (#236903)

2007-06-12  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-06-12  David Cantrell  <dcantrell@redhat.com>

	* loader2/hardware.c: Comment out BUS_EBUS for now since we are waiting
	on a new kudzu that supports it.

2007-06-12  Chris Lumens  <clumens@redhat.com>

	* urlinstall.py (UrlInstallMethod.switchMedia):  Removed.
	(UrlInstallmethod.__checkUrlForIsoMounts):  Removed.

	* loader2/urlinstall.c (loadSingleUrlImage):  Don't look in the disc1/
	directory anymore since the split loopback ISO method is no longer
	supported.

2007-06-11  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (setSteps):  Use the correct fix for kickstart upgrade
	tracebacks (#243159).

2007-06-07  Chris Lumens  <clumens@redhat.com>

	* instdata (InstallData.write):  Lock accounts if asked (#240059).
	* kickstart.py (RootPw):  Inherit from new F8 rootpw command to handle
	--lock.
	* users.py (Users.createUser, Users.setRootPassword):  Lock accounts
	if asked.

	* fsset.py (networkFileSystem):  Add a type for nfs mounts so they
	don't get deleted on upgrade (#242073).

2007-06-06  Chris Lumens  <clumens@redhat.com>

	* loader2/module-info:  Add support for Areca RAID controllers
	(#238014).

2007-06-06  David Cantrell  <dcantrell@redhat.com>

	* loader2/hardware.c (detectHardware): Probe BUS_EBUS to support
	HEA devices on IBM systems (#228578).
	* loader2/module-info: ehea_mod -> ehea (#228578).

2007-06-06  Chris Lumens  <clumens@redhat.com>

	* loader2/cdinstall.c:  Use "disc" instead of "CD" in dialogs
	(#242830).
	* cdinstall.py:  Likewise.
	* urlinstall.py:  Likewise.

	* loader2/loader.c:  Use "CD/DVD" instead of "CDROM".

2007-06-05  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Pass -br to the X server so there's no more hatch
	(#195919).
	* vnc.py (startVNCServer):  Likewise.

	* kickstart.py (ClearPart.parse):  Set a default clearpart type.

2007-06-04  Jeremy Katz  <katzj@redhat.com>

	* installclass.py (BaseInstallClass.setSteps): Permanently skip
	task selection and group selection if our backend doesn't support
	package selection (#242083)

	* isys/smp.c (detectSMP): Build on arm (Lennert Buytenhek
	<buyenh AT wantstofly DOT org>)

2007-06-04  Dave Lehman  <dlehman@redhat.com>

	* image.py (CdromInstallMethod.__init__): don't nuke the timestamp
	when getDiscNums fails

	* installclass.py (BaseInstallClass.getPackagePaths): make the return 
	dict's values always be lists of URIs

	* yuminstall.py (AnacondaYum.doConfigSetup): make conf.reposdir a list
	like in yum

	* scripts/mk-images: make sure the MBD_FSIMAGE dir doesn't pre-exist

2007-06-04  Chris Lumens  <clumens@redhat.com>

	* iscsi.py (iscsiTarget.login):  portal -> self.portal (#242379).

2007-06-01  David Cantrell  <dcantrell@redhat.com>

	* zfcp.py (ZFCPDevice): We need to echo 1 to online for each LUN
	we are handed, otherwise the device doesn't become available to
	anaconda (#207097).

2007-06-01  Chris Lumens  <clumens@redhat.com>

	* iw/upgrade_bootloader_gui.py (UpgradeBootloaderWindow._newToLibata):
	Don't traceback on blank lines in modprobe.conf (#241991).
	* textw/upgrade_bootloader_text.py (UpgradeBootloaderWindow._ideToLibata):
	Likewise.

	* iw/release_notes.py (ReleaseNotesViewer.getReleaseNotes):  Fall back
	to English release notes if translated ones aren't found (#241975).

2007-05-31  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (manualNetConfig): Make sure the ip structure member
	in the pumpNetIntf structure contains the IPv4 address if it exists,
	otherwise static network configuration fails (#221660).

2007-05-31  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images: Shut up mksquashfs. 

2007-05-31  Dave Lehman  <dlehman@redhat.com>

	* rescue.py (runShell): mount /dev/pts in rescue mode (#228714)

	* scripts/upd-instroot: include dmidecode on ia64 (#232947)

	* loader2/modules.c (scsiDiskCount): correctly count SCSI disk
	devices (#230526)

2007-05-31  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (AnacondaKSScript.run):  Don't traceback if we're
	unable to remove the script after running it (#241878).

2007-05-30  Chris Lumens  <clumens@redhat.com>

	* instdata.py (InstallData.write):  Use shlex instead of a simple
	split to preserve quoting in authconfig commands (#241657).

2007-05-30  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.py (_stopRaid): Fix raidstop.  I have no clue how
	things were working here...
	* isys/isys.py (_getRaidInfo): raise ValueError when we don't find
	a valid raid superblock (#151653).
	
	* upgrade.py: More blacklist

	* isys/isys.h (EARLY_SWAP_RAM): Let's bump RAM needs a little (#232862)

	* iw/netconfig_dialog.py (NetworkConfigurator._handleIPError): Add
	a frame so things look right
	(NetworkConfigurator._ok): Set useipv4 to true, call netconfig
	methods with the right args (#240804)

	* network.py (hasActiveNetDev): Ensure we have an IP as
	otherwise, the network device isn't really all that active.
	
	* livecd.py: Define Error so we don't traceback with that when 
	there's a problem copying (#241754)

2007-05-29  David Cantrell  <dcantrell@redhat.com>

	* textw/network_text.py (NetworkDeviceWindow): Make sure the extra
	windows are removed when they need to be (patch from notting AT
	redhat DOT com, #241556).

	* liveinst/.cvsignore: Ignore autogenerated files.

	* loader2/linuxrc.s390: Do not start xinetd and do not mention telnet
	in the starting up message.

	* scripts/mk-images: Remove telnet and xinetd.
	* scripts/Likewise.

2007-05-25  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (setSteps):  Fix traceback on kickstart upgrades
	(#241395).

2007-05-25  David Cantrell  <dcantrell@redhat.com>

	* isys/isys.c (doDhcpNetDevice): Make sure the interface is brought up
	with the config info obtained from the DHCP lease.

2007-05-23  Peter Jones  <pjones@redhat.com>

	* isys/isys.py (_getRaidInfo): raise ValueError when we don't find
	a valid raid superblock (#151653).

2007-05-23  David Cantrell  <dcantrell@redhat.com>

	* loader2/loader.c (doLoaderMain): Don't crash if the user selects back 
	twice during network configuration (#239958).

	* loader2/net.c (cidrCallback): Only warn for an empty prefix if the
	user also provided an IP address.

2007-05-22  David Cantrell  <dcantrell@redhat.com>

	* fsset.py: Be a little more careful about certain assumptions so we
	avoid tracebacks for strange error conditions in the partitioning
	code.
	* partedUtils.py: Likewise.

	* isys/isys.py: If klass is None, set to empty string.  Always send
	klass to doDhcpNetDevice.
	* isys/isys.c: Do not segfault (#240804).

	* loader2/net.c: Consistency with isys.c, also fixes a problem reported
	by just a few people where manual IPv6 address entry gets
	overridden by the auto-discovered address.

2007-05-21  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (AnacondaCallback.callback): Fix tyop, mark for 
	translation

	* isys/isys.c: Remove raid start and raid stop methods using old
	mdautorun bits (Peter Jones)
	* isys/isys.py: Adjust raid stuff to use mdadm instead of old raid
	ioctls (Peter Jones)

	* lvm.py: Still log real errors instead of hiding in lvmError

2007-05-21  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: Add keyutils-libs (#240629)

2007-05-17  David Cantrell  <dcantrell@redhat.com>

	* vnc.py (askVncWindow): Check for an executable Xvnc.

2007-05-17  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.doGroupSetup): Keep track of what
	groups were selected when we redo group setup (#237708)

	* upgrade.py (upgrade_remove_blacklist): Add esound to the list

2007-05-16  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-05-16  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (AnacondaYum.doConfigSetup): Add logging for yum
	logging (#240226)

2007-05-16  Chris Lumens  <clumens@redhat.com>

	* lang-table:  Use correct keyboard layout for Bulgarian (#240087).

	* loader2/selinux.c (loadpolicy):  -b option now causes a warning
	message to be printed.

	* textw/language_text.py:  Fix tracebacks from yesterday's changes.

2007-05-15  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-05-15  Chris Lumens  <clumens@redhat.com>

	* textw/language_text.py (LanguageWindow.__call__):  Remove unused
	code.
	Set the timezone when a new language is selected (#239826).

2007-05-14  Chris Lumens  <clumens@redhat.com>

	* text.py (InstallInterface.run):  It's anaconda, not self.anaconda.

2007-05-14  David Cantrell  <dcantrell@redhat.com>

	* command-stubs/pump-stub: Removed (#239427).
	* command-stubs/dhcpclient-stub: Wrote new command to provide an IPv4
	and IPv6 dhcp/auto client at the command line in rescue mode (#239427).
	* scripts/upd-instroot: Install dhcpclient-stub, symlink /usr/bin/pump
	to /usr/bin/dhcpclient (#239427).

2007-05-14  Paul Nasrat <pnasrat@redhat.com>

	* iutil.py (writeRpmPlatform): Set preferred color on upgrades (#235757)

2007-05-10  Jeremy Katz  <katzj@redhat.com>

	* text.py (WaitWindow.refresh): Fix traceback reported on livecd-list

2007-05-08  Chris Lumens  <clumens@redhat.com>

	* docs/kickstart-docs.txt:  Describe nfs --opts (#234187).
	Remove user and service examples from %post script section.
	Explain %packages --default.

2007-05-07  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.h (EARLY_SWAP_RAM): Bump early swap on 64bit
	platforms.  cache + larger pointer size kills us a bit.  (#238266)

2007-05-07  David Cantrell  <dcantrell@redhat.com>

	* network.py: Update calls to configNetDevice() and dhcpNetDevice() in
	isys to match new parameter list.
	* isys/isys.py (dhcpNetDevice): Don't need to take dhcpclass as a
	seperate argument since we have that in the dev object.

2007-05-07  Jeremy Katz  <katzj@redhat.com>

	* bootdisk/i386/syslinux.cfg: Make sure the highlighting is sane
	when the menu falls back to text mode
	* bootdisk/x86_64/syslinux.cfg: Likewise.

2007-05-07  Chris Lumens  <clumens@redhat.com>

	* upgrade.py (mountRootPartition):  Back out fix from 2007-04-30 now
	that we have smarter activation/deactivation code.

2007-05-04  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2007-05-04  Peter Jones  <pjones@redhat.com>

	* lvm.py: add lvm.vgcheckactive(), which tells you if lvm is active.

	* partedUtils.py (DiskSet.getLabels): only activate/deactivate lvm
	if it's not already active (#224635).

2007-05-04  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c: Patch from Dawei Pang <dwpang AT redflag-linux.com>
	to fix segfaults on 64-bit arches during manual TCP/IP config.

2007-05-04  Chris Lumens  <clumens@redhat.com>

	* installmethod.py (doMethodComplete):  If this is a kickstart
	install, don't eject the CD at this time.  The user will have to
	specify --eject in their kickstart file now (#238711, #239002).

2007-05-03  Chris Lumens  <clumens@redhat.com>

	* vnc.py (startVNCServer):  Fix vncconnect mode (#238827).

2007-05-02  Jeremy Katz  <katzj@redhat.com>

	* textw/partition_text.py (PartitionTypeWindow.__call__): Don't
	traceback if there aren't disks (#238695)

	* scripts/upd-instroot (KEEPFILE): Add selinux-python to unbreak
	genhomedircon (#238277)

	* scripts/mk-images (USBMODS): Add appletouch so we load it as
	needed (#238355)
	* loader2/usb.c (usbInitializeMouse): Load appletouch

	* packages.py (setFileCons): Just relabel all of /var/log (#236774)

2007-05-01  Chris Lumens  <clumens@redhat.com>

	* iscsi.py (iscsi.shutdown):  Be smarter about getting the PID of
	iscsiadm to avoid a traceback (#223257).

	* iutil.py (execWithCapture, execWithRedirect):  Log the failing
	command as well as raising an exception, as some callers just throw
	away the exception.

2007-05-01  Prarit Bhargava <prarit@redhat.com>

	* Added mk-rescueimage.ia64 (#236221)

2007-05-01  Paul Nasrat <pnasrat@redhat.com>

	* iutil.py (writeRpmPlatform): Set preferred color (#235757)

2007-04-30  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.	

	* loader2/hardware.c (spufsSetup): Fix build

	* anaconda.spec: Bump version.

	* yuminstall.py (AnacondaCallback.callback): Add a window for the
	upgrade complete so we at least don't look hung.  Should do
	something better for the next release. (#238256)

2007-04-30  Chris lumens  <clumens@redhat.com>

	* upgrade.py (mountRootPartition):  We have to reactivate LVM before
	attempting to mount filesystems, since the label reading code
	deactivates (#234938).

2007-04-30  Jeremy Katz  <katzj@redhat.com>

	* iw/autopart_type.py (PartitionTypeWindow.addDrive): Don't let
	them try to do iscsi if the tools aren't there (#238424)

	* rescue.py (RescueInterface.messageWindow): Add support for
	custom_buttons (#238261)

	* loader2/loader.c (parseCmdLineFlags): Default to graphical
	earlier; mention empty kernel cmdline also

	* anaconda (__main__): Log anaconda cmdline args

	* loader2/loader.c: Log when we force graphical, text or cmdline modes

	* loader2/kickstart.c: Log forced graphical, text, cmdline modes
	from kickstart.

	* loader2/loader.c (parseCmdLineFlags): Log the kernel command
	line.  I'm tired of guessing at what people passed.

	* sortedtransaction.py (SplitMediaTransactionData.getMembers):
	Yum was fixed to not break API here; revert our change.

2007-04-27  David Cantrell  <dcantrell@redhat.com>

	* isys/isys.c (doDhcpNetDevice): Pass pumplogger to pumpDhcpClassRun()
	so we can see error messages in the syslog.
	* isys/isys.c: Add pumplogger() pass-through.

2007-04-27  David Cantrell  <dcantrell@redhat.com>

	* rescue.py (startNetworking): Call the right functions to bring up
	networking in rescue mode when booting from CD or DVD (#238080)

	* isys/isys.py: Remove pumpNetDevice, replace with dhcpNetDevice that
	can handle IPv4 and IPv6 (#238080).

	* isys/isys.c (doDhcpNetDevice): Handle IPv4 and IPv6 stacks (#238080).
	* isys/isys.c (doConfigNetDevice): Likewise.

	* loader2/net.c (setupNetworkDeviceConfig): The netmask will never be
	an IPv6 address.

2007-04-27  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (YumBackend.writePackagesKS):  Fix %packages section
	for ISO media installs (#231121, 235881).

2007-04-27  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py: Remove spufs mountpoint force, we'll make the
	mountpoint if the module is loaded.  
	* loader2/loader.c: Call spufsSetup
	* loader2/hardware.c (spufsSetup): Load spufs module on cell (#237725) 
	* loader2/hardware.h: Add spufsSetup
	* scripts/mk-images.ppc: Ship spufs module 

	* scripts/mk-images.ppc: Fix ppc32 netboot (#237988)

2007-04-26  Chris Lumens  <clumens@redhat.com>

	* whiteout.py:  Remove unneeded imports.

2007-04-26  Jeremy Katz  <katzj@redhat.com>

	* scripts/splittree.py (Timber.createSplitDirs): Fix splitting
	(Joel Andres Granados, #233384)

2007-04-26  David Cantrell  <dcantrell@redhat.com>

	* network.py (Network.write): Do not write out a disable-ipv6 file
	in /etc/modprobe.d if the user has disabled IPv6 during
	install (#237642).
	* packages.py (setFileCons): Remove /etc/modprobe.d from the
	list (#237642).

	* rescue.py: Whitespace consistency.

2007-04-26  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py: Add support for spufs (#237725)

2007-04-25  Dave Lehman  <dlehman@redhat.com>

	* yuminstall.py (AnacondaYumRepo): add new member, nomoremirrors, to
	flag "no more mirrors" without having to change the whole exception
	handling stack to preserve the original URLGrabError

	* yuminstall.py (AnacondaYumRepo._getFile): renamed from __getFile to
	match the method within yum we want to override

	* yuminstall.py (AnacondaYumRepo._getFile): set self.nomoremirrors and
	raise RepoError instead of re-raising URLGrabError when we run out of
	mirrors

	* yuminstall.py: look for repo.nomoremirrors instead of URLGrabError
	with errno of 256 when checking for "no more mirrors", except in 
	_getFile where nomoremirrors is actually being set

	* yuminstall.py: call _getFile instead of __getFile

	* yuminstall.py (AnacondaYumBackend.doRepoSetup): add handling for
	failures encountered retrieving repo metadata and group info

	* yuminstall.py (AnacondaYumBackend.doPostSelection): add handling for
	failures encountered while setting up depsolver

2007-04-25  Chris Lumens  <clumens@redhat.com>

	* packages.py (setFileCons):  anaconda makes /root, so make sure to
	set the context on it (#237834).

2007-04-25  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (PACKAGESRESCUE): Add libidn for ping (#237745)

2007-04-25  Paul Nasrat <pnasrat@redhat.com>

	* iutil.py: Add support for spufs (#237725)
	* fsset.py: Add support for spufs (#237725)

2007-04-24  Jeremy Katz  <katzj@redhat.com>

	* iw/release_notes.py (ReleaseNotesViewer.resize): Don't take up
	too much of the screen with the livecd and 800x600

	* loader2/modules.c (lateModuleSort): Add pata_pcmcia to the late
	list (#237674)

2007-04-24  David Cantrell  <dcantrell@redhat.com>

	* network.py (Network.write): Only write out one disable-ipv6 file to
	the /etc/modprobe.d directory as the setting is global (#237642).

2007-04-23  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* yuminstall.py (AnacondaYumRepo.__init__): Only set up the
	mirrorlist if we have one (#231543)

2007-04-23  David Cantrell  <dcantrell@redhat.com>

	* isys/isys.py (compareNetDevices): If either device lacks an int in
	its name, return 0 (#237431).

	* loader2/init.c (main): Remove message about cereal being an important
	part of a nutritionally balanced breakfast and replaced it with a note
	about needing eggs, bacon, sausage, toast, pancakes, and home fries.
	Well, not really.

2007-04-23  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec (Requires): Back to mkisofs due to silliness with
	how rawhide is currently composed

2007-04-23  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Update URL (#237364).

	* iutil.py (execWithRedirect, execWithCapture):  Make sure kickstart
	scripts execute with the correct cwd (#237317).

2007-04-20  Chris Lumens  <clumens@redhat.com>

	* loader2/urlinstall.c (mountUrlImage):  Fix test for .discinfo file
	on a good tree.

2007-04-20  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  New version.

2007-04-20  David Cantrell  <dcantrell@redhat.com>

	* isys/isys.py (getLinkStatus): Be a little more intelligent about what
	we get from _isys.getLinkStatus().  -1 is unknown state, which will map
	to True in the calling Python function.  Only return True when we get a
	1 back, otherwise False (#236483).

2007-04-20  Dave Lehman  <dlehman@redhat.com>

	* yuminstall.py (AnacondaYumRepo._getFile): re-raise "no more mirrors"
	URLGrabError instead of masking it with a RepoError

	* yuminstall.py (AnacondaYumRepo._getFile): renamed from _get to 
	_getFile so everyone will use it

	* yuminstall.py (AnacondaCallback.callback): handle "no more mirrors"
	when trying to retrieve a package to install

	* yuminstall.py (AnacondaYumRepo.__init__): allow both uri and 
	mirrorlist to be specified

	* yuminstall.py (AnacondaYumRepo.getHeader): call self._getFile instead
	of self._get

	* yuminstall.py (AnacondaYumRepo.getPackage): ditto

	* yuminstall.py (AnacondaYum.downloadHeader): copied from YumBase
	with the addition of a loop to handle retries if we run out of mirrors

	* yuminstall.py (AnacondaYumBackend.doRepoSetup): set the failure 
	callbacks individually for each repo

	* yuminstall.py: move _handleFailure, urlgrabberFailureCB,
	mirrorFailureCB, and prevmedia from AnacondaYumBackend into AnacondaYum

	* yuminstall.py (AnacondaYum.mirrorFailureCB): remove checks for "no
	more mirrors" (we now catch the exception properly in _getFile)

	* yuminstall.py (AnacondaYum.urlgrabberFailureCB): remove everything 
	except the log message since everything we did in here was also done 
	immediately afterward in the mirror failure callback

	* yuminstall.py (AnacondaYumBackend.doRepoSetup): catch a wider range
	of exceptions potentially raised by doGroupSetup

	* yuminstall.py (AnacondaYumBackend.doRepoSetup): really reboot when
	doGroupSetup fails

2007-04-20  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: BR libdhcp-static

2007-04-20  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILEGR): Add Mist since we're
	switching to it.

	* liveinst/Makefile: Merge translations for the desktop file (#237263)

	* po/Makefile (intltool-po): Do desktop file translations too.

	* textw/upgrade_bootloader_text.py: Clear up the text for the
	upgrade case where the bootloader can't be updated.
	* iw/upgrade_bootloader_gui.py: Likewise.

2007-04-20  Chris Lumens  <clumens@redhat.com>

	* vnc.py (startVNCServer):  Invert logic (#237194).

2007-04-20  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Make anaconda-runtime require genisoimage instead of
	mkisofs.

2007-04-19  David Cantrell  <dcantrell@redhat.com>

	* partedUtils.py (DiskSet.openDevices): Add /dev/ to the device node
	indicated in the >15 partitions error dialog.  Also, exit the installer
	if Reboot is selected (#234686).

2007-04-19  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* livecd.py (LiveCDImageMethod.getFilename): Handle getting the
	release notes for the live CD.

2007-04-19  David Cantrell  <dcantrell@redhat.com>

	* gui.py: Make StayOnScreen an Exception class rather than a string.

2007-04-19  Chris Lumens <clumens@redhat.com>

	* fsset.py (devify):  Don't map pseudofilesystems like tmpfs to device
	names like /dev/tmpfs.
	(FileSystemSet.add):  Smarten up the entry adding code to not
	duplicate pseudofilesystem entries (#236477).

	* scripts/upd-instroot:  Move locale-archive.tmpl into place.

2007-04-19  Jeremy Katz  <katzj@redhat.com>

	* packages.py (setFileCons): Add /etc/modprobe.d to our list of
	dirs that we have to restorecon

	* lang-table: Romanian returns (#237060)

2007-04-18  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* anaconda: Add a hack so that we go to lowres for PS3 video at
	480i (#236510)

	* isys/isys.h (EARLY_SWAP_RAM): Lower value for early 
	swap (dwmw2, #236508)

2007-04-18  David Cantrell  <dcantrell@redhat.com>

	* ui/autopart.glade: Rearrange some of the autopart UI for better
	widget alignment.

2007-04-18  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (YumDepSolveProgress.tscheck):  Don't traceback if
	there's no packages to update.

	* scripts/mk-rescueimage.i386:  The default option has changed
	locations for the menus (#236453).

	* scripts/upd-instroot:  Don't delete locale-archive when trying to
	save space, since that's where all the locales are now stored
	(#236978).

2007-04-18  Jeremy Katz  <katzj@redhat.com>

	* isomd5sum/libcheckisomd5.c (mediaCheckFile): Change the text a
	little so that it's more reasonable when we start using this with
	live media too. 

	* isys/isys.py (driveDict): Ignore drives that the live install is
	running from.  This should help avoid trying to install the
	bootloader to the USB key that you're running the live image off of

	* livecd.py (LiveCDImageMethod.postAction): Fix unmount to work
	and re-enable it so that people aren't left with /mnt/sysimage
	mounted in most cases
	(LiveCDImageMethod.protectedPartitions): Mark the live image
	partition as protected

2007-04-18  David Cantrell  <dcantrell@redhat.com>

	* vnc.py: import socket

2007-04-18  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (AnacondaYum.doConfigSetup): No good reason to not
	allow installing debuginfo (#236033)

2007-04-18  David Cantrell  <dcantrell@redhat.com>

	* isys/nl.c (netlink_init_interfaces_list): Should catch instances
	where namelen is zero.

	* isys/isys.py (inet_calcNetBroad): Fix broadcast address
	calculation (#236266).

2007-04-18  Paul Nasrat <pnasrat@redhat.com>

	* anaconda.spec: Update kudzu requirement for ps3 probing.

	* loader2/usb.c (usbInitialize):  Probe PS3 bus for hardware
	(#236480, dwmw2 AT redhat.com).
	* loader2/hardware.c (detectHardware):  Likewise.

2007-04-17  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* partedUtils.py (DiskSet.openDevices): Better message and give
	option to reboot or continue anyway in the too many partitions case
	(DiskSet.savePartitions): Don't try to commit disks with > 15 
	partitions.

2007-04-17  David Cantrell  <dcantrell@redhat.com>

	* partedUtils.py (DiskSet.openDevices): Check for more than 15
	partitions on the disk we are scanning.  If more than 15 are found,
	alert the user and return.  libata won't allow more than 15 partitions
	at the moment (#234686).

2007-04-17  Jeremy Katz  <katzj@redhat.com>

	* upgrade.py (upgrade_remove_blacklist): Add hal and mysql to
	upgrade blacklists

	* iw/upgrade_bootloader_gui.py
	(UpgradeBootloaderWindow._newToLibata): Ensure that we've actually
	switched to using libata for something
	* textw/upgrade_bootloader_text.py: And do the checks in text-mode too.

2007-04-17  David Cantrell  <dcantrell@redhat.com>

	* network.py (Network.write): Do not write out NETWORKING_IPV6 line
	to /etc/sysconfig/network anymore, initscripts does not use it.
	Instead, write a file to /etc/modprobe.d containing
	'install ipv6 /bin/true' in the cases where users want the IPv6
	stack completely disabled.

	* isys/nl.c (netlink_init_interfaces_list): Fix RTM_GETLINK message
	reassembly.  Also, make sure we read the entire interface name rather
	than just the first four characters.  Use BUFSZ macro throughout code.
	Fixes numerous problems, including the missing HWADDR line (#234764)
	* isys/nl.h: Define BUFSZ.
	* isys/isys.c: Looks like I fixed some whitespace.

2007-04-17  Chris Lumens  <clumens@redhat.com>

	* fsset.py (FileSystemSet.migratewrite,
	FileSystemSet.restoreMigratedFstab):  Remove unused code.

	* yuminstall.py (AnacondaCallback.callback):  Convert text from the
	package header out of Unicode since we can't put that into the text UI
	widgets (#233662).

	* iw/upgrade_bootloader_gui.py:  If the previous install did not use
	libata, default to writing out a new bootloader config and take away
	the update option (#229704).

	* fsset.py (FileSystemSet.mountFilesystems):  Print a better error
	message when devices are mentioned by name instead of by label and we
	can't mount them.

	* loader2/usb.c (usbInitialize):  Back out PS3 patch for now since
	support's not yet present in kudzu.
	* loader2/hardware.c (detectHardware):  Likewise.

2007-04-17  Paul Nasrat <pnasrat@redhat.com>

	* isys/isys.py: Ignore ps3 flash (#236481)

2007-04-16  Chris Lumens  <clumens@redhat.com>

	* loader2/usb.c (usbInitialize):  Probe PS3 bus for hardware
	(#236480, dwmw2 AT redhat.com).
	* loader2/hardware.c (detectHardware):  Likewise.

	* loader2/hardware.c (ideSetup):  Remove historical artifacts.

2007-04-13  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: add vmmouse driver

	* livecd.py (LiveCDCopyBackend._doFilesystemMangling): Fix
	restorecon to do the right thing; we were ending up with files
	starting with // and then files were mis-labeled (#236282)

2007-04-12  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2007-04-12  David Cantrell  <dcantrell@redhat.com>

	* loader2/urlinstall.c (mountUrlImage):  For instances where we prefer
	to load stage2 from the boot CD-ROM (e.g., rescuecd) but the user will
	be doing an HTTP or FTP install, do a test download of .discinfo to
	ensure they have entered the correct path (#232509).

	* anaconda.spec: BR libdhcp-devel-static.

2007-04-12  Jeremy Katz  <katzj@redhat.com>

	* urlinstall.py (UrlInstallMethod.systemMounted): Don't copy
	stage2.img if we can't find it
	* image.py (CdromInstallMethod.systemMounted): Likewise.

	* anaconda (setupEnvironment): Make sure we have /sbin and
	/usr/sbin in our path

2007-04-11  Chris Lumens  <clumens@redhat.com>

	* textw/partition_text.py (PartitionWindow.populate):  More
	intelligently assign RAID minor numbers in the text interface.

2007-04-11  David Cantrell  <dcantrell@redhat.com>

	* iw/release_notes.py: Fix handling of plain text release notes (patch
	from Elliot Peele).

2007-04-10  Chris Lumens  <clumens@redhat.com>

	* partedUtils.py (DiskSet.addPartition, DiskSet.deleteAllPartitions):
	Removed unused code.

	* yuminstall.py (YumBackend.writePackagesKS):  Don't write out remove
	lines for packages that don't exist on the installation arch.

2007-04-09  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* gui.py (InstallControlWindow.connectSignals): Exit when clicking
	reboot/close.

2007-04-05  Jeremy Katz  <katzj@redhat.com>

	* isys/dasd.c: Fix the build

2007-04-05  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* livecd.py (LiveCDCopyBackend.doInstall): Make the progress advance.
	(LiveCDImageMethod.postAction): Disable this for now as it doesn't
	quite seem to work

2007-04-05  David Cantrell  <dcantrell@redhat.com>

	* isys/dasd.c: Fix the formatting and check return values on
	things that give us return values.

2007-04-05  David Cantrell  <dcantrell@redhat.com>

	* isys/dasd.c: Condense read_vlabel() in to read_volume_label(), new
	function is named read_vlabel().  Support reading FBA entries in
	addition to EKCD entries from /proc/dasd/devices.

2007-04-04  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* livecd.py (LiveCDImageMethod.postAction): Unmount filesystems
	in the live case before continuing on. 
	* installclass.py (BaseInstallClass.postAction): Call the method 
	postAction
	* installmethod.py (InstallMethod.postAction): Add a method to be
	called in post action for unmounting things in the live case 

2007-04-04  Chris Lumens  <clumens@redhat.com>

	* autopart.py (doAutoPartition):  Removing items from a list you're
	iterating over confuses python (#235279).

2007-04-04  Jeremy Katz  <katzj@redhat.com>

	* iw/congrats_gui.py (CongratulationWindow.__init__): Add support
	for close button to be used with the live install (#225168)
	* ui/anaconda.glade: Likewise.

	* liveinst/liveinst.xinit: Work with changes for running from
	RAM/usb stick

	* liveinst/liveinst.sh: Adjust to use the block device instead of
	the mount point as the interesting part of the live image.

	* livecd.py: Changes so that we can work with the live image
	running from RAM or from a USB stick

2007-04-03  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* yuminstall.py (YumDepSolveProgress.tscheck): Don't require an
	argument that's not passed by yum's depsolver; we can figure this
	out ourselves really

	* liveinst/liveinst.sh: Disable SELinux while anaconda is running
	for now

2007-04-03  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version

2007-04-03  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (YumBackend.mirrorFailureCB):  Correctly detect if
	there are no more mirrors to try (#232639).

2007-04-03  David Cantrell  <dcantrell@redhat.com>

	* textw/partition_text.py (PartitionTypeWindow): Modify device list
	to provide size and model information like we do in iw mode.

	* loader2/loader.c (doLoaderMain): Revert change from yesterday.

	* loader2/kickstart.c: Support fetching kickstart files from HTTP
	URLs that require login information (<bnocera@redhat.com>, #194247)
	* loader2/kickstart.h: Likewise
	* loader2/urlinstall.c: Likewise

2007-04-02  David Cantrell  <dcantrell@redhat.com>

	* vnc.py (startVNCServer): Better fix (#234747)

2007-04-02  Jeremy Katz  <katzj@redhat.com>

	* iw/congrats_gui.py (CongratulationWindow.getScreen): Make this
	fit a little bit nicer.

	* livecd.py: Add missing import

	* liveinst/liveinst.sh: Use the right syntax for hal-lock

	* iw/autopart_type.py (PartitionTypeWindow._fillBootStore): Work
	to ensure that we don't traceback here in cases where there aren't
	drives (#234697 and others)

2007-04-02  David Cantrell  <dcantrell@redhat.com>

	* loader2/module-info: Add fec_mpc52xx, ps3_storage, and gelic_net
	(#220009).

	* vnc.py (startVNCServer): Display the IP address of the VNC server
	when telling the user what to connect to.  During DHCP install
	scenarios, users might not know the address they are assigned (#234747)

	* loader2/loader.c (doLoaderMain): Correct control flow problems in
	STEP_IFACE (#233655).

	* loader2/linuxrc.s390: Add OSA layer 2 network support for System Z
	platform (patch from Brad Hinson <bhinson@redhat.com>, #233376)

2007-04-02  Chris Lumens  <clumens@redhat.com>

	* backend.py:  Import constants (#234782).

	* loader2/module-info:  Add the netxen_nic driver (#230245).

2007-03-30  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2007-03-30  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (processKickstartFile):  Handle IOErrors if we can't
	find the kickstart file.

2007-03-28  Jeremy Katz  <katzj@redhat.com>

	* livecd.py (LiveCDCopyBackend.doRepoSetup): Check that we have
	sufficient disk space for the os.img.  (#230943)
	* backend.py (doRepoSetup): If repo setup fails, go back.

	* livecd.py (LiveCDCopyBackend._doFilesystemMangling): Call
	refresh method so that we don't end up with a hung looking UI
	during filesystem resizing, etc (#224213)

	* gui.py (WaitWindow.refresh): Add refresh method
	* cmdline.py (WaitWindow.refresh): Likewise.
	* text.py (WaitWindow.refresh): Likewise.

	* gui.py: Fix windows to be more sane for livecd install case (#224208)

	* liveinst/liveinst.sh: Load modules so that we can do filesystem
	stuff, etc (#230945)

2007-03-28  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-03-28  Chris Lumens  <clumens@redhat.com>

	* partedUtils.py (DiskSet.clearDevices):  Move the clearpart logic out
	of openDevices since we don't want to do it every time openDevices is
	called, which is fairly often (#232936).
	* packages.py (turnOnFilesystems):  Call clearDevices.
	* partitioning.py (partitioningComplete):  Likewise.

	* iw/partition_gui.py (DiskStripeGraph.add):  Add a little more space
	between the device description and the stripe for tall languages
	(#217294).

	* isys/isys.py:  Use /dev/ devices nodes for probing RAID superblocks,
	instead of recycling the same node in /tmp (#172648, #208970, #215231).

2007-03-27  Jeremy Katz  <katzj@redhat.com>

	* liveinst/liveinst.sh: Support using hal locking by running
	/usr/bin/hal-lock if it exists (#231201)

2007-03-27  Chris Lumens  <clumens@redhat.com>

	* raid.py (get_raid_max_spares):  Fix typo.

2007-03-27  David Cantrell  <dcantrell@redhat.com>

	* textw/network_text.py: Do not call screen.popWindow() if we get
	INSTALL_OK or INSTALL_BACK from chooseNetworkDevice() as that causes
	the next window to not be displayed.

	* loader2/linuxrc.s390: Add IPv4 address validation (#234152).

	* gui.py (releaseNotesButtonClicked): Spaces vs. tabs, tonight at 11.

	* network.py (hasActiveDev): Use isys.getLinkStatus() rather than
	isys.getIPAddress() (#232512).

	* isys/isys.c (doGetIPAddress): Do not clear netlink cache.

	* isys/nl.c: Netlink cache searching cleanups.

2007-03-26  David Cantrell  <dcantrell@redhat.com>

	* iw/progress_gui.py: Set the infolabel to left justify text so as to
	minimize the rapid eye movement for those if us trying to read names
	and descriptions.

	* network.py: When gathering network device description from kudzu,
	only probe for devices with modules currently loaded (#233507).

2007-03-26  Chris Lumens  <clumens@redhat.com>

	* fsset.py (readFstab):  Catch errors on unprintable labels and tell
	the user what device is causing problems (#191679).

2007-03-23  Jeremy Katz  <katzj@redhat.com>

	* gui.py (readImageFromFile): Make width/height args be in the
	same order as GTK functions

	* iw/network_gui.py (NetworkWindow.getScreen): Shorten entry box
	so that things fit on the screen better.

	* ui/autopart.glade: Make things not go off the screen at lower res 

	* iw/welcome_gui.py (WelcomeWindow.getScreen): Scale the splash
	image if we're not at 800x600

	* liveinst/liveinst.xinit: Don't cause xinit to exit

	* gui.py (InstallControlWindow.connectSignals): Exit if the close
	button is clicked (#231775)

2007-03-23  Chris Lumens  <clumens@redhat.com>

	* vnc.py (startVNCServer):  If we've got an IP address, display it
	(#231934).

2007-03-23  David Cantrell  <dcantrell@redhat.com>

	* loader2/loader.h: Change 'ip' structure member to 'ipv4'.
	* loader2/loader.c (readNetInfo, parseCmdLineIp, doLoaderMain): Where
	the 'ip' structure member was referenced in loaderData, change it to
	'ipv4'.
	* loader2/net.c: Likewise.

	* loader2/loader.c (doLoaderMain): In STEP_IP, handle inet_ntop()
	return values more gracefully when setting loaderData fields after
	readNetConfig() has been called.

	* anaconda.spec: Require libdhcp-devel >= 1.24 to handle dual-stack
	manual IP configuration correctly (#232690).

2007-03-23  Jeremy Katz  <katzj@redhat.com>

	* anaconda (getInstClass): Don't duplicate code (Elliot Peele) 
	* installclass.py (getBaseInstallClass): Likewise.

	* scripts/upd-instroot (KEEPFILE): zlib is moving to /lib

2007-03-22  Jeremy Katz  <katzj@redhat.com>

	* desktop.py (Desktop.write): Only write out
	/etc/sysconfig/desktop if the default desktop is set in the
	install (#233472)

2007-03-22  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* po/:  Rebuild translation files.  Fix kn.po to fix the build.

2007-03-22  Jeremy Katz  <katzj@redhat.com>

	* liveinst/Makefile: xinit files need to be named foo.sh

2007-03-22  Chris Lumens  <clumens@redhat.com>

	* harddrive.py (HardDriveInstallMethod.mountDirectory):  Handle the
	exception if we're unable to mount the ISO source device (#124793).

	* kickstart.py (Timezone):  Inherit from FC6_Timezone to make the
	--isUtc option work.

	* partedUtils.py (productMatches):  Allow upgrades from Fedora Core to
	Fedora.

	* yuminstall.py:  Remove a couple FIXMEs for things that are now in
	yum.

	* raid.py (getRaidLevels):  Don't confuse "raid1" and "raid10".
	* partRequests.py (RaidRequestSpec.getDevice):  RAID levels aren't
	guaranteed to be one digit.
	* loader2/loader.c (main):  Load RAID10 module.
	* scripts/mk-images:  Include RAID10 module.  Patch for all this from
	Paul P Komkoff Jr <i AT stingr.net> (#230268).

2007-03-21  David Cantrell  <dcantrell@redhat.com>

	* loader2/loader.c (parseCmdLineIp): Don't set ipinfo_set to true here,
	otherwise we don't bring the interface up later when we need to.  Just
	collect information here (#233152).

	* loader2/module-info: Added cdc_ether, which is the other part of USB
	networking that you need, the first is usbnet (#174229).

2007-03-21  Chris Lumens  <clumens@redhat.com>

	* textw/timezone_text.py (TimezoneWindow.__call__):  Fix traceback
	stemming from system-config-date updates.

2007-03-20  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* anaconda.spec: Fix syntax errors

	* liveinst/: Add bits for live CD hard drive installation kick off
	to anaconda for now.
	* anaconda.spec: Likewise.
	* Makefile: Likewise.

2007-03-20  Chris Lumens  <clumens@redhat.com>

	* iw/partition_ui_helpers_gui.py (createAllowedDrivesStore):  False
	and 0 are not the same.  Fixes no drives being selected by default on
	the autopart screen.

	* docs/command-line.txt:  Document "asknetwork" option (#233035).

2007-03-19  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-03-19  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images (FIREWIREMODS): Add new firewire modules
	(based on patch from krh, #231708)
	* loader2/module-info: Likewise.

2007-03-19  Chris Lumens  <clumens@redhat.com>

	* ui/adddrive.glade, ui/exn.glade, ui/instkey.glade,
	ui/iscsi-config.glade:  Mark strings for translation (#232778).

	* iw/timezone_gui.py:  Updated for new system-config-date (#232905).

	* yuminstall.py (AnacondaYum.isPackageInstalled):  Bring back working
	method to fix optional package selection for now (#232701).

2007-03-16  Chris Lumens  <clumens@redhat.com>

	* iw/partition_ui_helpers_gui.py (createAllowedDrivesStore):  Add a
	parameter to allow not selecting any drives.

	* iw/partition_dialog_gui.py (PartitionEditor.__init__):  Default to
	no drives selected (#195636).
	* iw/raid_dialog_gui.py (RaidEditor.createAllowedRaidPartitionsList):
	Likewise.

	* iw/account_gui.py (handleCapsLockRelease):  Display a warning
	message if caps lock is on (#207894).

	* docs/kickstart-docs.txt:  Update to describe --ignoremissing better
	(#209966).

	* po/:  Rebuild translation files.

2007-03-15  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2007-03-15  David Cantrell  <dcantrell@redhat.com>

	* autopart.py (doPartitioning): String fixes (#208394).

	* loader2/module-info: Changed description for cciss module to
	'HP/Compaq Smart Array Controller' (#210414).

2007-03-15  Chris Lumens  <clumens@redhat.com>

	* iw/autopart_type.py:  String fixes (#203346).
	* textw/partition_text.py:  Likewise.

2007-03-14  Chris Lumens  <clumens@redhat.com>

	* scripts/splittree.py (Timber.splitRPMS):  More intelligent error
	handling when there's too many packages for the CD size (#232104).

	* packages.py (selectLanguageSupportGroups, fixupConditionals,
	selectPackageConditionals):  Remove unused functions.

	* iw/congrats_gui.py (CongratulationWindow.getScreen):  Since you
	can't always eject the CD, don't tell the user to do it (#137275).
	* textw/complete_text.py (FinishedWindow.__call__):  Likewise.

	* loader2/loader.c (installMethods):  Fix confusing wording (#163329).

2007-03-13  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec: Bump version.

2007-03-12  Chris Lumens  <clumens@redhat.com>

	* fsset.py:  String fix (#231761).
	* iw/upgrade_swap_gui.py:  Likewise.

	* backend.py (AnacondaBackend.initLog):  Set instLog attribute on the
	backend so yum has somewhere to log to.

	* isys/isys.c (doGetIPAddress):  Clear out cached netlink information
	so we display the Remote button on the exception window.

2007-03-12  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (doDhcp): Return NULL in instances where DHCPv4_DISABLE
	and DHCPv6_DISABLE have been set (#230941).

	* textw/network_text.py: Added as a chooseNetworkDevice() method in the
	NetworkDeviceWindow class.  Handles systems with more than one NIC in
	a better way than before.  Users are presented with a list (similar to
	iw mode) and can configure the NICs they want.  Also closes a bug with
	rescue mode forcing users to configure _all_ NICs (#228512).

	* textw/constants_text.py: Added an 'Edit' button.

2007-03-09  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2007-03-09  David Cantrell  <dcantrell@redhat.com>

	* isys/str.c (strindex): (str != NULL) -> (*str != '\0').  Fixes
	HTTP install method SIGSEGV, among other things (#231576)

2007-03-08  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2007-03-08  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (doDhcp): Need DHCPv6_DISABLE set as well as
	DHCPv6_DISABLE_ADDRESSES when auto neighbor discovery is selected for
	IPv6 (#230941, #230949).

	* loader2/loader.c (doLoaderMain): In STEP_IP, set loaderData->ip if
	it's NULL and we have IPv4 and/or IPv6 networking enabled (#231290).

	* loader2/loader.c (parseCmdLineFlags): If BOOTIF= is passed as a boot
	argument, pull the MAC address from it and replace hyphens with colons
	so that the MAC address is usable in loader (#209284).

	* isys/str.c (strcount): If tmp is NULL, return 0 (#231290).

	* ui/netpostconfig.glade: Remove enable at boot checkbox since it's
	already in the list of devices on the main screen.

	* iw/network_gui.py: Remove references to activate_on_boot widget.

2007-03-08  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (Raid):  Subclass from F7_Raid instead.

	* loader2/loader.c (main):  Make sure ext2 filesystem module is loaded
	early (#230946).

2007-03-08  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  New version.

2007-03-08  Chris Lumens  <clumens@redhat.com>

	* po/is.po:  Fix translation so anaconda will build.
	* po/:  Remove ancient translation cruft.

	* sortedtransaction.py (SplitMediaTransactionData.getMembers):  Fix
	for yum API change.

2007-03-07  Jeremy Katz  <katzj@redhat.com>

	* po: Refresh-po

	* scripts/buildinstall: And don't worry about existence of the
	RPMS/ dir anymore. (Jesse Keating)

	* scripts/buildinstall: Don't call createrepo (Jesse Keating)

	* iw/partition_gui.py (PartitionWindow.getNext): Typo fix (Renato 
	Pavii)	
	* textw/upgrade_text.py (UpgradeSwapWindow.__call__): Likewise.

	* scripts/splittree.py: Don't generate RPMS/ dir (Jesse Keating)

	* iw/progress_gui.py (InstallProgressWindow.setShowPercentage):
	Add method to say that we should just show the percentage in the
	progress bar like newt does.  If this is set, ignore any calls to
	set_text().
	* textw/progress_text.py
	(InstallProgressWindow.setShowPercentage): Placeholder method,
	doesn't actually do anything for text mode given the way newt works. 
	* cmdline.py (progressDisplay.setShowPercentage): Add placeholder
	here too.

	* po/: Refresh-po

	* backend.py (AnacondaBackend.initLog): Don't open the install log
	twice (Elliot Peele)

	* installclass.py (availableClasses): Log a warning when there's
	an error loading an installclass; raise it in debug mode (Elliot Peele)

	* exception.py: rpm import not used (Elliot Peele)

	* po/Makefile ($(NLSPACKAGE).pot): Specify that we're starting
	from UTF-8 to make xgettext happy

	* textw/partition_text.py
	(PartitionTypeWindow.addIscsiDriveDialog): Mark prompts for
	translation (#231274)

2007-03-06  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2007-03-06  Jeremy Katz  <katzj@redhat.com>

	* ui/anaconda.glade: Back to the smaller required height width so
	that things work better with livecd installs at 800x600
	* gui.py (InstallControlWindow.createWidgets): Ensure the window
	is centered in the case where the window is at 800x600 

2007-03-06  David Cantrell  <dcantrell@redhat.com>

	* loader2/urls.c (convertURLToUI): Whitespace cleanup before code
	changes.
	* loader2/net.c (strcount): Moved to isys/str.c.
	* isys/str.c: Added strcount() function.
	* isys/str.h: Prototype for strcount.

	* loader2/net.c (initLoopback): Init loopback correctly, have to go
	back to using ioctl() rather than netlink. (#229670)

	* isys/nl.c (netlink_init_interfaces_list): Handle netlink messages
	for RTM_GETLINK that are larger than 4K.  This allows us to handle a
	variable number of network devices in the system (#230525).

2007-03-05  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* iw/autopart_type.py (PartitionTypeWindow.getScreen): Add a combo
	to select where to install the bootloader.  This is extra needed
	with the combination of installing to USB and EDD.
	* ui/autopart.glade: Add the UI bits. 

	* scripts/mk-images (FSMODS): Hey, lookie there... someone made
	ext2 a module.

2007-03-05  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.  BuildRequire newt-static.
	s/BuildPreReq/BuildRequires/

2007-03-05  David Cantrell  <dcantrell@redhat.com>

	* loader2/loader.c (doLoaderMain): Set ipinfo_set and ipv6info_set
	in loaderData depending on what happened in readNetConfig() (#210370)

	* loader2/net.c (kickstartNetworkUp): If IPv4 or IPv6 networking is
	already set up, return (#210370)

2007-03-05  Jeremy Katz  <katzj@redhat.com>

	* text.py (ProgressWindow): Pass ints to snack Scale (#230951)

	* whiteout.py: Don't import rpm.  We don't use it here.  And nuke
	other old code too.

	* backend.py (AnacondaBackend.copyDriverDiskModules): Move to here so
	that it can be used generically or overridden per-backend
	(AnacondaBackend.doPostInstall): And call it.
	* yuminstall.py (YumBackend.doPostInstall): Remove specific module
	copy.

	* yuminstall.py : Remove lots of old code related to making
	depsolving internal to anaconda.  The yum bits should be good
	enough here.
	(AnacondaCallback.__init__): Rename from
	simpleCallback.  Take yum object as an argument.  Make keeping
	track of the open file simpler.
	(AnacondaCallback.callback): Adjust to use the normal yum API for 
	the actual callback.
	(AnacondaYum.doConfigSetup): Add a temporary workaround for an API
	breakage in yum 3.0.3
	(YumDepSolveProgress.__init__): Fix definition of noop methods
	(YumDepSolveProgress.noop): Take any arguments and ignore them.

	* anaconda (setVNCFromKickstart): Log the real error.

	* kickstart.py (pullRemainingKickstartConfig): Fix a few syntax errors.

2007-03-02  David Cantrell  <dcantrell@redhat.com>

	* raid.py (register_raid_device):  Fix another typo.

2007-03-02  Chris Lumens  <clumens@redhat.com>

	* raid.py (get_raid_max_spares):  Fix typo from RAID10 patch.

2007-03-01  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-03-01  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Set the kickstart data after setting any initial timezone
	info so we don't wipe out what was in the ksfile (#230472).

	* kickstart.py (setSteps):  ksdata.reboot.action could be None.
	(pullRemainingKickstartConfig):  Support multiple %ksappend lines
	(#222201).

2007-02-28  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py: Use new progress API
	* livecd.py: Likewise.

	* iw/progress_gui.py: New progress screen interface that's more
	suited to different backends
	* textw/progress_text.py: Likewise.
	* cmdline.py (progressDisplay): Likewise.

2007-02-28  Chris Lumens  <clumens@redhat.com>

	* anaconda (setVNCFromKickstart):  Handle any kickstart exceptions
	instead of just printing a traceback.

	* loader2/kickstart.h:  Add support for an updates command.
	* loader2/kickstart.c:  Likewise.

	* docs/kickstart-docs.txt:  Describe new updates command.

	* fsset.py:  Apply patch to add support for RAID10 (Orion Poplawski
	<orion@cora.nwra.com>, #230268).
	* partRequests.py:  Likewise.
	* raid.py:  Likewise.

	* gui.py (InstallControlWindow.setScreen):  exec must die.
	* text.py (InstallInterface.run):  Likewise.

2007-02-28  Jeremy Katz  <katzj@redhat.com>

	* scripts/splittree.py (usage): Fix reserve-size (#230343)

2007-02-27  Chris Lumens  <clumens@redhat.com>

	* iw/:  Apply a patch to clean up strings (Paul W. Frields
	<stickster@gmail.com>, #204564).
	* textw/:  Likewise.

	* iw/account_gui.py (AccountWindow.getScreen):  Focus the next button
	when enter is pressed on the second password entry (#206568).

2007-02-26  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-02-26  Jeremy Katz  <katzj@redhat.com>

	* partedUtils.py (checkDiskLabel): Clean up text (#228198)

	* packages.py (doMigrateFilesystems): Write out the fstab after
	migrate (#223215) 

	* iw/autopart_type.py (PartitionTypeWindow.getScreen): Wrap before
	the requested width (#221791)

2007-02-26  Chris Lumens  <clumens@redhat.com>

	* installclass.py (availableClasses):  Use imputil instead of exec.

	* installclasses/rhel.py (InstallClass):  The RHEL installclass is
	hidden in Fedora.

	* iw/autopart_type.py (PartitionTypeWindow.addIscsiDrive):  Simplify
	string (#229959).
	* iw/task_gui.py (TaskWindow._addRepo):  Likewise.

	* iw/autopart_type.py (PartitionTypeWindow.comboChanged):  Drive
	selection box shouldn't be sensitive if custom layout is selected
	(#219207).

	* kickstart.py (selectPackages):  Pass selectGroup the right options
	for selecting mandatory-only or optional packages.
	* yuminstall.py (YumBackend._selectDefaultOptGroup):  Add a method to
	deselect default packages and select optional ones.  This is required
	for supporting the extended kickstart group selection syntax.

	* ui/scp.glade:  Center scp window.  Change label to let the user know
	port numbers are accepted.

	* exception.py (copyExceptionToRemote):  Handle port numbers in the
	host string (#227909).

	* loader2/modules.c (loadKickstartModule):  Don't attempt to load a
	module when the kickstart device line is incorrect (#227510).

2007-02-23  Dave Lehman  <dlehman@redhat.com>

	* yuminstall.py (selectBestKernel): actually select kernel-xen-devel
	when we say we're going to (#226784)

	* iw/autopart_type.py (PartitionTypeWindow.getScreen): desensitize 
	review checkbox if we're headed backwards and the current selection is 
	custom (#220951)

	* gui.py: add class InstallKeyWindow and InstallInterface method 
	getInstallKey

	* text.py: add getInstallKey method

	* ui/instkey.glade: instkey dialog (new file)

2007-02-23  Chris Lumens  <clumens@redhat.com>

	* network.py (Network.write):  Don't write out an extraneous "yes"
	(#227250).

	* yuminstall.py (YumBackend.doRepoSetup):  Verify added repositories
	when the user has gone back to the tasksel screen as well (#227762).

	* po/Makefile:  Don't include /usr/share/zoneinfo/zone.tab for
	translation anymore (#229729).
	* scripts/upd-instroot:  Include system-config-date translations in
	the base KEEPFILES list for text mode.

	* ui/netpostconfig.glade:  Trim down that ridiculous border.

	* scripts/mk-images.x86:  Another fix for the maketreeinfo stuff.

	* docs/command-line.txt:  Update kssendmac documentation (#189292).
	Add documentation for the mtu= parameter (#173641).

2007-02-22  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (YumBackend.doPreInstall):  If /etc/mtab exists,
	delete it since it might be a symlink (#213818).

	* loader2/module-info:  Added atl1.ko (#229641).

	* scripts/maketreeinfo.py:  Fix typo.

	* textw/partition_text.py (PartitionTypeWindow.addIscsiDriveDialog):
	Fix traceback when cancel is pressed (#229694).
	(PartitionTypeWindow.addZFCPDriveDialog):  Likewise.

2007-02-21  Dave Lehman  <dlehman@redhat.com>

	* partedUtils.py (openDevices): don't relabel disks that contain
	protected partitions (#220331)

	* autopart.py (doClearPartAction): clear all non-protected partitions
	from disks that contain a protected partition IFF initAll is set

	* partedUtils.py (hasProtectedPartitions): new method to check if a
	drive contains protected partitions

	* packages.py (writeRegKey): method to write out regkey

	* dispatch.py: add writeregkey step

	* installclass.py (BaseInstallClass): add regkey fields and step

	* instdata.py: include regkey settings in anaconda-ks.cfg

	* packages.py (regKeyScreen): allow access to regkey screen while
	moving backwards (#219361)

	* installclasses/rhel.py: add support for real regkeys (via instnum)

2007-02-21  Chris Lumens <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-02-21  Chris Lumens  <clumens@redhat.com>

	* anaconda: Add dpi flag when starting X (#224665).
	Set the default timezone based on the current language even if we
	can't display it yet (#227625).

	* instdata.py (InstallData.reset):  Set the default timezone based on
	current language.

	* scripts/upd-instroot:  Several important terminfo files have moved
	into /lib (#228596, #229236).
	Add vnc-libs for librfb.so so VNC installs work again.

2007-02-20  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec: Bump version.

2007-02-20  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Vnc -> vnc.

	* kickstart.py:  Move command objects back out of the handler object.
	Add a commandMap dict patterned after what's in pykickstart to
	override its objects.  KickstartParser no longer takes a version
	argument.
	(selectPackages):  groupList is now a list of Groups.

	* lang-table:  Change default French layout to latin9 (#229269).

	* scripts/upd-instroot:  The shell now requires libtinfo*.

	* scripts/maketreeinfo.py:  Added a script to generate a .treeinfo
	file in the built tree (Will Woods <wwoods AT redhat.com>).
	* scripts/Makefile:  Install maketreeinfo.py to anaconda-runtime dir.
	* scripts/buildinstall:  Run maketreeinfo.py.

	* scripts/mk-images.*:  Generate .treeinfo files (Will Woods <wwoods
	AT redhat.com>).

2007-02-16  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2007-02-16  David Cantrell  <dcantrell@redhat.com>

	* iw/network_gui.py (NetworkWindow): Remove obsolete code.

	* wlite/wlite_mbsinit.c: Fix some compiler warnings.
	* wlite/wlite_wcstod.c: Likewise.

2007-02-15  Peter Jones  <pjones@redhat.com>

	* anaconda.spec:  Bump version.

2007-02-15  Peter Jones  <pjones@redhat.com>

	* scripts/upd-instroot: update for device-mapper > device-mapper-libs
	split.

2007-02-15  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Patch for createrepo >= 0.4.7 (jkeating).
	* scripts/buildinstall: Likewise.

2007-02-14  David Cantrell  <dcantrell@redhat.com>

	* xmouse.c: Removed, not used anymore.
	* Makefile: Remove xmouse targets.

2007-02-13  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-02-13  David Cantrell  <dcantrell@redhat.com>

	* textw/network_text.py: If we got INSTALL_BACK from runIPv4Screen(),
	only decrement currentDev if it's greater than zero.

2007-02-13  David Cantrell  <dcantrell@redhat.com>

	* textw/network_text.py: Fix errors in the IPv6 configuration window
	initialization.  Also fix the Back button on IPv6 window so it takes
	you back to the main window or IPv4 window (whichever you were just
	at).

2007-02-13  Chris Lumens  <clumens@redhat.com>

	* loader2/loader.c (main):  Load the ext3 module before prompting for
	install method so we can find images on the hard drive again (#223749,
	#224534).

	* xsetup.py: Don't traceback if there's no ksdata.

2007-02-13  David Cantrell  <dcantrell@redhat.com>

	* autopart.py (doAutoPartition): Add space before %s in error dialog
	text (#228192).

	* yuminstall.py: Do not try to import from genheader.

	* iw/network_gui.py: Remove descr hash, not used anymore.

	* textw/network_text.py: Rewrite network interface configuration
	screens to more closely match how we handle it in the iw interface.
	We configure IPv4 and IPv6 independently.

2007-02-09  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec:  Bump version.

	* anaconda.spec:  BuildRequires device-mapper-devel

2007-02-09  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec:  Bump version.

2007-02-08  Chris Lumens  <clumens@redhat.com>

	* findpackageset.py, genheader.py:  Removed.

	* po/*:  Update translation files (#227775).

2007-02-07  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Static glib libraries have moved.

2007-02-07  Peter Jones  <pjones@redhat.com>

	* lvmErrors.py: add some exception classes

	* lvm.py: add lvmExec and lvmCapture wrappers to iutil.exec*.
	make lots of lvm commands use lvmExec and lvmCapture.
	When exceptions happen, raise the exceptions defined in lvmErrors.py

	* fsset.py: use lvm commands in lvm.py

2007-02-07  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.py (fbconProbe): Remove obsolete crap.
	* isys/isys.c (doFbconProbe): Likewise.

2007-02-06  David Cantrell  <dcantrell@redhat.com>

	* iw/network_gui.py (NetworkWindow): Display DHCPv6 rather than DHCP
	for the IPv6/Prefix column.

2007-02-06  Peter Jones  <pjones@redhat.com>

	* installclass.py (BaseInstallClass): make "description" a property
	that formats based on translated self._description and
	self._descriptionFields, so they're translated correctly.
	Use RHupdates if available for installclasses.

	* installclasses/rhel.py: move self.description to  self._description
	and self._descriptionFields

	* installclasses/fedora.py: ditto.

2007-02-06  Chris Lumens  <clumens@redhat.com>

	* installclass.py (BaseInstallClass.setSteps):  Add the postscripts
	step (#227470).

	* kickstart.py (runPostScripts):  Bail if there's no ksdata.

	* loader/net.c (kickstartNetworkUp):  If the wrong interface is
	picked, allow going back to the interface selection screen (#213787).

	* textw/grpselect_text.py (GroupSelectionWindow.__call__):  Sort
	detailed package listing.

2007-02-01  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Pass the class to xsetup.

	* installclass.py (BaseInstallClass.setMiscXSettings):  Don't try to
	second guess any provided resolution or depth (like from a kickstart
	file).

	* xsetup.py (XSetup.write):  If a resolution was specified in a
	kickstart file, preserve that in the installed system's xorg.conf
	(#158089).

	* yuminstall.py (YumBackend.writePackagesKS):  Do a better job about
	writing out which packages are selected/deselected (#189873).

2007-01-31  Chris Lumens  <clumens@redhat.com>

	* gui.py (MessageWindow.__init__):  Add parent parameter, and fix
	argument passing so these windows get run on kickstart installs.

	* installclasses/fedora.py (InstallClass.setInstallData):  Don't set
	up the default partitions if we're on a kickstart install.  autopart
	will handle that for us.
	* installclasses/rhel.py (InstallClass.setInstallData):  Likewise.

2007-01-30  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/pkgorder: Clean up handling of different directory
	layouts (Jesse Keating)

	* scripts/buildinstall: Use $TMPDIR instead of hard-coded /tmp
	(Steve Pritchard <steve@silug.org>, #224438)
	* scripts/getkeymaps: Likewise.
	* scripts/mk-images: Likewise.
	* scripts/mk-images.ia64: Likewise.
	* scripts/pkgorder: Likewise.
	* scripts/upd-instroot: Likewise.
	* scripts/yumcache: Likewise.

2007-01-30  Chris Lumens  <clumens@redhat.com>

	* iw/timezone_gui.py (AnacondaTZMap.timezone_list_init):  Wrap the
	label if it's too long (#225444).

2007-01-29  Bill Nottingham  <notting@redhat.com>

	* packages.py (betaNagScreen): Add 'Fedora' -> 'Fedora Core' mapping.
	Perhaps this needs to go in the product stuff with bugurl?

2007-01-29  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.doRepoSetup): Give an error when
	there's no comps information

	* partIntfHelpers.py (mustHaveSelectedDrive): Kill useless
	preposition at the end of the sentence.

2007-01-29  Bill Nottingham  <notting@redhat.com>

	* partIntfHelpers.py: reword dialog

2007-01-29  Peter Jones  <pjones@redhat.com>

	* bootdisk/i386/syslinux.cfg: use "localboot 0xffff" so we use the
	next bios device instead of device 0x00.

	* bootdisk/x86_64/syslinux.cfg: ditto

2007-01-26  Chris Lumens  <clumens@redhat.com>

	* instdata.py (InstallData.reset):  Set firstboot to skipped if this
	is a kickstart install, as otherwise kickstart files with no firstboot
	command line will default to on.

	* xsetup.py (XSetup.writeKS):  Don't write out --startxonboot three
	times.

2007-01-26  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/pkgorder: Use rpmlib for ordering, not incomplete bits
	in yum

2007-01-25  Chris Lumens  <clumens@redhat.com>

	* iw/timezone_gui.py:  Give some indication of what city is currently
	being pointed at (#219417).

2007-01-24  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* installclasses/fedora.py: No extra repos while things are in flux 

2007-01-24  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* rescue.py (runRescue): Fix fsystem mounting
	* anaconda: Pass instClass

	* anaconda (doStartupX11Actions): Setup graphical links earlier so
	that we have the right theme bits

2007-01-23  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* anaconda.spec (Requires): Add some more things we require

	* rescue.py (runRescue): We don't really use the method for rescue

	* isys/isys.py (makeDevInode): Don't remake device nodes that
	already exist.

	* scripts/upd-instroot (KEEPFILEGR): More icons is more better.

2007-01-23  Chris Lumens  <clumens@redhat.com>

	* kickstart.py:  self.anaconda -> self.handler.anaconda in the nested
	classes (#223903).

2007-01-23  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec (Requires): Don't require s-c-keyboard on weird arches

	* kickstart.py (AnacondaKSParser.__init__): Remove @everything
	support as promised.

2007-01-22  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/pkgorder (PackageOrderer.setup): Kill the warning

2007-01-22  Peter Jones  <pjones@redhat.com>

	* scripts/pkgorder: make sure the import path includes booty, as
	import chains try to pull it in.

2007-01-22  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILE): libncurses is in /lib now
	(KEEPFILEGR): Fix up for echo icon theme

2007-01-22  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (doDhcp): Add 'anaconda-' to the front of the automatic
	vendor-class-identifier (#220082).
	* isys/isys.c (doDhcpNetDevice): Likewise.

2007-01-22  Chris Lumens  <clumens@redhat.com>

	* kickstart.py:  Remove imports we no longer need.

2007-01-19  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec (Requires): We need system-config-keyboard for
	anaconda to run

2007-01-19  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* kickstart.py (setSteps):  Upgrade is no longer an installclass, so
	call upgrade.setSteps instead.
	* upgrade.py (setSteps):  Moved here from upgradeclass.py.
	* upgradeclass.py:  Removed.
	* iw/examine_gui.py (UpgradeExamineWindow.getNext):  Don't need to
	instantiate an installclass anymore.
	* textw/upgrade_text.py (UpgradeExamineWindow.__call__):  Likewise.

2007-01-19  Jeremy Katz  <katzj@redhat.com>

	* ui/anaconda.glade: Revert my changes from yesterday since they
	seem to make the normal case worse.  Will investigate some more.

	* bootdisk/x86_64/syslinux.cfg: Update this one too

2007-01-19  Chris Lumens  <clumens@redhat.com>

	* anaconda (Anaconda.setMethod):  Don't print out the method instance.

	* kickstart.py (AnacondaKSPackages):  Subclass Packages so we can keep
	track of if the package section was seen or not.  Fix step skipping
	for package selection.
	(selectPackages):  Support %packages --default as an explicit way of
	only installing the install class's default package set (#221305).

2007-01-19  Chris Lumens  <clumens@redhat.com>

	* gui.py:  We don't always have an ICW.

	* installclass.py (BaseInstallClass.setEarlySwapOn):  Remove unused
	code.

	* anaconda:  Kickstart is no longer an install class.
	* backend.py (doBasePackageSelection):  If this is a kickstart
	install, apply package and group selections.
	* dispatch.py (installSteps):  Add a step to run kickstart %post
	scripts.
	* exception.py (handleException):  Run kickstart %traceback scripts
	here.
	* kickstart.py:  Kickstart is no longer an install class, so move all
	the methods out to package level and clean them up.  Also, subclasses
	of KickstartParser need to accept a version argument and subclasses of
	BaseHandler need to specify which version they are.

2007-01-19  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images.x86: Fix sed calls, make sure we remove cruft

	* anaconda (Anaconda.setBackend): Backends take the method, not
	the methodstr

2007-01-19  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (manualNetConfig):  Make sure error flags are reset
	when the user is asked to re-enter IP information.  Previously, once
	you triggered the input error, all subsequent tries would be marked
	as invalid input.

2007-01-19  Jeremy Katz  <katzj@redhat.com>

	* gui.py (InstallControlWindow.createWidgets): Oops, remove the if 1

	* scripts/upd-instroot (KEEPFILEGR): Add libthai bits

2007-01-18  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* xsetup.py (XSetup.writeKS): Don't redefine str

	* livecd.py (LiveCDCopyBackend._doFilesystemMangling): Fix syntax error

	* Makefile.inc (M32FLAGS): Make it trivial to do a 32bit build on
	a 64bit host

	* wlite/GNUmakefile (CDFLAGS): Use M32FLAGS

	* isomd5sum/Makefile (CFLAGS): Use -fPIC

	* isys/Makefile (_isys.so): Use LDFLAGS
	* loader2/Makefile (loader): Likewise.
	* stubs/Makefile ($(LIBUTF8)): Likewise.
	* Makefile: Likewise.
	(clean): Nuke mini-wm on clean

	* isomd5sum/Makefile (CFLAGS): Use common CFLAGS and LDFLAGS; use
	LDFLAGS everywhere
	* utils/Makefile: Use common LDFLAGS

2007-01-18  Jeremy Katz  <katzj@redhat.com>	

	* livecd.py (LiveCDCopyBackend._doFilesystemMangling): Remove
	mountpoint dirs
	(LiveCDCopyBackend._doFilesystemMangling): Hack to reset file
	contexts on copied directory trees.  Our copy should do the preserving.

	* gui.py: Tweak various dialog types to work better with a real
	window manager; handle the case of a running system at 800x600
	where we were a bit too constrained in screen real-estate
	* ui/anaconda.glade: Tweak required height/width

	* anaconda (doStartupX11Actions): Set a selection if we're using
	mini-wm so that we can tell later
	* xutils.c (getXatom): Add support for seeing if a selection is set
	* Makefile (xutils.so): Need gdk for this

	* yuminstall.py (YumBackend.__init__): We actually do want to be
	able to do package selection with the yum backend.

2007-01-18  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* loader2/method.c (unpackCpioBall): Fix the build

	* image.py (findIsoImages): Translate the string

2007-01-18  Jeremy Katz  <katzj@redhat.com>	

	* syslogd.py (InstSyslog.start): Ensure that we have a syslogd or
	don't try to start.  Otherwise, we end up hanging things

	* yuminstall.py (YumBackend.__init__): yum installs can do package
	selection 

	* livecd.py: Add live CD image copy backend and install method.

	* installclasses/fedora.py: Handle installclass API changes; allow
	livecd method

	* installclass.py (BaseInstallClass.setSteps): Take anaconda
	instead of dispatch as an argument; use so that the backend
	upgrade allowing + package selection can work 
	(BaseInstallClass.setDefaultPartitioning): Make it easier to
	default to no-LVM
	* kickstart.py (Kickstart.setSteps): Tweak for calling change
	* upgradeclass.py (InstallClass.setSteps): Likewise.
	* installclasses/rhel.py (InstallClass.setSteps): Likewise.
	* anaconda: Pass anaconda to instClass.setSteps; don't depend on
	the existence of /mnt/runtime/... with x_already_set

	* backend.py (AnacondaBackend.__init__): Let the backend define
	whether or not upgrades are supported
	(AnacondaBackend.doPreInstall): postInstall kills the log, start
	it in the pre
	(AnacondaBackend.initLog): Ensure the dir we want to use exists
	(writeConfiguration): Write instdata before backend bits

2007-01-18  Chris Lumens  <clumens@redhat.com>

	* loader2/net.c (setKickstartNetwork):  Bring up loopback as well
	(#191424).

	* xsetup.py (XSetup.writeKS):  Don't traceback if there's no ksconfig.

2007-01-18  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images.x86 (SYSLINUX): Handle doing any of vesamenu
	with a jpg, using the script to convert to the lss file or just
	having the lss file.
	* bootdisk/i386/syslinux.cfg: Add bits so that we can support a
	menu if desired

	* installclasses/custom.py: Remove obsolete file
	* installclasses/personal_desktop.py: Likewise.
	* installclasses/server.py: Likewise.
	* installclasses/workstation.py: Likewise.

	* installclasses/fedora.py: Implement getMethod/getBackend
	* installclasses/rhel.py: Likewise.

	* anaconda (Anaconda.setMethod): Use installclass to determine method
	(Anaconda.setBackend): And backend

	* installclass.py (BaseInstallClass.getMethod): Add a method to
	parse the method str and return an InstallMethod constructor
	(BaseInstallClass.getBackend): For backend as well

2007-01-17  Jeremy Katz  <katzj@redhat.com>

	* iw/progress_gui.py (InstallProgressWindow.completePackage):
	Quick and dirty way of handling-non rpm installs.  This needs to
	be reworked more completely

	* timezone.py (Timezone.__init__): Add a default in case the step
	is skipped

	* instdata.py (InstallData.write): Ensure that network is written
	out rather than counting on our backend to do so in its preinstall

	* fsset.py (FileSystemType.isKernelFS): Add a method to determine
	if we're an in-kernel pseudo-filesystem
	(PsudoFileSystem.isKernelFS): And implement it
	(FileSystemSet.umountFilesystems): Allow unmounting filesystems
	without turning off swap.

2007-01-17  Dave Lehman  <dlehman@redhat.com>

	* loader2/method.c (unpackCpioBall): new function to unpack a
	cpio ball into a specified root directory

	* loader2/method.c (copyUpdatesImg): if the updates can't be mounted
	try unpacking them as a cpio ball

2007-01-17  Peter Jones  <pjones@redhat.com>

	* loader2/init.c (getInitPid): clear memory before using it (#222953)

2007-01-17  Chris Lumens  <clumens@redhat.com>

	* instdata.py (InstallData.reset):  Remove unused crud.
	* timezone.py (Timezone.__init__):  Likewise.

2007-01-17  Jeremy Katz  <katzj@redhat.com>

	* fsset.py: Search paths for various executables that we call
	rather than hard-coding them as being under /usr/sbin since
	they're more normally under /sbin

2007-01-17  David Cantrell  <dcantrell@redhat.com>

	* textw/network_text.py: Reference useIPv4 and useIPv6 from the
	network device object (Elliot Peele).

2007-01-17  Jeremy Katz  <katzj@redhat.com>

	* isys/auditd.c: Don't exit if we're not using SELinux (Elliot Peele)

2007-01-16  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2007-01-16  Dave Lehman  <dlehman@redhat.com>

	* yuminstall.py (doPostSelection): remove packages added to solve 
	dependencies if we can't accept the package selection because of 
	limited disk space (#222894)

	* yuminstall.py (_undoDepInstalls): new method to remove transaction
	members that are only there because something depends on them

	* yuminstall.py (doPostSelection): don't pop the depsolver progress
	meter on ENOSPC since we'll do it in the finally block anyway (#215493)

2007-01-16  Chris Lumens  <clumens@redhat.com>

	* kickstart.py:  Rearrange code so each command handler is a class
	inside AnacondaKSHandler and add __init__ and parse methods to each
	class since pykickstart will expect those.  Subclass AnacondaKSParser
	and KickstartPreParser from whatever class pykickstart says is the
	latest syntax version.  Fix references throughout to refer to the new
	pykickstart code arrangement.

	* anaconda:  Fix references to ksdata for new pykickstart arrangement.
	* bootloader.py (bootloaderSetupChoices):  Likewise.
	* exception.py (dumpException):  Likewise.
	* instdata.py (InstallData.write):  Likewise.
	* partedUtils.py (DiskSet.openDevices):  Likewise.
	* xsetup.py (XSetup.writeKS):  Likewise.
	* yuminstall.py (AnacondaYum.doConfigSetup):  Likewise.

2007-01-16  Chris Lumens  <clumens@redhat.com>

	* loader2/hdinstall.c (loadHDImages):  Fix test for NULL (#222767,
	Zhang Yanmin <yanmin.zhang AT intel.com>)

2007-01-15  Chris Lumens  <clumens@redhat.com>

	* text.py (InstallInterface.run):  Don't display the unsupported
	language message box in non-interactive kickstart installs (#222096).

2007-01-15  Peter Jones  <pjones@redhat.com>

	* iutil.py (execWith{Capture,Redirect}: force argv a list, not a tuple

2007-01-11  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (AnacondaYum._run): Fix so that we properly show
	error messages

2007-01-11  David Cantrell  <dcantrell@redhat.com>

	* ui/netpostconfig.glade: Note DHCP for IPv6 as 'DHCPv6'.  Remove
	'RFC 2461' from the text for the automatic neighbor discovery
	option.

	* loader/net.c (configureTCPIP): Use DHCPV6_METHOD_STR for the
	DHCP on IPv6 checkbox.
	* loader/net.h: Define DHCPV6_METHOD_STR.  Remove 'RFC 2461' from
	the AUTO_METHOD_STR macro.

	* iw/release_notes.py (ReleaseNotesViewer.setupWindow): Switch to
	just a GtkWindow so that we don't have annoying GtkDialog behavior
	on press of ESC (#220418).  From katzj.

2007-01-10  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* network.py (NetworkDevice.__str__): Don't try to write out
	USEIPV4/USEIPV6 on a per-device basis
	(Network.write): Fix NETWORK_IPV6 for current code.

	* anaconda (Anaconda.setMethod): Fix initialization of instdata

	* scripts/upd-instroot (KEEPFILE): Add libnash

2007-01-10  David Cantrell  <dcantrell@redhat.com>

	* network.py: Set NETWORKING_IPV6 in /etc/sysconfig/network to
	yes or no depending on whether the user enabled or disabled IPv6
	during installation (#222147).

2007-01-09  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/module-info: Add pata_*

2007-01-09  Chris Lumens  <clumens@redhat.com>

	* loader/kickstart.c (getKickstartFile):  Don't try to free ksFile on
	ks=file: paths (#221904).

	* isys/isys.c (doDhcpNetDevice):  Don't care about the return value of
	asprintf.
	* loader2/net.c (doDhcp):  Likewise.
	* loader2/urls.c (urlMainSetupPanel):  Likewise.

2007-01-09  Peter Jones  <pjones@redhat.com>

	* autopart.py (fitConstrained): Use per-arch minimum for the starting
	sector of partitions.

2007-01-09  David Cantrell  <dcantrell@redhat.com>

	* vnc.py (askVncWindow): Only ask the user to run VNC if Xvnc is
	present.

2007-01-08  Peter Jones  <pjones@redhat.com>

	* gui.py (MessageWindow): put a 'debug' button on all dialogs with
	custom buttons if flags.debug is set.

	* loader2/init.c (main): print a newline before "Greetings.", so it
	doesn't overwrite the grub/syslinux message before it.

2007-01-05  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot: Handle different python versions better

	* scripts/upd-instroot (PACKAGES): Add python-libs

2007-01-05  David Cantrell  <dcantrell@redhat.com>

	* loader2/modules.c (getModuleLocation): Log module path at debug
	level.

	* loader2/urls.c (urlMainSetupPanel): If the user specified http://
	or ftp:// on the site name, trim that before putting it in the ui
	structure (#220728).

	* loader2/net.c (doDhcp): If dhcpclass is empty, build one
	from uname() like 'Linux 2.6.18-1.2869.fc6 i686' (#220082).

	* isomd5sum/checkisomd5.c, libcheckisomd5.c: Patch from Ryan Finnie
	to add the --gauge option which outputs gauge values suitable for
	piping in to programs like dialog(1). (#220286)

	* isys/isys.c (doDhcpNetDevice): If dhcpclass is empty, build one
	from uname() like 'Linux 2.6.18-1.2869.fc6 i686' (#220082).

2007-01-04  Peter Jones <pjones@redhat.com>

	* lvm.py (vgremove): Seriously, "pvremove -ff -y"?  You gotta be
	kidding me.

2007-01-04  Chris Lumens  <clumens@redhat.com>

	* text.py (InstallInterface.drawFrame):  Don't use len so we clear the
	root window text even if it contains wide characters (#220905).

	* iw/lvm_dialog_gui.py:  Use %d instead of %g for LVM size display
	(#219414).
	* iw/partition_gui.py:  Likewise.

2007-01-04  Peter Jones <pjones@redhat.com>

	* iutil.py (mkdirChain): Don't log an error just because we're making
	a directory that already exists.

2007-01-04  Jeremy Katz  <katzj@redhat.com>

	* loader2/modules.c (scsiDiskCount): Include cdroms in the count

	* iw/task_gui.py (TaskWindow.getScreen): Translate 
	description (#216067)

2007-01-03  Jeremy Katz  <katzj@redhat.com>

	* textw/partition_text.py (PartitionWindow.editLVRequest): Don't
	traceback if they neglect to enter an lvsize (#221253)

2006-12-18  David Cantrell  <dcantrell@redhat.com>

	* loader2/module-info: Added stex driver since that was added in the
	RHEL-5 tree.  Added pata_mpc52xx (#220009).

	* isys/isys.c (doDhcpNetDevice): Honor dhcpclass param (#220057).
	* loader2/net.c: Likewise.

2006-12-17  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-12-15  Chris Lumens  <clumens@redhat.com>

	* anaconda (runVNC):  Don't need ot be so clever now that execConsole
	uses subprocess.

	* iutil.py (execConsole):  Don't use all the complication of
	execWithRedirect so shells end up where they're supposed to be
	(#210481, #216155).

2006-12-15  David Cantrell  <dcantrell@redhat.com>

	* partedUtils.py: self.anaconda.intf -> intf

2006-12-15  David Cantrell  <dcantrell@redhat.com>

	* fsset.py: This file is fsset.py, not fstab.py.

	* partedUtils.py (DiskSet): Handle instantiation from LabelFactory where
	we will be handed no anaconda object reference (#219789).

2006-12-15  Jeremy Katz  <katzj@redhat.com>

	* isys/wireless.c (get_wreq): Build fix for new kernel headers

2006-12-14  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* isys/isys.c (doRaidStart): Raid autorun is dead, fix the build
	for now.  md is going to be broken until we move to mdadm

	* anaconda.spec: Bump version.

2006-12-14  David Cantrell  <dcantrell@redhat.com>

	* iw/autopart_type.py (PartitionTypeWindow): Break if rc does not
	equal gtk.RESPONSE_APPLY, fixes problem where users cannot add
	zFCP devices in the gui (#210635).

2006-12-14  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Make device nodes here instead of in runRescue so
	cachedDrives isn't empty.
	* rescue.py (runRescue):  Likewise.

2006-12-13  David Cantrell  <dcantrell@redhat.com>

	* partedUtils.py (DiskSet.openDevices): Don't always dasdfmt on zSeries,
	only do that for disks that are flagged to be cleared or if the init
	all flag is set.

	* upgrade.py (findExistingRoots): Do not pass anaconda object reference
	to findExistingRootPartitions().

	* iw/autopart_type.py (PartitionTypeWindow): Do not pass intf to
	checkNoDisks().
	* textw/partition_text.py: Likewise.

2006-12-13  David Cantrell  <dcantrell@redhat.com>

	* partedUtils.py (DiskSet): Pass self.anaconda.intf to checkDiskLabel.

2006-12-13  Jeremy Katz  <katzj@redhat.com>

	* loader2/devices.h: Official xvc0 major/minor

2006-12-13  David Cantrell  <dcantrell@redhat.com>

	* anaconda (__main__): Pass reference to anaconda object to InstallData.

	* fsset.py (readFstab): Take reference to anaconda object rather than
	a path and intf.  Pass anaconda reference to DiskSet().
	* fssey.py (__main__): Removed.

	* installclass.py (BaseInstallClass): Pass anaconda reference to the
	reset() method for InstallData.

	* instdata.py (InstallData.reset): Take anaconda object reference as
	parameter.  Pass anaconda to DiskSet().
	* instdata.py (InstallData.__init__): Take anaconda object ref as
	parameter, pass it to reset() method.

	* kickstart.py (AnacondaKSHandlers): Store anaconda object reference,
	pass to DiskSet() object creations.

	* partedUtils.py (DiskSet): Take anaconda object reference, store.  Use
	self.anaconda throughout DiskSet object, remove individual pass-ins
	of intf and other anaconda object parts.
	* partedUtils.py (DiskSet.dastFmt): Remove -P dasdfmt(8) arg (#218861).
	* partedUtils.py (DiskSet.openDevices): Remove intf, initAll, zeroMbr,
	and clearDevs params since those are in the anaconda object.  When a
	kickstart install is running, the dasd found is in the clearpart list,
	and the --initlabel option has been used, skip the interactive dialog
	asking if you want to format the DASD and just do it (#218861).

	* partitioning.py (partitionObjectsInitialize): Removed arguments since
	the anaconda object provides those now.

	* upgrade.py (mountRootPartition): Pass anaconda object ref to DiskSet.
	Only pass anaconda ref to readFstab().
	* upgrade.py (upgradeMountFilesystems): Likewise.

2006-12-13  Jeremy Katz  <katzj@redhat.com>

	From Elliot Peele <elliot@rpath.com>
	* backend.py (AnacondaBackend.getRequiredMedia): Abstract into the
	backend 
	* yuminstall.py (YumBackend.getRequiredMedia): Add implementation
	* image.py (presentRequiredMediaMessage): Use the backend method

2006-12-13  Jeremy Katz  <katzj@redhat.com>

	* scripts/splittree.py (Timber.splitSRPMS): Fix overflow of source
	CD (Dawei Pang <dwpang@redflag-linux.com>)

2006-12-12  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.py (doProbeBiosDisks): EDD should work on x86_64 (#218123)

2006-12-12  David Cantrell  <dcantrell@redhat.com>

	* ui/netpostconfig.glade: Defines the Edit Network Device window used
	in the stage 2 part of anaconda.

	* loader2/net.c (writeNetInfo): Write out IPv6 settings.

	* network.py (Network): Move the useIPv4 and useIPv6 flags to be per
	device rather than per system.

	* iw/network_gui.py: Removed old code in editDevice(), replaced with
	NetworkDeviceEditWindow class.  Removed the awful mess of input
	validation code I had since the new dialog box handles all of that.
	Support independent IPv4 and IPv6 stack configuration per device and
	offer IPv6 automatic neighbor discovery in addition to DHCPv6 and
	static configuration (#213110, #213112).

2006-12-11  Jeremy Katz  <katzj@redhat.com>

	* iscsi.py (has_iscsi): Fix typo (#218513)

2006-12-08  Dave Lehman  <dlehman@redhat.com>

	* urlinstall.py: unmount cdrom after installation when using
	local stage2 with http install

2006-12-08  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Don't need to remove things in /tmp.

	* kickstart.py (Kickstart.postAction):  Remove LIBUSER_CONF from the
	environment before running %post scripts (#218213).

2006-12-07  Jeremy Katz  <katzj@redhat.com>

	* textw/partition_text.py (PartitionTypeWindow.addDriveDialog):
	Don't traceback if we don't have iscsi (#218513)

	* scripts/upd-instroot (KEEPFILE): Add etree location for celement
	tree in python 2.5, drop libxml2-python since it's not used any more

	* Makefile.inc (PYTHON): Be more flexible about handling of python
	version 

2006-12-05  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2006-12-04  Chris Lumens  <clumens@redhat.com>

	* docs/command-line.txt:  Describe nokill option (#218412).

2006-12-01  Chris Lumens  <clumens@redhat.com>

	* fsset.py (FileSystemSet.add):  Make sure / is mounted before /boot
	(#217292).

	* partedUtils.py (DiskSet.getLabels):  Scan for labels on logical
	volumes during upgrades (#217191).

	* urlinstall.py (UrlInstallMethod.__copyFileToTemp):  Fix traceback
	that was hiding a real error.

	* iw/lvm_dialog_gui.py (VolumeGroupEditor.run):  Remove unused code.
	Make sure to copy volume group format attribute to the new request
	(#217585).
	* iw/partition_gui.py (PartitionWindow.makeLvmCB):  Default new volume
	group requests to formatted.

2006-11-30  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-11-30  Chris Lumens  <clumens@redhat.com>

	* installclass.py (BaseInstallClass.setVideoCard):  Don't look for the
	non-existant list of drivers in rhpxl anymore (#217890).

2006-11-28  David Cantrell  <dcantrell@redhat.com>

	* isys/wireless.c (set_essid, get_essid): Init wreq struct before
	use (#215367).

	* iw/network_gui.py (NetworkWindow): Only compute and set broadcast
	and network addresses if IPv4 is enabled (#215451).
	* textw/network_text.py (NetworkDeviceWindow): Likewise.

2006-11-28  Chris Lumens  <clumens@redhat.com>

	* iw/language_gui.py (LanguageWindow.getNext):  If we changed
	languages, fetch a new release notes file (#217501).

2006-11-28  Jeremy Katz  <katzj@redhat.com>

	* lang-table: Add Iloko (#215644)
	Fix sinhala timezone (#217288)

2006-11-27  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* users.py (Users.createUser):  Set the right home directory so it
	gets made correctly (#216681).

	* scripts/upd-instroot:  Keep xinf files on text installs.  Also,
	XFree86 no longer exists.

2006-11-21  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-11-21  Peter Jones <pjones@redhat.com>

	* urlinstall.py (UrlInstallMethod.__checkUrlForIsoMounts): Use
	the presence of .discinfo files to determine if a CD tree exists,
	rather than a constant limit (#214787).

2006-11-21  Chris Lumens  <clumens@redhat.com>

	* loader2/cdinstall.c, loader2/hdinstall.c:  Update comments.
	* loader2/kickstart.c (getKickstartFile):  If there's an error
	getting the kickstart file, display an error message that allows the
	user to select a new location (#216446).

2006-11-20  Paul Nasrat <pnasrat@redhat.com>

	* iscsi.py: Nodes property typo (#216410)

2006-11-17  Chris Lumens  <clumens@redhat.com>

	* textw/partition_text.py (PartitionWindow.editRaidRequest):  Set the
	RAID minor number on new RAID requests (#215231).

2006-11-17  Jeremy Katz  <katzj@redhat.com>

	* iscsi.py (has_iscsi): Add a method so that we can find out if
	iscsi is really available (#216128)
	* iw/autopart_type.py (PartitionTypeWindow.addDrive): And don't
	allow trying to add iscsi drives if we don't have iscsi stuff.
	* textw/partition_text.py: Likewise.

2006-11-16  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.kernelVersionList): With kernel not
	being UP, calling it -up doesn't make sense anymore (#215746)
	* bootloader.py: Likewise.

2006-11-16  Peter Jones <pjones@redhat.com>

	* iscsi.py (_getPortal): Treat the results of "iscsiadm -m node -p
	$portal" as a hash rather than a list, and activate/login/logout of
	the entire list, not just the first one we find.

2006-11-15  Paul Nasrat <pnasrat@redhat.com>

	* scripts/pkgorder: Depsolve on optional/non-grouped packages so sort
	works correctly (#214848)

2006-11-14  Chris Lumens  <clumens@redhat.com>

	* xsetup (XSetup.writeKS):  Typo.

	* docs/kickstart-docs.txt:  Update documentation for current options
	and commands.

2006-11-13  Chris Lumens  <clumens@redhat.com>

	* xsetup.py (XSetup.writeKS):  We don't usually want to write out the
	xconfig and monitor lines into the kickstart file, unless that info
	was already given during a kickstart install (#211977).

	* docs/kickstart-docs.txt:  Document --nobase argument.

2006-11-10  Paul Nasrat <pnasrat@redhat.com>

	* fsset.py: Fix typo (#215232)

2006-11-10  Chris Lumens  <clumens@redhat.com>

	* bootloader.py (bootloaderSetupChoices):  If the kickstart file
	specified a drive order, pass that to booty (#214881).

	* dispatch.py (installSteps):  Reverse order of postaction and
	methodcomplete so source is unmounted on image installs before
	kickstart %post scripts are run (#214677).

2006-11-08  Peter Jones  <pjones@redhat.com>

	* isys/isys.c (doGetBiosDisk): Check return value of getBiosDisk and
	return None when appropriate. (#214653)

	* isys/isys.py (doGetBiosDisk): return None if we're not on x86.

2006-11-08  Jeremy Katz  <katzj@redhat.com>

	* scripts/splittree.py: Don't fail with non-rpms in the 
	directory; don't link rpms multiple times (jkeating)
	(usage): Untabify

2006-11-08  Chris Lumens  <clumens@redhat.com>

	* fsset.py (FileSystemSet.add):  Add entries in sorted order.  Make
	sure the sort order takes into account bind mount points and the
	"devices" being mounted in that case (#212270).

	* kickstart.py (Kickstart.setSteps):  Always skip the networking step
	on kickstart installs (#214584).

2006-11-07  David Cantrell  <dcantrell@redhat.com>

	* loader2/loader.c (parseCmdLineIpv6): Added function to parse a new
	ipv6= command line argument.  You can pass dhcp or auto to select
	the IPv6 configuration method for install.  No support for passing
	the IPv6 address via this option (yet).

	* loader2/loader.c (parseCmdLineFlags): Call parseCmdLineIpv6() for
	the ipv6= flag.

	* loader2/loader.h: Add ipv6 and ipv6info_set to loaderData_s.

	* loader2/net.c (setMethodSensitivity): Toggle function to handle
	IPv4 and IPv6 radio buttons in configureTCPIP() dialog.

	* loader2/net.c (v4MethodCallback): Toggle IPv4 radio buttons.
	* loader2/net.c (v6MethodCallback): Toggle IPv6 radio buttons.

	* loader2/net.c (getDnsServers): Reword and resize dialog box, bump
	size of input field to accomodate IPv6 address.

	* loader2/net.c (printLoaderDataIPINFO): Add lines to print the values
	of ipv6 and ipv6info_set.

	* loader2/net.c (setupNetworkDeviceConfig): Remove title from the
	winStatus() dialog that appears before doDhcp() is called.

	* loader2/net.c (readNetConfig): Combine UI flags in to the
	netconfopts structure. Set ipv4method and ipv6method in newCfg.

	* loader2/net.c (configureTCPIP): Remove previous checkboxes.  Have
	two checkboxes (for for IPv4 and one for IPv6).  Added radio buttons
	to let the user pick the configuration method per stack.  Let the
	user configure stacks independently and offer automatic neighbor
	discovery for IPv6 as well as DHCP and manual (#213108, #213112).

	* loader2/net.c (manualNetConfig): Check for more than just IPv4
	or IPv6 being selected to enable input fields.  Check for that and
	the ipv4method and ipv6method.

	* loader2/net.c (doDhcp): Set DHCP_Preference based on noipv4,
	noipv6, ipv4method, and ipv6method.  Add DHCPv6_DISABLE_RESOLVER
	and DHCPv4_DISABLE_HOSTNAME_SET to the preference flags.

	* loader2/net.h: Add strings, enums, structs, and prototype fixes
	related to the changes above.

2006-11-07  Peter Jones  <pjones@redhat.com>

	* dmraid.py (startAllRaid):  If we get an exception activating a raid,
	log the error and the table and ignore the raid.

2006-11-07  Chris Lumens  <clumens@redhat.com>

	* docs/install-methods.txt:  Updated (#214159).

2006-11-06  David Cantrell  <dcantrell@redhat.com>

	* isys/str.c: Added str2case() to handle str2upper() and str2lower().
	* isys/str.h: Prototype changes.

2006-11-06  Jeremy Katz  <katzj@redhat.com>

	* iw/netconfig_dialog.py (NetworkConfigurator._ok): Use
	gui.MessageWindow instead as it has the API we want (#213356)

2006-11-06  Chris Lumens  <clumens@redhat.com>

	* autopart.py (doClearPartAction):  Avoid a traceback when we see PReP
	partitions on disks that aren't being used (#211098).
	(doAutoPartition):  Fix traceback when all space is in use (ddearauj
	AT us.ibm.com, #213616).

	* isomd5sum/implantisomd5.c (main):  Fix output formatting (#214046).

2006-11-06  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.getBestKernelByArch): Remove hacky
	'linux xen0' bits; you can select the virt group sanely now

2006-11-03  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Add badEDID function to check the X log to see if we were
	lied to about the monitor, probably because there's a KVM involved.
	If so, fall back to text mode.

2006-11-03  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py: Use disc url and split media style install for
	ftp/http loopback mount setups (#212014)
	* urlinstall.py: Use switchMedia to change baseUrls for ftp/http
	loopback mount installs

2006-11-02  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-11-01  David Cantrell  <dcantrell@redhat.com>

	* isys/dns.c (doQuery): Expand to support IPv6 AAAA and ip6.arpa
	records.
	* isys/dns.c (mygethostbyaddr): Add family parameter, rewrite
	in-addr.arpa construction, add ip6.arpa construction.
	* isys/dns.c (mygethostbyname): Add family parameter, pass T_A or
	T_AAAA depending on address family.
	* isys/dns.c (main): Everyone likes test functions.
	* isys/dns.h: Update prototypes.

	* isys/nfsmount.c: Pass AF_INET to mygethostbyname() calls.

	* loader2/ftp.c (getHostAddress): Pass AF_INET to mygethostbyname().
	* loader2/ftp.c (ftpOpen, find_header): Check return value of asprintf.

	* loader2/loader.c (parseCmdLineFlags): Check return value of asprintf.

	* loader2/net.c (manualNetConfig): Catch asprintf() return values.
	* loader2/net.c (findHostAndDomain): Pass address family to
	mygethostbyaddr().

	* loader2/urls.c (urlinstStartTransfer): Pass AF_INET to
	mygethostbyname().
	* loader2/urls.c (urlMainSetupPanel): Check return value of asprintf().

2006-11-01  Chris Lumens  <clumens@redhat.com>

	* ui/anaconda.glade:  Center anaconda window again (#213350).

	* iw/lvm_dialog_gui.py (VolumeGroupEditor.createPEOptionMenu):  Always
	set an active value on the peCombo, and don't traceback if the default
	value is the first one in the list (#212317).

	* autopart.py (doClearPartAction):  Don't try to clear drives that are
	in the skippedList either.

	* yuminstall.py (YumBackend.mirrorFailureCB):  Fix typo.

2006-11-01  Paul Nasrat <pnasrat@redhat.com>

	* backend.py (AnacondaBackend.getDefaultGroups): Signature change to
	take an anaconda
	* yuminstall.py (YumBackend.getDefaultGroups): Get the language list
	from install data to fix text mode (#212511)
	* installclasses/fedora.py (InstallClass.setGroupSelection): Pass
	anaconda object to getDefaultGroups
	* installclasses/rhel.py (InstallClass.setGroupSelection): ditto

2006-10-31  Chris Lumens  <clumens@redhat.com>

	* loader2/kickstart.c (getHostandPath):  The slash should be the first
	character of file, not the last character of host.
	* loader2/urlinstall.c:  Fewer slashes in URL output.

	* loader2/net.c (splitHostname):  Add a function to split
	hostname/port number pairs up that takes IPv6 numeric addresses into
	account.
	* loader2/net.h:  Add prototype for splitHostname.  Include newt.h.

	* loader2/ftp.c (httpGetFileDesc):  If we're not passed a port, use
	the default.
	(getHostAddress):  Use splitHostname so we don't attempt to
	gethostbyname on a string containing a port number (#212622).
	* loader2/urls.c (urlinstStartTransfer):  Likewise.

	* urlinstall.py (UrlInstallMethod.__checkUrlForIsoMounts):  Set
	self.splitmethod if it's a split ISO method, as this seems to decrease
	the number of retry errors.

2006-10-30  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILEGR): Add more fonts (#207428)

2006-10-28  David Cantrell  <dcantrell@redhat.com>

	* network.py (Network): Add missing \n to localhost6 line (#210050)

2006-10-27  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py:  Disable keepalive since it seems to be broken and
	leaking file descriptors (#212571).

2006-10-26  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (AnacondaKSHandlers.doClearPart):  Catch hard drives
	that do not exist (#212377).

	* lang-table:  Fix typo (#212304).

2006-10-25  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (YumBackend.mirrorFailureCB):  Don't completely fail
	after trying just the first mirror (#208077, #212014).

2006-10-25  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.py (driveDict): Fix potential case where we could have
	a leaked file descripter (#212191)

	* zfcp.py (ZFCP.write): Include zfcp in modprobe.conf so that zfcp
	luns come up post-install (#210094)

2006-10-24  Bill Nottingham  <notting@redhat.com>

	* iw/netconfig_dialog.py: Use the same widget names as the glade
	file.

2006-10-23  Chris Lumens  <clumens@redhat.com>

	* loader2/net.c (setKickstartNetwork):  Bring up the network when the
	network command in a kickstart file is processed for CD and hard drive
	image installs (#191424).

2006-10-23  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Require libdhcp-1.16 or higher (#201907)

	* network.py (Network): Write out ::1 in /etc/hosts as localhost6
	rather than localhost (#211800).

2006-10-23  Jeremy Katz  <katzj@redhat.com>

	* lang-table: Add Sinhala (#207426)
	* scripts/upd-instroot (PACKAGESGR): And the font

2006-10-23  Paul Nasrat <pnasrat@redhat.com>

	* iutil.py (execWithConsole): Fix traceback (#211830)

2006-10-20  David Cantrell  <dcantrell@redhat.com>

	* loader2/loader.c (readNetInfo): Continue if vname or vparm are NULL
	(#211502).

2006-10-20  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (PACKAGESGR): Add fonts-telugu (#207428)

	* iw/progress_gui.py (InstallProgressWindow.getScreen): Not quite
	so big (#211526)

2006-10-19  Jeremy Katz  <katzj@redhat.com>

	* isys/nl.c: We only ever do anything with ethernet (#210195)

2006-10-19  Paul Nasrat <pnasrat@redhat.com>

	* upgrade.py (upgradeMountFilesystems): Force swap formatting on ppc
	(#206523)

	* fsset.py (FileSystemSet.formatSwap): Support forcing swap to be
	formatted

2006-10-19  Chris Lumens  <clumens@redhat.com>

	* iw/partition_gui.py (PartitionWindow.getPrev):  Forget partitioning
	changes when going back to the parttype screen (#211255).
	* textw/partition_text.py (PartitionWindow.__call__):  Likewise.

	* iutil.py (execConsole):  Don't specify a stdout or stderr for shells
	on s390 (#210481).

	* anaconda (runVNC):  Use execConsole.
	* rescue.py (runShell):  Likewise.
	* text.py (spawShell):  Likewise.

	* gui.py (titleBarMousePressCB, titleBarMotionEventCB):  When dragging
	a dialog box, don't jerk to the side starting off (krh AT redhat.com).

2006-10-18  David Cantrell  <dcantrell@redhat.com>

	* anaconda (parseOptions): Add the --noipv4 and --noipv6 opts (#208334).
	* anaconda (__main__): Set flags.useIPv4 and flags.useIPv6 to false if
	we receive one of the --noipv{4,6} options (#208334).

	* flags.py (Flags): Add useIPv4 and useIPv6 flags, default to
	True (#208334).

	* network.py (Network): Initialize self.useIPv4 and self.useIPv6 to
	flags.useIPv4 and flags.useIPv6 (#208334).

	* loader2/loader.c (doLoaderMain): After readNetConfig() call, set the
	noipv4 and noipv6 flags in loaderData (#208334).
	* loader2/loader.c (main): If noipv4 or noipv6 flag is set in the
	loaderData, add option to pass to anaconda (#208334).

	* loader2/net.c (readNetConfig): Set noipv4 and noipv6 flags in newCfg
	after configureTCPIP() call (#208334).
	* loader2/net.c (readNetConfig): After dialog window closes, copy the
	noipv4 and noipv6 flags from newCfg to cfg (#208334).

2006-10-18  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (AnacondaKSHandlers.doPartition):  Correct --onbiosdisk
	handling (#210705).

	* yuminstall.py (YumBackend.doPostInstall):  Keep runlevel 3 if doing
	a VNC install (#211318).

2006-10-18  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (AnacondaYumRepo.__get): Fix retries (#211117)
	
	* stubs/unicode-lite.c: Hack so that we don't try to use unicode
	line drawing chars on vt100-nav terminals.  (#208374)

2006-10-17  David Cantrell  <dcantrell@redhat.com>

	* loader2/loader.c (readNetInfo): Rewrote the /tmp/netinfo parser so we
	get loaderData populated with valid strings for inet_pton (#207991).

	* loader2/net.c (printLoaderDataIPINFO): Wrap debugging output in pipes
	so we can more easily see when space characters are present.

	* loader2/net.c (setupNetworkDeviceConfig): If the IP information in
	loaderData is invalid, set isDynamic flag to 0.

	* loader2/net.c (kickstartNetworkUp): Remove isDynamic initialization.

2006-10-17  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py: Fix up for failure on __get (#211117)

2006-10-16  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.doGroupSetup): Fix up for
	virtualization being the group instead of xen

	* zfcp.py (ZFCPDevice.offlineDevice): Fix a few stupid bugs
	(ZFCP.startup): Move config reading to here so that we don't have
	problems with bringing up devs more than once (#210094)
	(ZFCP.write): Better way of writing out zfcp.conf
	(ZFCP.writeKS): Write out in anaconda-ks.cfg

	* iscsi.py (writeKS): Support writing out iscsi bits to
	anaconda-ks.cfg 

	* loader2/modules.c (lateModuleSort: Add qla2400 and qla2xxx to
	late sort by request (#210886)

2006-10-16  Chris Lumens  <clumens@redhat.com>

	* loader2/urls.c (urlinstStartTransfer):  Fix bad info message.

	* urlinstall.py (UrlInstallMethod.__checkUrlForIsoMounts):  Use a
	better regex for finding ISO loopback mount points (#205133).

	* installclasses/rhel.py (InstallClass.getPackagePaths):  Set up
	baseUrl for yum correctly if the method is passed a list of URLs
	(#210877).

2006-10-13  Jeremy Katz  <katzj@redhat.com>

	* iw/progress_gui.py (InstallProgressWindow.getScreen): Take up
	more of the space (#210531)

2006-10-12  David Cantrell  <dcantrell@redhat.com>

	* textw/network_text.py (NetworkDeviceWindow): Set IPv6 entry box
	sensitivity correctly.  Fixes bizarre UI problems where unchecking
	DHCP and IPv6 would leave all the input boxes active.

2006-10-12  Chris Lumens  <clumens@redhat.com>

	* iutil.py (swapSuggestion):  Tweak min/max swap numbers for the low
	memory case (#189490).

2006-10-12  David Cantrell  <dcantrell@redhat.com>

	* textw/network_text.py (handleMissingOptionalIP): Added from the
	iw netconfig screen.

	* textw/network_text.py (NetworkGlobalWindow): If gateway or primary
	DNS are missing, warn user via handleMissingOptionalIP() and continue.
	Just pass if secondary DNS is missing.  This is consistent with the
	iw interface.

	* network.py (Network): If not has key BOOTPROTO, s'il vous plat.
	I like double negatives.  I'm not not licking toads.

2006-10-11  Peter Jones  <pjones@redhat.com>

	* anaconda (__main__): Only do auditDaemon if we're not in test or
	rootpath mode.

	* isys/auditd.c (audit_daemonize): Don't start a new process group,
	and do "exit(0)" rather than "return" after recieving SIGTERM.

2006-10-11  Chris Lumens  <clumens@redhat.com>

	* ui/tasksel.glade:  Fix layout in case where the extra repo selection
	box is not displayed.

2006-10-11  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py (AnacondaYumRepo.getHeader): Ignore basepath 

2006-10-11  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (AnacondaYumRepo.__headersListFromDict):  Added because
	it's needed by __get additions from yesterday.

2006-10-10  Jeremy Katz  <katzj@redhat.com>

	* lang-table: Add Telugu (#207428)

	* isys/eddsupport.c: Update from Rez Kabir AT dell to support
	specifying bios drive as long as a drive matches the signature and
	to fix problems with medium-less devices (#207331)

	* iw/autopart_type.py (PartitionTypeWindow.addDrive): Fix another
	traceback with the allowed drive stuff.

2006-10-10  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py (AnacondaYumRepo.__get):  Fix for yum api
	change supporting basepath that we use for split media hinting.

2006-10-10  Chris Lumens  <clumens@redhat.com>

	* language.py (Language.setRuntimeLanguage):  Allow setting the system
	language to something other than what's in lang-table, as the
	kickstart documentation says is allowed (#176538).

	* iw/bootloader_main_gui.py (MainBootloaderWindow.getScreen):  Fix UI
	flow traceback (#210190).

2006-10-09  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* network.py (Network.__init__): Default ipv4 and ipv6 to being
	enabled so that we get network devices enabled postinstall on CD
	installs 

2006-10-09  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py (AnacondaYumRepo.getPackage):  Fix for yum api
	change supporting basepath that we use for split media hinting.

2006-10-09  Chris Lumens  <clumens@redhat.com>

	* network.py (Network.lookupHostname):  Fix traceback on looking up
	hostnames (#209672).

2006-10-09  Jeremy Katz  <katzj@redhat.com>

	* iw/task_gui.py (TaskWindow.getNext): Only determine repos if
	we're showing them (#209997)

2006-10-06  Jeremy Katz  <katzj@redhat.com>

	* packages.py (setFileCons): Few more restorecons for iscsi + selinux

2006-10-06  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* iscsi.py (iscsiTarget._getPortal): If the portal doesn't match
	the ipaddr we discovered against, it's probably not what we wanted
	(iscsi.write): Files moved.

2006-10-06  David Cantrell  <dcantrell@redhat.com>

	* network.py (sanityCheckIPString): Change two >1 to >0 so that IP
	addresses that look like 9.3.117.236 are validated (#209654).

2006-10-06  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* yuminstall.py (YumSorter.tsCheck): Fix case where we could spin
	endlessly in dep checking (#209665)

2006-10-05  Chris Lumens  <clumens@redhat.com>

	* anaconda (parseOptions):  --usefbx is really just a special case of
	--xdriver.

2006-10-05  Paul Nasrat <pnasrat@redhat.com>

	* urlinstall.py: Fix traceback with loopback isos

2006-10-05  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* yuminstall.py (AnacondaYumRepo.__init__): Adjust for yum API cleanup

2006-10-04  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: Not having a locale archive actually seems
	to fix sr_CS.UTF-8@Latn and doesn't actually take more space (#182591)

	* yuminstall.py (YumBackend.checkSupportedUpgrade): Fix traceback
	going back (#205198)

	* installclasses/rhel.py (InstallClass.handleRegKey): Nuke D as
	it's been merged 

2006-10-04  David Cantrell  <dcantrell@redhat.com>

	* iw/release_notes.py (ReleaseNotesViewer): Disable request_url,
	link_clicked, and request_object callbacks for now because they
	don't work quite right and it's better to be able to view just
	the release notes than nothing at all.

	* network.py (sanityCheckIPString): Test IP more accurately to
	determine address family.  Clean up error messages to make things
	more clear.  Have a catch-all else case that returns the given
	IP address in an invalid message in the form of an IPError
	exception.

	* iw/network_gui.py (NetworkWindow.handleIPError): Display the
	field description in the title bar rather than the field name.
	Call __str__() on the msg parameter since msg could be an IPError
	exception or a string.

	* iw/network_gui.py (NetworkWindow): Set the IPv6 address entry
	field to just the address portion of the value that's written
	out to the ifcfg-ethX file (remove the /prefix part).  Make sure
	we set the ipv6prefix in the entrys hash and write out a new
	ipv6addr with the new prefix in case the user changed it.

	* textw/network_text.py (handleIPError): Same change as for
	iw/network_gui.py (NetworkWindow.handleIPError) above.

	* textw/network_text.py (handleIPMissing): Remove the double
	quotes around the field description.

	* textw/network_text.py (NetworkDeviceWindow): Same change as for
	iw/network_gui.py (NetworkWindow) above.  Added missing closing
	paren in an Invalid Prefix error dialog.  Set checkbox initial
	checkbox values correctly.

2006-10-04  Jeremy Katz  <katzj@redhat.com>

	* lang-table: Add Assamese (#207424)

	* textw/grpselect_text.py (GroupSelectionWindow.__call__): Fix
	details to match up (#209310)

2006-10-03  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-10-03  David Cantrell  <dcantrell@redhat.com>

	* iw/network_gui.py (NetworkWindow): Set initial input widget
	sensitivity based on checkbox values (prevents IPv6 entry boxes as
	active when the IPv6 box is unchecked).  Fixed a type in an error
	message.

2006-10-03  David Cantrell  <dcantrell@redhat.com>

	* isys/isys.py (inet_calcNetBroad): Umm, use ntohl() so it works on all
	platforms.

	* iw/network_gui.py (NetworkWindow.handleBroadCastError): Tell users
	the IPv4 information given is invalid, since this error message will
	occur when calculating the network and broadcast address using the
	IPv4 ip address and netmask.

	* textw/network_text.py (handleBroadCastError): Add missing error
	handling function for network and broadcast address calculation.

2006-10-03  Chris Lumens  <clumens@redhat.com>

	* autopart.py (doAutoPartition):  Reset protected partitions list when
	there are problems partitioning (#204405).

2006-10-03  David Cantrell  <dcantrell@redhat.com>

	* iw/network_gui.py (NetworkWindow): Use isys.netmask2prefix() and
	isys.prefix2netmask() correctly.

	* textw/network_text.py (NetworkDeviceWindow): Use isys.prefix2netmask()
	correctly.

	* isys/isys.c (doPrefixToNetmask): Renamed to a shorter function name
	and it somewhat matches what the isys.py passthrough is called.  We
	also take an int as the argument now and return a string.

	* isys/isys.py (netmask2prefix): Added this function to replace the
	borken inet_convertNetmaskToPrefix() function.

2006-10-02  Jeremy Katz  <katzj@redhat.com>

	* iscsi.py (iscsiTarget._getPortal): Handle another error 
	case (#208671)

2006-10-02  David Cantrell  <dcantrell@redhat.com>

	* loader2/nfsinstall.c (getFileFromNfs): Do not bring down network
	interface after fetching file (#201194).

	* loader2/urlinstall.c (getFileFromUrl): Do not bring down network
	interface after fetching file (#201194).

2006-10-02  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* scripts/pkgorder (usage): Use group ids -- the display name can
	(... and has) changed.  This should fix our # of cd problem (#206778)

	* yuminstall.py (YumSorter.tsCheck): Ensure that we do eventually
	depcheck on redhat-lsb (#201222)

	* scripts/upd-instroot: Attempt to fix up sr_CS.UTF-8@Latn (#182591)

2006-10-02  David Cantrell  <dcantrell@redhat.com>

	* isys/isys.py (inet_doConvertPrefixToNetmask): Removed since it does
	not work right.  Added prefix2netmask() passthrough to _isys.

	* isys/isys.c (doConvertPrefixToNetmask): When Python fails, use C.
	Added isys.prefix2netmask() for use in Python code to convert a CIDR
	prefix to a dotted-quad format netmask (#207845).

	* iw/network_gui.py (NetworkWindow): Use isys.prefix2netmask()

	* textw/network_text.py (NetworkDeviceWindow): Use isys.prefix2netmask()

2006-10-02  Chris Lumens  <clumens@redhat.com>

	* iw/partition_dialog_gui.py (PartitionEditor.__init__):  Pass
	updateSrc to createAllowedDrivesList (#208677).

	* iw/partition_gui.py:  Pass anaconda object to
	PartitionEditor.__init__.

	* loader2/urlinstall.c (getFileFromUrl):  Fix a misleading message.

2006-10-02  Jeremy Katz  <katzj@redhat.com>

	* loader2/lang.c: Fix handling of !latarcyrheb-sun16 console fonts
	which we don't have any way to display in anaconda right now (#208841)

	* raid.py (getRaidLevels): Ensure raid levels are sorted (#208478)

2006-10-01  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images (LVMMODS): Add dm-crypt (#208742)

2006-09-29  David Cantrell  <dcantrell@redhat.com>

	* textw/network_text.py (NetworkDeviceWindow): Display error message
	if user unchecks IPv4 and IPv6 support.

2006-09-29  David Cantrell  <dcantrell@redhat.com>

	* iw/network_gui.py (NetworkWindow): Removed duplicate handleIPError()
	function.  Wrap ipv6prefix input validation to catch exception where
	the user left the field blank (ValueError).

	* textw/network_text.py: Added descr hash.  Removed badIPDisplay().

	* textw/network_text.py: Added handleIPError() and handleIPMissing()
	which work in the same way as the functions of the same name in the
	iw interface, but they are modified to use ButtonChoiceWindow.

	* textw/network_text.py (NetworkDeviceWindow): Replace all instances
	of self.intf.messageWindow with ButtonChoiceWindow.  Call the
	handleIPError() and handleIPMissing() functions correctly.  Catch
	ipv6prefix entry errors when the user left the field blank.

	* textw/network_text.py (NetworkGlobalWindow): Rewrote input
	validation for gateway, primary DNS, and secondary DNS.  Use
	exceptions from network and handleIPError() and handleIPMissing()
	functions.

2006-09-29  David Cantrell  <dcantrell@redhat.com>

	* textw/network_text.py: Removed badIPDisplay() for now.  Removed
	sanityCheckIPString() because we can just use the one in network.

	* textw/network_text.py (NetworkDeviceWindow): Change instances of
	the boot variable to bootproto to make it more consistent with the
	iw interface code.  Unset BOOTPROTO if the user has selected a
	manual network configuration.  Use the value() method on the Entry
	boxes since get_text() is not available in snack.

	* textw/network_text.py (NetworkGlobalWindow): Increase size of
	entry boxes to 41 characters so they can hold IPv4 and IPv6
	addresses.  Removed third nameserver prompts.

2006-09-29  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Only set graphical display mode if VNC is enabled in
	kickstart, not just if it's a kickstart install.

2006-09-29  Jeremy Katz  <katzj@redhat.com>

	* iw/netconfig_dialog.py (NetworkConfigurator._ok): I can't type.

	* dmraid.py: Better exception handling for scanForMpath and
	scanForRaid -- disable mpath/raid if we get an exception, log it

2006-09-29  Peter Jones <pjones@redhat.com>

	* dmraid.py (scanForMPath): Use a private copy of block which loads
	only the "scsi" probe, wrap probing in one big tryblock, and clean up
	some unused variables (#208423).

	* anaconda.spec: require python-pyblock >= 0.24-1 (#208423, #208431,
	#208337)

2006-09-29  Jeremy Katz  <katzj@redhat.com>

	* iw/task_gui.py (TaskWindow._taskToggled): Only do netconfig for
	repo toggles (#208562)

	* yuminstall.py (YumBackend.writeConfiguration): Disable repo
	writeout -- there are some weird cases that we need to decide what
	to do with and right before FC6 isn't the time to do so

	* installclasses/fedora.py (InstallClass._get_description): Return
	the translated text as the description (#206620). 
	* iw/task_gui.py (TaskWindow._createTaskStore): Fix translations
	to show up (#206620)

	* ui/tasksel.glade: Force width wider so that things fit better

2006-09-29  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py (YumBackend.writeConfiguration): Re-enable repo
	writing with enabled line in

2006-09-28  David Cantrell  <dcantrell@redhat.com>

	* textw/network_text.py (NetworkDeviceWindow): Input validation code
	is there for the text mode manual net config UI, but it's still under
	debugging.

2006-09-28  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* yuminstall.py (YumBackend.writeConfiguration): Disable repo
	writing for now

2006-09-28  David Cantrell  <dcantrell@redhat.com>

	* textw/network_text.py: Space consistency changes.

2006-09-28  David Cantrell  <dcantrell@redhat.com>

	* textw/network_text.py (NetworkDeviceWindow): Widgets are in place
	in the text UI, so it now looks like the manual IP config UI in
	graphical stage 2.  Nothing is hooked up yet, it's just all placed
	on the screen.

2006-09-28  Chris Lumens  <clumens@redhat.com>

	* loader2/ftp.c (httpGetFileDesc):  Teach the loader about more HTTP
	redirect response codes.

	* anaconda (parseOptions):  Accept --updates option.

	* loader2/loader.c (loadUpdates):  Add device name to loaderData.
	(main):  Pass --updates to anaconda.

	* iw/autopart_type.py (PartitionTypeWindow.getScreen):  Pass updateSrc
	to partition UI helpers.
	* iw/partition_ui_helpers_gui.py (createAllowedDrivesStore):  Don't
	check the update image source by default.
	* text/partition_text.py (PartitionTypeWindow.__call__):  Likewise.

2006-09-28  Jeremy Katz  <katzj@redhat.com>

	* iw/netconfig_dialog.py (NetworkConfigurator._ok): Give an error
	message if the netconfig fails

	* image.py (presentRequiredMediaMessage): Don't say that cd #99 is
	needed 

	* iw/netconfig_dialog.py (NetworkConfigurator._ok): Write out a
	resolv.conf 

	* gui.py (addFrame): More making sure that things are shown.  Really.

2006-09-27  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/module-info: Add qla4xxx (#208324) and qla3xxx

	* fsset.py (xfsFileSystem.formatDevice): esandeen says we
	shouldn't need this (#208323)

2006-09-27  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Fix lowres parameter.

2006-09-27  Jeremy Katz  <katzj@redhat.com>

	* textw/partition_text.py (PartitionTypeWindow.__call__): Fix
	cases where we could traceback (#208101)

	* installclasses/rhel.py: Disable extra repos

	* iw/task_gui.py (TaskWindow.getScreen): Have to remove since we
	do a show_all on the vbox
	* ui/tasksel.glade: Fix a tyop

2006-09-26  David Cantrell  <dcantrell@redhat.com>

	* network.py (Network): UI isn't using it, so removed references to
	a third nameserver setting (which should be called tertiary NS, not
	ternary NS).

	* textw/network_text.py (NetworkDeviceWindow): First changes towards
	making this screen look like the new iw one.

2006-09-26  Jeremy Katz  <katzj@redhat.com>

	* textw/partition_text.py (PartitionTypeWindow.__call__): Fix the
	help line back

2006-09-25  Peter Jones  <pjones@redhat.com>

	* kickstart.py (AnacondaKSHandlers.doMultiPath): Fix invocation of
	pykickstart method to use the right name.
	
2006-09-25  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Set display_mode if the ksfile specifies a vnc install
	(#204736).

	* instdata.py (InstallData.reset):  Turn off firstboot on s390
	(#207926).

2006-09-25  Paul Nasrat <pnasrat@redhat.com>

	* urlinstall.py: Attempt to support loopback url mounts (#207904)
	* yuminstall.py: Support methods with multiple baseurls
	* constants.py: Move maximum number of CDs to constants

2006-09-22  David Cantrell  <dcantrell@redhat.com>

	* iw/network_gui.py (NetworkWindow): Set DHCP checkbox to active using
	correct bootproto value.  Corrects a problem where you select DHCP and
	IPv6 but uncheck IPv4 and the edit dialog enables and disables the
	wrong widgets.

	* utils/geninitrdsz.c: Create initrd.size file with 0644 permissions
	(#197773).

2006-09-22  Bill Nottingham  <notting@redhat.com>

	* loader2/firewire.c: firewire devices never have ->device

2006-09-22  Jeremy Katz  <katzj@redhat.com>

	* partedUtils.py (DiskSet.findExistingRootPartitions): Don't give
	an error on partition mount errors (#201805)

	* textw/grpselect_text.py (GroupSelectionWindow.__call__): Give
	indication of no optional packages (#204242)

2006-09-21  Jeremy Katz  <katzj@redhat.com>

	* backend.py (AnacondaBackend.doInitialSetup): Add missing self
	(from Elliot Peele <elliot@rpath.com>)

2006-09-21  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version

	* iutil.py (writeRpmPlatform): Fix flags (#207594)

	* installclasses/rhel.py: Some text tweaks

	* packages.py (regKeyScreen): Fix silly none vs not (#207587)

	* partitioning.py (partitionObjectsInitialize): Don't call check
	no disks here (#207471)
	* textw/partition_text.py (PartitionTypeWindow.__call__): And here
	* iw/autopart_type.py (PartitionTypeWindow.getNext): Check for no
	disks here
	* partedUtils.py (DiskSet.checkNoDisks): Don't exit, just return
	with an error code

	* scripts/mk-images.x86 (SYSLINUX): Fix bootdisk.img for x86_64

2006-09-20  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* installclass.py: Remove old zfcp stuff

	* textw/zfcp_text.py: Remove.
	* iw/zfcp_text.py: Remove.

	* kickstart.py (AnacondaKSHandlers.doZFCP): Handle multiple zfcp
	devs and adjust for new backend

	* loader2/loader.c: Change iscsi flag -> asknetwork.  Don't bail
	if we don't have find disk devices in the loader.
	* loader2/loader.h: Likewise.

	* textw/partition_text.py: Text mode support for iscsi and zfcp devices

	* iw/autopart_type.py (PartitionTypeWindow.addIscsiDrive): Adjust
	for new iscsi backend code.

	* kickstart.py (AnacondaKSHandlers.doIscsi): Better iscsi syntax.

	* iscsi.py: Improve support a bit so that we give a default
	initiator name, have the framework for handling
	usernames/passwords, and have cleaner code.

2006-09-20  Chris Lumens  <clumens@redhat.com>

	* language.py (Language.setDefault):  Don't write out "none" for
	SYSFONT.

2006-09-20  Jeremy Katz  <katzj@redhat.com>

	* syslogd.py (InstSyslog.start): Only exec syslogd if it exists

	* fsset.py (FileSystemSet.mkDevRoot): Don't create /dev/root if it
	already exists

	* anaconda (Anaconda.setMethod): Allow passing --targetarch
	(#206881)
	* flags.py (Flags.__init__): Set targetarch as a flag
	* iutil.py (writeRpmPlatform): Use flag

2006-09-20  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (manualNetConfig): Translation fix (#207069)

	* isys/isys.c (doDhcpNetDevice): Call pumpSetupInterface() after
	we call pumpDhcpClassRun() to bring the interface up.  NOTE: This
	function only does IPv4 stuff right now since the UI code needs
	changes before IPv6 can be worked in (#206192, #200109).

2006-09-20  Paul Nasrat <pnasrat@redhat.com>

	* upgrade.py: Format swap on ppc upgrades (#206523)

2006-09-19  Jeremy Katz  <katzj@redhat.com>

	* zfcp.py (ZFCPDevice.onlineDevice): Consolidate repeated code.
	(ZFCPDevice.offlineDevice): Likewise.

	* partitioning.py (partitionObjectsInitialize): Shutdown/startup
	zfcp devs here

	* yuminstall.py (YumBackend.doPreInstall): Remove spurious
	zfcp.conf copy

	* zfcp.py: Massive reworking to work better with new UI

	* ui/zfcp-config.glade: ZFCP config dialog
	* iw/autopart_type.py: Use zfcp config dialog (#204145)

	* installclass.py (BaseInstallClass.setSteps): Remove explicit
	zfcp step
	* dispatch.py (installSteps): Likewise.

2006-09-19  David Cantrell  <dcantrell@redhat.com>

	* isys/Makefile: Make nltest target depend on str.o.

	* loader2/net.c (manualNetConfig): Add description at the top of the
	manual network configuration dialog that explains what the input
	fields expect from the user.

	* network.py: Make sure we compare the lowercase version of bootproto
	because 'dhcp' does not equal 'DHCP'.

	* iw/network_gui.py: Add checkorder list so that input validation
	later makes sense to the user (order of error messages).

	* iw/network_gui.py: Compare bootproto in lowercase.

	* iw/network_gui.py (NetworkWindow.handleIPError): Add function to
	display IPError messages.

	* iw/network_gui.py (NetworkWindow): Add labels above the IP address
	and prefix columns.  Prevent users from unchecking IPv4 and IPv6;
	force user to choose at least one.  Use the checkorder list for input
	validation order.  Catch network.IPError exception.  Display the word
	'Disabled' in the main interface list if the user has disabled that
	protocol for the interface.

2006-09-19  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py: Fix upgrade traceback by using depends_on not
	relatedto

	* sortedtransaction.py: Only look up media for packages added to
	install (#206913)

2006-09-18  David Cantrell  <dcantrell@redhat.com>

	* network.py: Added the useIPv4 and useIPv6 flags to the Network class.
	These are used in the network configuration dialog boxes. Set based on
	existing network configuration, or initialize to true.

	* network.py: Read in IPV6_AUTOCONF variable from the network-script if
	it exists. We need this for the RFC 2462 auto configuration setting.

	* iw/network_gui.py: Set the IPv4 and IPv6 enable check boxes based on
	the useIPv4 and useIPv6 flags in the Network class.

	* iw/network_gui.py: Add column labels so users have an idea of what
	goes in the _____ / _____ entry boxes.

2006-09-18  David Cantrell  <dcantrell@redhat.com>

	* iw/network_gui.py: Correct input validation problems for manual
	network configuration (#206148, #206678, #206537).

2006-09-18  Chris Lumens  <clumens@redhat.com>

	* gui.py (findGladeFile):  Fix misleading error message.

	* loader2/module-info:  Remove hostap from initrd (#196334).

	* loader2/urlinstall.c:  Remove check for repodata/repomd.xml that
	doesn't understand the new RHEL tree layout (#205571, #206072).

2006-09-15  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* rescue.py (runRescue): Fix rescue mode for the early shell case

2006-09-15  Peter Jones  <pjones@redhat.com>

	* loader2/module-info: add ehea driver

2006-09-15  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images (PATH): Fix tyop (#206638)

2006-09-14  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-09-14  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images: Use -no-fragments to mksquashfs (#206472)

2006-09-14  Peter Jones  <pjones@redhat.com>

	* loader2/modules.c (scsiCount): make this function actually do what
	it's supposed to; also take a file name as input.

	* loader2/modules.c (dlLoadModules): do the file open/close of
	modprobe.conf in writeModulesConf, not here.

	* loader2/modules.c (writeModulesConf): make it remove the first
	"usb-storage" module it finds from modprobe.conf.  Also takes a
	filename on input.

2006-09-14  Jeremy Katz  <katzj@redhat.com>

	* loader2/driverdisk.c: Better checking for what driver disks
	really need now and erroring appropriately (#195899)

2006-09-14  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (YumBackend.doPostSelection):  Move progress window
	earlier so we have more immediate feedback when the "next" button is
	clicked in tasksel.

	* loader/ftp.c:  Break httpGetFileDesc up into helper functions to
	read and example HTTP headers and response codes.  Handle 301 Redirect
	by calling httpGetFileDesc again with the redirect location (#188198,
	#204488).

	* po/as.py, po/hy.po:  Fix build.

2006-09-13  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py (YumBackend.writeConfiguration): Support
	writing out repository configuration (#199468).

2006-09-12  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (AnacondaYum.run): Use magic value to sort
	additional repo packages to the end

	* sortedtransaction.py (SplitMediaTransactionData.__getMedia): Set
	a magic (non-zero) value for things not from media so that
	installing from additional repos will work (#205846)

	* iw/netconfig_dialog.py: Actually bring up the network
	appropriately, add some UI tweaks
	* ui/netconfig.glade: Center the dialog.  Hide ipv6 bits for now

	* iw/autopart_type.py (PartitionTypeWindow.addIscsiDrive): Support
	bringing up the network as needed.
	* iw/task_gui.py (TaskWindow._addRepo): Bring up the network as needed

	* isys/isys.c (doDhcpNetDevice): Rename to be dhcp instead of
	pump. Prefer DHCPv4 for now
	* isys/isys.py (dhcpNetDevice): Rename pumpNetDevice to this,
	leave pumpNetDevice stub 

	* isys/Makefile (nltest): Fix build of test program

	* gui.py (addFrame): Make it so that you can just show() the
	window instead of having to show_all -- this lets you have hidden
	widgets in a dialog that's been addFrame()'d

2006-09-12  Peter Jones  <pjones@redhat.com>

	* anaconda (parseOptions): change --vesa to --xdriver, and pass that
	to xserver.probeHW.

	* loader2/loader.c (parseCmdLineFlags): handle xdriver=, and make "vesa"
	use that instead.

2006-09-12  Chris Lumens  <clumens@redhat.com>

	* kickstart.py:  Display the group-selection step if there's no
	package section at all.  Fix up when group-selection should be
	displayed in other cases.

	* yuminstall.py (YumBackend.selectAnacondaNeeds):  We need rhpl as
	well (#204797).

2006-09-11  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (AnacondaKSHandlers.doLogicalVolume):  Check for grow
	before checking the size (#206039).

	* isys/isys.py (driveDict):  Skip attached devices without media
	present (like CF readers, etc.) (#205465).

2006-09-11  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.selectFSPackages): We want the
	packages if they're going to be used.... (#205865)

2006-09-11  David Cantrell  <dcantrell@redhat.com>

	* isys/nl.c: Only collect IPv4 and IPv6 addresses for IFF_RUNNING
	interfaces.

2006-09-11  David Cantrell  <dcantrell@redhat.com>

	* scripts/mk-images.s390: Use the size of the actual initrd.img for
	the value in initrd.size.

	* utils/Makefile: Only build and install geninitrdsz on zSeries.

2006-09-11  David Cantrell  <dcantrell@redhat.com>

	* utils/geninitrdsz.c: Added util to generate the initrd.size file
	needed on zSeries (#197773).

	* utils/Makefile: Compile geninitrdsz, install to anaconda-runtime.

	* scripts/mk-images: Define GENINITRDSZ command.

	* scripts/mk-images.s390: Generate initrd.size for each s390 tree
	build.

	* bootdisk/s390x/initrd.size: Removed.

2006-09-08  Peter Jones  <pjones@redhat.com>

	* anaconda.spec:  Bump version.

2006-09-08  Peter Jones  <pjones@redhat.com>

	* yuminstall.py (YumBackend.selectFSPackages): test mpList and dmList
	for truth, not None-ness

2006-09-08  Chris Lumens  <clumens@redhat.com>

	* exception.py (formatException):  Reverse the order of how tracebacks
	are printed in the UI so that the most recent call is listed first
	(#204817).

	* harddrive.py (HardDriveInstallMethod.getMethodUri):  Look for
	repodata where the CDs are mounted, not where they are stored.
	* image.py (NfsIsoInstallMethod.getMethodUri):  Likewise.

2006-09-07  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-09-07  David Cantrell  <dcantrell@redhat.com>

	* iw/release_notes.py: Fix problem where users cannot open the
	release notes dialog more than once (#203147).

2006-09-07  Chris Lumens  <clumens@redhat.com>

	* image.py (NfsIsoInstallMethod.__init__):  Call the superclass's
	__init__ method before we needs the variables it sets up.  This fixes
	NFS ISO installs.

	* packages.py (setFileCons):  Add another file.

2006-09-06  David Cantrell  <dcantrell@redhat.com>

	* iw/network_gui.py (NetworkWindow.editDevice): Fill input boxes
	with any existing network values we have.

2006-09-06  David Cantrell  <dcantrell@redhat.com>

	* isys/isys.py (inet_convertPrefixToNetmask): Take IPv4 CIDR prefix
	and convert to dotted-quad netmask notation.

	* iw/network_gui.py (NetworkWindow.editDevice): Allow user to enter
	CIDR prefix or dotted-quad netmask for IPv4 settings, validate the
	IPv4 and IPv6 prefix and make sure they fall within the required
	range, if user enters IPv4 CIDR prefix then convert to dotted-quad
	netmask for the sysconfig ifcfg-ethX file.

	* iw/network_gui.py (NetworkWindow.editDevice): Call get_text() to
	get the value of the ipv6prefix box rather than using an instance of
	a gtk.Entry() object.

	* iw/network_gui.py (NetworkWindow.getScreen): Set hostname, gateway,
	and DNS entry boxes to be 41 characters wide.

2006-09-06  David Cantrell  <dcantrell@redhat.com>

	* isys/isys.py: Remove inet_aton() and inet_ntoa(). Replaced calls
	to these functions with inet_pton() and inet_ntop().

	* isys/isys.py: Added inet_convertNetmaskToPrefix() utility function
	to convert dotted-quad IPv4 netmasks to CIDR prefix values.

	* iw/network_gui.py (createIPRepr): Renamed to createIPV4Repr() and
	have it write out ip/prefix rather than ip/netmask.

	* iw/network_gui.py (createIPV4Repr): Added to handle IPv6 write
	outs to the tree store.

	* iw/network_gui.py (NetworkWindow.editDevice): Add IPv6 info to
	the tree store.

	* iw/network_gui.py (NetworkWindow.setupDevices): Initialize tree
	store with IPv4 and IPv6 information.

2006-09-06  Chris Lumens  <clumens@redhat.com>

	* gui.py (takeScreenShot):  Fix indentation so screenshots work again
	(#204480).

	* yuminstall.py (YumBackend.doRepoSetup):  Iterate over enabled repos,
	instead of trusting yum to do that for us.  This allows giving the
	option of skipping incorrect repositories during kickstart (#204831).

	* scripts/upd-instroot:  Pull in all policy modules.

2006-09-06  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.getBestKernelByArch): Fix change that
	slipped in by accident
	(YumSorter._provideToPkg): Fix traceback (#205450)

	* loader2/module-info: Add hptiop (#205337)

2006-09-05  David Cantrell  <dcantrell@redhat.com>

	* iw/network_gui.py: Rewrite to handle manual IPv6 address entry
	along with the ever-popular IPv4 address entry.
	
2006-09-05  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/loader.c: Fix build on s390
	* po/as.po: Fix build

	* anaconda.spec: Bump version.

2006-09-05  Peter Jones   <pjones@redhat.com>

	* loader2/Makefile: Fix the build

2006-09-05  David Cantrell  <dcantrell@redhat.com>

	* exception.py (dumpException): Make sure trace is not None so we
	get tracebacks.

2006-09-05  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* iscsi.py: Update for new iscsi code

	* yuminstall.py (simpleCallback.callback): Fix for yum API changes

2006-09-05  Chris Lumens  <clumens@redhat.com>

	* packages.py (setFileCons):  Add more files to the list of things we
	need to fix the context on.

	* yuminstall.py (AnacondaYum.doConfigSetup):  Log when duplicate
	repositories are added instead of crashing.

2006-09-05  Jeremy Katz  <katzj@redhat.com>

	* iw/task_gui.py (TaskWindow.getScreen): Use text from the
	installclass if it exists
	* textw/task_text.py (TaskWindow.__call__): Likewise.

2006-09-04  Bill Nottingham  <notting@redhat.com>

	* scripts/upd-instroot: s/Clarius/Clearlooks/g

2006-09-01  Peter Jones  <pjones@redhat.com>

	* yuminstall.py (YumBackend.selectFSPackages): install dmraid not
	kpartx, now that dmraid has a kpartx dep.

2006-08-31  Peter Jones  <pjones@redhat.com>

	* anaconda.spec: Bump version.

	* yuminstall.py (YumBackend.selectFSPackages): install
	device-mapper-multipath if we're using multipath, and kpartx if we're
	using dmraid.

2006-08-30  Chris Lumens  <clumens@redhat.com>

	* iw/task_gui.py:  Add new repos to the installclass's list so they
	appear when going back to this screen.  Setup repos as soon as they
	are added to catch errors, but setup installclass default repos when
	next is clicked so they are ready for use.

2006-08-30  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/pkgorder (PackageOrderer.doLoggingSetup): Make logging a
	lot quieter.

	* gui.py (readImageFromFile): Fix the case where an image doesn't
	exist (#204648) 

2006-08-30  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* scripts/pkgorder (PackageOrderer.doFileLogSetup): Don't setup file
	logging for pkgorder

	* packages.py (setFileCons): Fix checking of chroot so file
	contexts get set properly

	* fsset.py: Fix setting context on mountpoints for real

	* iw/partition_ui_helpers_gui.py (WideCheckList.__init__): Expand
	the last column -- not all users of WideChecklist have 3 
	columns (#204631)

2006-08-29  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-08-29  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (YumBackend.doRepoSetup):  Don't do this step if we're
	going backwards.

	* iw/task_gui.py:  Display repo names, look up with repo ids.

2006-08-29  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c: Remember manual TCP/IP settings if user selects
	Back and then re-enters the TCP/IP entry dialog again (#202662)

	* gptsync/Makefile: Remove .depend in clean target.

2006-08-29  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images.ia64 (image): Fix ia64 pxeboot dir (#199274)

2006-08-29  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version

	* scripts/upd-initrd: Handle updating more than just /sbin/loader

2006-06-28  Bill Nottingham  <notting@redhat.com>

	* partIntfHelpers.py (sanityCheckVolumeGroupName, 
	sanityCheckLogicalVolumeName): Disallow more device names that
	will break LVM installs (#204387)

2006-08-28  Chris Lumens  <clumens@redhat.com>

	* gui.py (ExceptionWindow.__init__):  Log IOError message.  Don't
	traceback when loading the traceback dialog.

	* installclasses/fedora.py (InstallClass):  Use baseurl instead of
	mirrorlist (#204267).

	* iw/task_gui.py (TaskWindow):  Setup repos when next is clicked, not
	when the repo is added.  This makes sure that ones pre-populated in
	the repo list get setup before they're used.

2006-08-28  David Cantrell  <dcantrell@redhat.com>

	* textw/partition_text.py: Better verbiage (#204249)
	* textw/task_text.py: Likewise.
	* ui/tasksel.glade: Likewise.

2006-08-25  Peter Jones  <pjones@redhat.com>

	* iw/partition_ui_helpers_gui.py (WideCheckList.__init__): Actually
	make this function set the size of the checkbox's column reasonably

2006-08-25  Peter Jones  <pjones@redhat.com>

	* isys/isys.py: move device blacklisting from hardDriveDict into
	driveDict, so we do it less often (but in more codepaths :/).  Also
	add filtering of DGC LUNZ devices, which don't ever represent
	addressable storage.

2006-08-25  Jeremy Katz  <katzj@redhat.com>

	* loader2/init.c: Handle xvc0 as a "weird" console.  Also, fix a
	case where we didn't properly close an fd 

	* loader2/devices.h: Add xvc0 under experimental major/minor

	* loader2/Makefile (init.o): Add dependency rule on devices.h

2006-08-24  Jeremy Katz  <katzj@redhat.com>

	* fsset.py (FileSystemType.mount): Reset file context on
	mountpoints (#202525)

	* packages.py (setFileCons): Use new parameter to resetFileContext

	* isys/isys.py (resetFileContext): Allow passing a rootpath
	* isys/isys.c (doResetFileContext): Likewise.

2006-08-24  Chris Lumens  <clumens@redhat.com>

	* fsset.py (FileSystemSet.formatEntry):  Don't output misleading
	messages.
	(RAIDDevice.setupDevice):  Add command to list of args for printing.

	* yuminstall.py (YumBackend.selectAnacondaNeeds):  Make sure programs
	anaconda runs post-install are installed (#203216).

2006-08-23  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-08-23  Chris Lumens  <clumens@redhat.com>

	* loader2/lang.c (setupLanguage):  Make sure to set the language to
	English every time if it's unsupported (#203331).

2006-08-23  Peter Jones  <pjones@redhat.com>

	* dmraid.py: don't clobber bdevid search path with "/lib/"
	entries (#203425)

2006-08-23  Jeremy Katz  <katzj@redhat.com>

	* iutil.py (cpuFeatureFlags): Add a method to get cpu feature
	flags, remove no longer used hasNX

	* cmdline.py (InstallInterface.kickstartErrorWindow): Handle
	kickstart errors in cmdline mode (#203768)

	* yuminstall.py (YumBackend.doGroupSetup): Only show Xen as
	available on machines with PAE for x86

	* iw/task_gui.py: Rework so that we can enable/disable optional
	repos per install class as well as see what repos have been added
	* ui/tasksel.glade: Change things up a little bit

	* installclasses/fedora.py: Tweak description, add Extras as an
	additional repo

	* yuminstall.py (AnacondaYum.doConfigSetup): Allow for additional,
	not enabled by default repos to be set up.
	* installclass.py (repos): Add not-default repos

2006-08-22  Peter Jones  <pjones@redhat.com>

	* isys/auditd.[ch]: A simple audit daemon that throws away all messages

	* isys/isys.c: Include auditd.h.  Define doAuditDaemon(), which calls
	auditd.c's audit_daemonize().  Define the python function "auditdaemon".

	* isys/isys.py: define auditDaemon, which calls _isys.auditdaemon()

	* isys/Makefile: Add -laudit if we're using selinux.  also add auditd.o

	* anaconda.spec: require audit-libs and -devel .

	* anaconda (__main__): start the audit daemon.

2006-08-22  Chris Lumens  <clumens@redhat.com>

	* scripts/mk-images.ia64:  Fix typo (#203350).

2006-08-22  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.py (getDasdState): Fix unformatted dasds again (#203260)

2006-08-21  Peter Jones  <pjones@redhat.com>

	* isys/isys.py (driveDict): only return dm devices when "disk" is
	the klassArg in question, but don't fall through to the 'elif' for
	other klassArgs, either.

2006-08-21  Peter Jones  <pjones@redhat.com>

	* scripts/upd-instroot: include /etc/mke2fs.conf , because the builtin
	defaults suck real bad.  (#201645)

	* anaconda (__main__): make /mnt/runtime symlink for mke2fs.conf

	* rescue.py (runShell): ditto

2006-08-18  Peter Jones  <pjones@redhat.com>

	* iutil.py (makeDriveDeviceNodes): don't call isys.flushDriveDict()

	* isys/isys.py (driveDict): don't recompute cachedDrives unless it's
	empty.  Return a subset of it based on the "klassdevice" or similar.

2006-08-18  Peter Jones  <pjones@redhat.com>

	* iw/partition_ui_helpers_gui.py (WideCheckList.__init__): Don't set
	the selection mode to gtk.SELECTION_NONE.  AFAICT, all this does is
	make it so you can't check or uncheck drives for installation using
	only the keyboard.

2006-08-18  Chris Lumens  <clumens@redhat.com>

	* partRequests.py (LogicalVolumeRequestSpec.sanityCheckRequest):  Skip
	the LV size check if grow is set (#203095).

	* whiteout.py:  Add whiteout for scim-libs (#202543).

2006-08-17  Peter Jones  <pjones@redhat.com>

	* anaconda.spec: get rid of arch checks for pyblock

	* partedUtils.py: no arch checks for pyblock imports or mpath

	* scripts/upd-instroot: don't special case s390/s390x for device-mapper

2006-08-17  Chris Lumens  <clumens@redhat.com>

	* iutil.py (makeDriveDeviceNodes):  Flush the drive cache so we don't
	mistake hard drives for CD/DVD drives (#202714).

	* language.py (Language.fixLang):  Make sure to run in English for
	text CJKI installs (#180417, #202738).

2006-08-16  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-08-16  Chris Lumens  <clumens@redhat.com>

	* textw/timezone_text.py:  Fix typo (#202844).

2006-08-16  Jeremy Katz  <katzj@redhat.com>

	* installclasses/rhel.py (InstallClass.handleRegKey): Add a little
	bit of logging per jlaska's request 

	* image.py (findIsoImages): Adjust for changed paths

	* installclasses/rhel.py (InstallClass.handleRegKey): More tweaks
	based on what really exists

	* scripts/upd-instroot (PACKAGES): libbdevid moved (#202660)

2006-08-15  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILEGR): Adjust for new theme

	* scripts/upd-kernel (NEWVER): Handle kernel variants properly

2006-08-15  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* po/tr.po:  Hack into a buildable state.

2006-08-15  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* text.py (spawnShell):  Fix shell input/output (#201479).

	* urlinstall.py (UrlInstallMethod.__init__):  Don't traceback if path
	is simply "/" (#202368).

2006-08-15  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILEGR): Fix typo (#202167)

2006-08-14  Peter Jones  <pjones@redhat.com>

	* loader2/loader.c: include selinux-devel's selinux.h

	* loader2/selinux.h: don't declare setexeccon()

	* loader2/selinux.c: don't define setexeccon(), libselinux.a has it
	now.

2006-08-14  Chris Lumens  <clumens@redhat.com>

	* anaconda:  virtpconsole is a value, not a boolean (#202450).

	* kickstart.py (AnacondaKSHandlers.doSELinux):  Fix typo (#202471).
	Fix getBaseInstallClass import (#202483).

	* iw/partition_gui.py:  Mark strings for translation (#199022).

2006-08-11  David Cantrell  <dcantrell@redhat.com>

	* network.py (Network.lookupHostname): Use socket.getaddrinfo() so
	we can support IPv4 and IPv6.

2006-08-11  Chris Lumens  <clumens@redhat.com>

	* image.py:  Move self.isoPath into the base ImageInstallMethod class
	(#201775).

	* dispatch.py (Dispatch.canGoBack):  Don't enable the back button if
	there's only non-interactive steps preceeding the current one
	(#197766).

	* iutil.py (execWithCapture):  Capture stderr output too (useful for
	logging VNC error messages).

	* network.py (Network.lookupHostname):  Don't clobber /etc/resolv.conf
	during VNC installs (#201874).
	
	* vnc.py (startVNCServer):  Look for the right ending string.

2006-08-10  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c: Remember user choices on network configuration
	dialog box (#200797).

2006-08-10  Jeremy Katz  <katzj@redhat.com>

	* lang-table: More greek fixing (#196980)

	* scripts/pkgorder: Adjust for how distill is calling pkgorder for
	the RHEL trees (#201923) 

	* partedUtils.py (productMatches): Tweak acceptable RHEL upgrade
	matches (#201741)

	* installclass.py (getBaseInstallClass): Add a method for finding
	the default base install class so that I don't copy and paste the
	code between kickstart and upgrade cases 
	* kickstart.py (Kickstart): Use getBaseInstallClass
	* upgradeclass.py (InstallClass): Use proper base install 
	class (#201745)

	* textw/confirm_text.py (BeginUpgradeWindow.__call__): Fix
	traceback (#201960)

2006-08-09  Jeremy Katz  <katzj@redhat.com>

	* anaconda: Fix setting virtpconsole (#201749)

	* scripts/mk-images: Add libXdmcp for s390 too (#200985)

2006-08-09  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (setupNetworkDeviceConfig): Test ipinfo_set to see if
	we already have network configuration information (#200986).  Set the
	dev.ipv4 and dev.ipv6 values when copying in the network config
	info.  Set additional pump flags accordingly.

	* loader2/loader.c (doLoaderMain): Set netDev.preset = 1 if we have
	network config data already (#200986).

2006-08-09  Peter Jones  <pjones@redhat.com>

	* command-stubs/kudzu-probe-stub: add SATA probing

	* loader2/driverselect.c (chooseManualDriver): add CLASS_ATA and
	CLASS_SATA to the DRIVER_SCSI list.

	* loader2/hardware.c (detectHardware): add CLASS_ATA and CLASS_SATA
	to the "nostorage" list.

	* anaconda.spec: depend on newer kudzu

2006-08-09  Jeremy Katz  <katzj@redhat.com>

	* installclasses/rhel.py (InstallClass.handleRegKey): Add a few
	more options, check for validity of option (#201738)

2006-08-09  Chris Lumens  <clumens@redhat.com>.

	* iw/timezone_gui.py (TimezoneWindow.getScreen):  Only set the UTC
	check box if it's not a kickstart install (#181737).
	* textw/timezone_text.py (TimezoneWindow.__call__):  Likewise.

	* loader2/net.c (readNetConfig):  Don't try to strdup nothing
	(#196334).

2006-08-08  Jeremy Katz  <katzj@redhat.com>

	Patch from Paul Schroder <pschroeder@uplogix.com> for nogr mode
	* scripts/buildinstall: Add --nogr option 
	* scripts/mk-images: Use --nogr
	* scripts/mk-images.x86: Only put splash image in if building a
	graphics stage2
	* scripts/upd-instroot: Cleanups for --nogr

2006-08-08  Paul Nasrat <pnasrat@redhat.com>

	* anaconda.spec: Bump version

	* upgrade.py: Blacklist e2fsprogs.ppc64 (#200233)

2006-08-08  David Cantrell  <dcantrell@redhat.com>

	* urlinstall.py (UrlInstallMethod.__init__):  Set self.currentMedia
	to [] (#201722).

	* loader2/urlinstall.c:  Do not pass silentErrors to
	urlinstStartTransfer() (#201247).

	* loader2/urls.c:  Remove redundant download failure messages in the
	urlinstStartTransfer() function.  Do not accept silentErrors as a
	parameter (#201247).

	* loader2/urls.h:  Prototype update for urlinstStartTransfer().
	
2006-08-08  Chris Lumens  <clumens@redhat.com>

	* isys/imount.c:  Revert logMessage calls (#201707).

2006-08-07  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-08-07  Chris Lumens  <clumens@redhat.com>

	* xsetup.py (XSetup.getMonitorArgList):  getMonitor is very sync!

	* iw/account_gui.py (AccountWindow.getNext):  Always set the password
	field as unencrypted, so interactive kickstart installs get the right
	value written into /etc/shadow (#201455).
	* textw/userauth_text.py (RootPasswordWindow.__call__):  Likewise.

	* kickstart.py (AnacondaKSHandlers.doLogicalVolume):  Don't check size
	percentage if the LV is preexisting (#193341).

	* kickstart.py:  Use class Anaconda in AnacondaKSHandlers so we do not
	have to pass an instdata variable to all the handlers.  Remove
	passthrough functions and exception handler for kickstart commands
	which anaconda does not yet support.  This doesn't make sense anymore.

	* yuminstall.py (AnacondaYum.doConfigSetup):  Log repos added through
	kickstart too.

2006-08-07  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images.ia64 (makeBootImage): Add a first pass at
	setting things up for Xen guests
	* scripts/mk-images: Add kernel-xen for ia64, clean up logic a
	little to reduce duplication

	* scripts/mk-images (RAIDMODS): New raid module name (#201361)

	* loader2/loader.c: Likewise.

2006-08-04  Chris Lumens  <clumens@redhat.com>

	* rescue.py (startNetworking):  Look for ifconfig in the right place
	(#201372).

	* loader2/urls.c (urlMainSetupPanel):  Fix traceback when trying to
	add a leading slash to paths without one (#197403, #201243, #201367).

	* loader2/loader.c (main):  Don't initialize method to a valid
	selection, since that causes the method selection screen to never
	appear.

2006-08-03  Peter Jones  <pjones@redhat.com>

	* gui.py (ProgressWindow): Make a timeout after which we update the 
	progress bar even if our change percentage hasn't been met.

2006-08-03  Jeremy Katz  <katzj@redhat.com>

	* packages.py (regKeyScreen): Use per-installclass description.

	* installclass.py: Allow description for reg key to be
	per-installclass.

2006-08-03  Chris Lumens  <clumens@redhat.com>

	* isys/imount.c (doPwMount):  Log why mount failed.

	* loader2/cdinstall.c (setupCdrom):  Better error handling and
	logging.

	* loader2/loader.c (doLoaderMain):  Don't show method menu if we're
	installing from CD (#201108).

	* iw/release_notes.py (ReleaseNotesViewer.getReleaseNotes):  Don't add
	an extra slash, as urlparse gets confused easily (#201232).

	* iw/task_gui.py (TaskWindow._addRepo):  Log added repos (#201212).

2006-08-03  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot: Add libvolume_id for gfs2-utils

2006-08-02  Paul Nasrat   <pnasrat@redhat.com>

	* anaconda.spec:  Bump version.

2006-08-02  David Cantrell  <dcantrell@redhat.com>

	* po/*.po: aCIDR -> a CIDR (#200987)

2006-08-02  Paul Nasrat   <pnasrat@redhat.com>

	* scripts/pkgorder: Fix isdir check

2006-08-02  Chris Lumens  <clumens@redhat.com>

	* iw/partition_gui.py:  Reinstate frequent rescanning of devices.

2006-08-02  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-08-02  Peter Jones  <pjones@redhat.com>

	* partIntfHellpers.py (doDeletePartitionByRequest): don't raise
	an exception when somebody clicks delete on empty space; just
	return 0

2006-08-01  Chris Lumens  <clumens@redhat.com>

	* xsetup.py:  Fix string concat traceback (#201047).

2006-08-02  Jeremy Katz  <katzj@redhat.com>

	* bootdisk/s390x/initrd.size: Add file to describe size of initrd
	to fix LPAR installs (#197773)
	* bootdisk/s390x/generic.ins: Use initrd.size
	* scripts/mk-images.s390: And include initrd.size

2006-08-01  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images: Add libXau for s390 (#200985)

	* loader2/modules.c: We need to sleep for the disk state to be
	settled, not the USB stack after loading usb-storage (#200589)

2006-08-01  Peter Jones  <pjones@redhat.com>

	* anaconda.spec: Bump version.

	* dmraid.py (DmDriveCache.remove): Fix key name generation.
	Fix cache add/remove key names too.

	* partedUtils.py (DiskSet.startMdRaid): fix test list so that
	we don't accidentally append to the DiskSet.skippedList
	(DiskSet.closeDevices): stop Dm and MPath here
	(DiskSet.openDevices): don't need to check arch and such before
	starting Dm and MPath here; the functions we're calling do that.

	* partitioning.py (partitionObjectsInitialize): eliminate duplicate
	"shutdown" code for "DISPATCH_BACK" case.
	Add isys.flushDriveDict() after we bring iscsi up.
	Get rid of Dm and MPath startup, since refreshDevices does that.

	* partitions.py (Partitions.__init__): refresh devices before calling
	setFromDisk()
	(Partitions.setFromDisk): don't call refreshDevices() here; we do it
	just beforehand in every caller anyway.

	* upgrade.py (findExistingRoots): use the diskset from the anaconda
	class instead of a local one.

	* iw/partition_gui.py (PartitionWindow.refresh): Don't rescan the disks
	every time we change the partitioning requests.

2006-08-01  David Cantrell  <dcantrell@redhat.com>

	* loader2/urls.c (addrToIp): Correctly handle IP addresses passed as
	strings to this function.

	* loader2/urls.c (urlinstStartTransfer): Commented out mygethostbyname()
	call for IPv6 family for now, since it's not ready yet.

	* loader2/nfsinstall.c (getFileFromNfs): More useful log message than
	"foo bar", set client IP string correctly before calling
	getHostandPath() (BZ #195203).

	* loader2/kickstart.c (getHostandPath): Debug log messages.

2006-08-01  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Remove DDC probing code.

	* docs/command-line.txt:  Remove skipddc documentation.

	* loader2/loader.c (parseCmdLineFlags):  Remove --skipddc parameter.

2006-07-31  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* command-stubs/mknod-stub (main): More fixage (#200820)

2006-07-31  Peter Jones  <pjones@redhat.com>

	* isys/isys.py (makedev): return the computed value

	* command-stubs/mknod-stub: use os.makedev, not the deprecated isys one

2006-07-31  David Cantrell  <dcantrell@redhat.com>

	* loader2/ftp.c (getHostAddress): Use mygethostbyname() (BZ #200771).

	* loader2/urls.c (addrToIp): Use mygethostbyname() (BZ #200771).

	* loader2/urls.c (urlinstStartTransfer): Use mygethostbyname() to try
	and determine host address family before calling ftpOpen() or
	httpGetFileDesc() (BZ #200771).

	* isys/dns.c: Whitespace consistency.

2006-07-31  Jeremy Katz  <katzj@redhat.com>

	* textw/grpselect_text.py: Fix logging tracebacks

2006-07-31  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Add some guards around accessing xserver.
	Use $DISPLAY=:1 instead of :7 (#200758).

	* anaconda.spec:  Update rhpxl requirement.

	* anaconda: xhwstate -> xserver.hwstate (#200755).
	* exception.py:  Likewise.
	* installclass.py:  Likewise.

2006-07-29  Peter Jones  <pjones@redhat.com>

	* loader2/method.c: fix test for http vs ftp

2006-07-28  Peter Jones  <pjones@redhat.com>

	* anaconda.spec: Bump version.

2006-07-28  David Cantrell  <dcantrell@redhat.com>

	* loader2/Makefile: Remove /nss stuff.

	* scripts/mk-images: Don't create /nss directory on boot image.

2006-07-28  Peter Jones  <pjones@redhat.com>

	* scripts/upd-instroot: include libdmraid.so

	* anaconda.spec: reuire newer python-pyblock

2006-07-28  Jeremy Katz  <katzj@redhat.com>

	* users.py (Users.createUser): Create users under the rootpath
	(Clark Williams)
	* instdata.py (InstallData.write): Use the rootpath

	* packages.py (setFileCons): Normalize path so we don't hit a bug
	in matchpathcon

2006-07-28  David Cantrell  <dcantrell@redhat.com>

	* isys/dns.c: Removed code that's not in use anymore.

	* loader2/ftp.c: Notes to myself.

2006-07-28  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Use rhpxl.xserver for all X startup tasks.  Remove global
	X hardware variables.  Add an anaconda-specific screen section to the
	X config file to start up at the right resolution and font size
	(#199437).

	* instdata.py (InstallData):  Sync comment with reality.

	* xsetup.py (XSetup):  Use rhpxl.xserver instead of xhwstate.  Remove
	monitor name mangling since we don't even output a monitor section.

2006-07-28  Jeremy Katz  <katzj@redhat.com>

	* loader2/loader.c: Don't do the trace init stuff until later --
	we only want it if we're called as loader

2006-07-26  David Cantrell  <dcantrell@redhat.com>

	* isys/dns.c, isys/dns.h: Revert to previous version (DNS problems).

	* isys/nfsmount.c: Revert to previous version (DNS problems).

2006-07-27  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/method.c: Fix build on s390
	* loader2/cdinstall.c (setKickstartCD): Likewise

	* yuminstall.py (AnacondaYumRepo.__init__): Fix for rootPath
	(YumBackend.doPreInstall): Likewise.

	* loader2/loader.c (doLoaderMain): Fix method=

	* instdata.py (InstallData.write): Use anaconda.rootPath instead
	of hard-coding /mnt/sysimage

	* loader2/modstubs.c: Ignore options we don't understand to
	modprobe and properly handle the module not being in our modball

2006-07-27  David Cantrell  <dcantrell@redhat.com>

	* loader2/ftp.c (ftpOpen, ftpGetFileDesc): Support IPv6 hosts, which
	means using the EPSV command instead of PASV.  We don't get the IP
	address of the server in the response, so ftpGetFileDesc needs to
	bring in the in6_addr we already made for the server so we can then
	make the socket connection.

	* loader2/ftp.h: Prototype updates.

	* loader2/urls.c: Pass the in6_addr for the FTP server to the
	ftpGetFileDesc() function.

2006-07-27  Peter Jones  <pjones@redhat.com>

	* loader2/net.c chooseNetworkInterface(): when trying to find the ks
	macaddr, exit the loop when we find the match, and free the target
	there, not in the loop (#200451).

2006-07-27  David Cantrell  <dcantrell@redhat.com>

	* loader2/cdinstall.c: ogMessage -> logMessage

2006-07-27  David Cantrell  <dcantrell@redhat.com>

	* loader2/cdinstall.c: loaderData->method is now an int.

	* loader2/hdinstall.c: Whitespace consistency, loaderData->method
	is now an int.

	* loader2/loader.c (doLoaderMain): loaderData->method is now an
	int, pass methodNum to readNetConfig().

	* loader2/loader.h: char * method -> int method.

	* loader2/method.c: Set loaderData->method to appropriate METHOD_
	value since it's now an int.

	* loader2/method.h: Add METHOD_* macros.

	* loader2/net.c (cidrCallback): Dialog wording change.

	* loader2/net.c (readNetConfig): Take methodNum as a param, pass
	methodNum to configureTCPIP().

	* loader2/net.c (configureTCPIP): Take methodNum as a param, if
	user selects METHOD_NFS and unchecks IPv4, display error dialog
	and ask user to try again.

	* loader2/net.c (kickstartNetworkUp): Pass methodNum to
	readNetConfig().

	* loader2/net.h: Prototype updates.

	* loader2/nfsinstall.c: loaderData->method is now an int.

	* loader2/urlinstall.c: loaderData->method is now an int.

2006-07-27  Jeremy Katz  <katzj@redhat.com>

	* installclasses/rhel.py (InstallClass.__init__): base repopath
	didn't really change

	* anaconda.spec: Bump version.

2006-07-27  Paul Nasrat <pnasrat@redhat.com>

	* fsset.py (prepbootFileSystemType): Better PREP handling with 
	parted flags

2006-07-27  Jeremy Katz  <katzj@redhat.com>

	* installclasses/rhel.py (InstallClass.__init__): Fix for changed
	base repopath
	(InstallClass.handleRegKey): Add more options

2006-07-26  David Cantrell  <dcantrell@redhat.com>

	* loader2/urls.c (urlinstStartTransfer): Determine address family
	and pass that to the ftpOpen() call.

	* urlinstall.py (UrlInstallMethod.__init__): Use urlparse.

	* isys/dns.c, isys/dns.h: Updated for IPv6 support.

	* loader2/Makefile: Cleanups.

	* loader2/ftp.c, loader2/ftp.h: Updated for IPv6 support.

	* loader2/loader.c: Whitespace consistency.

	* loader2/method.c: Whitespace consistency.

	* loader2/urls.c: Updated for IPv6 support.

2006-07-26  Peter Jones  <pjones@redhat.com>

	* partRequests.py (RaidRequestSpec.__init__): fslabel, not fslabe.

2006-07-26  Jeremy Katz  <katzj@redhat.com>

	* scripts/scrubtree: Check for busybox stuff in /usr/sbin

2006-07-26  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (AnacondaKSScript.run):  Be smarter about where the log
	files are.

2006-07-26  Peter Jones  <pjones@redhat.com>

	* dmraid.py: consolidate startRaidDev and startAllRaid, likewise for
	stop.  fix mpath names in device cache.  name startAllMPath like
	everything else.

	* partedUtils.py: split up startAllRaid and stopAllRaid into individual
	functions for MdRaid, DmRaid, and MPath.
	
	* fsset.py: call individual start/stop functions

	* partitioning.py: ditto

	* partitions.py: ditto

	* upgrade.py: ditto

	* scripts/upd-instroot: require libbdevid-python whereever we require
	libbdevid.

2006-07-26  Jeremy Katz  <katzj@redhat.com>

	* lang-table: Add Kannada

	* scripts/upd-instroot (KEEPFILEGR): Add Kannada font

	* rescue.py (runRescue): Don't show onboot for rescue (#200237)

	* textw/network_text.py (NetworkGlobalWindow.__call__): Take
	(unused and optional) showonboot parameter

2006-07-25  David Cantrell  <dcantrell@redhat.com>

	* loader2/urls.c (addrToIp): Use AF_INET6 when making an in6_addr.

2006-07-25  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Require parted >= 1.7.1, pyparted >= 1.7.2

	* fsset.py (prepbootFileSystem.formatDevice): Don't need to run sfdisk
	anymore, parted handles this now.

	* scripts/upd-instroot: Removed sbin/sfdisk.

	* loader2/net.c: Bump inet_pton() buffers to length 48.
	Let users skip entering a DNS server in getDnsServers(), but still
	require a valid one if they enter anything.

	* loader2/urls.c (addrToIp): Update to support IPv6.

2006-07-25  Paul Nasrat  <pnasrat@redhat.com>

	* anaconda.spec: Bump version.

2006-07-25  Peter Jones  <pjones@redhat.com>

	* loader2/loader.c, loader2/net.c: fix noipv6

2006-07-25  Jeremy Katz  <katzj@redhat.com>

	* anaconda: Fix nodmraid and nompath

	* installclasses/rhel.py: This should be hidden by default

	* kickstart.py: Make kickstart installclass inherit from the
	installclass being used for the install so that we get product
	specific behaviors. 

	* whiteout.py (whiteout): Remove gstreamer/gstreamer-tools
	no-longer-a-loop (#197139)

2006-07-24  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* iutil.py (isMactel): Make this persist so we don't run dmidecode
	a bazillion times

2006-07-24  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (setupNetworkDeviceConfig): Init the noipv4 and
	noipv4 flags in the networkDeviceConfig struct.

2006-07-24  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.doRepoSetup): Make text better for
	adding an additional repo

	* iw/task_gui.py (TaskWindow.getScreen): Allow hiding additional
	repo button on a per-installclass basis

	* yuminstall.py (AnacondaYum.doConfigSetup): Allow having more
	than one default repo for the installclass
	(YumBackend._catchallCategory): Fix catchall category

	* packages.py (regKeyScreen): Add reg key screen.

	* installclass.py (BaseInstallClass.getPackagePaths): Add method
	to handle mapping with a URI to the repo paths we want to have
	(BaseInstallClass.handleRegKey): Method for handling the reg key
	and validating it

	* installclasses/rhel.py: Add Red Hat Enterprise Linux
	installclass.  Have it enable the regkey step
	* installclasses/rhel_as.py: Remove old RHEL class
	* installclasses/rhel_desktop.py: Likewise.
	* installclasses/rhel_es.py: Likewise.
	* installclasses/rhel_ws.py: Likewise.

	* gui.py (EntryWindow.__init__): Add intf.entryWindow taking
	advantage of messageWindow stuff.
	* text.py (InstallInterface.entryWindow): Likewise.

	* dispatch.py (installSteps): Add regkey step.

	* installclasses/fedora.py: Disable the fedora install class if on 
	RHEL.

	* iw/autopart_type.py (PartitionTypeWindow.addIscsiDrive): Fix
	error handling

2006-07-24  Peter Jones  <pjones@redhat.com>

	* loader2/loader.c: fix unused variable build failure

2006-07-21  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* iw/autopart_type.py (PartitionTypeWindow.addIscsiDrive): Show
	dialog while iscsid is starting

	* yuminstall.py (YumBackend.selectFSPackages): Ensure that
	iscsi-initiator-utils gets installed if installing on iscsi

	* kickstart.py (AnacondaKSHandlers.doIscsi): Fixes for new iscsi
	setup, startup iscsi targets at iscsi config

	* iscsi.py: Sleep after starting iscsid, ensure we get the port
	correct, redirect output from iscsid to avoid spinning, fix
	writing out iscsi config

	* scripts/buildinstall: Handle having packages under
	$PRODUCTPATH/RPMS or $PRODUCTPATH/
	* scripts/pkgorder: Likewise.
	* scripts/splittree.py: Likewise.

2006-07-21  Paul Nasrat <pnasrat@redhat.com>

	* bootloader.py: Fix traceback for no dosFilesystems

2006-07-21  Jeremy Katz  <katzj@redhat.com>

	* loader2/loader.c: Move things back to tty1

2006-07-20  Chris Lumens  <clumens@redhat.com>

	* iutil.py (execWithRedirect, execWithCapture):  Check that any file
	given for stdin is available before trying to read from it.
	Otherwise, use the regular stdin instead.

	* partitions.py (Partitions.setFromDisk):  Add labels from LVM and
	RAID when creating partition objects from the existing layout.
	* partRequests.py (RaidRequestSpec, LogicalVolumeRequestSpec):  Add
	fslabel attribute.
	* iw/lvm_dialog_gui.py (VolumeGroupEditor.editLogicalVolume):  Show
	preexisting label if any exists to the UI and the mount point combo
	(#149375).
	* raid/raid_dialog_gui.py:  Likewise.

2006-07-20  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* partitions.py (Partitions.setFromDisk): Need to do the refresh here.

	* partedUtils.py (DiskSet.startAllRaid): Calling refreshDevices()
	here totally breaks adding partitions... not sure what the intent
	was, but needs to be handled differently. (#199459)

	* lang-table: Add Malayalam and Oriya (#197783)

	* scripts/upd-instroot (KEEPFILEGR): Add malayalam and oriya 
	fonts (#197783)

	* packages.py (setFileCons): Fix labels of stuff that we create
	before the install starts now (#199605)

	* fsset.py (xfsFileSystem.formatDevice): Use attr=2 for xfs per
	Eric Sandeen

2006-07-20  Chris Lumens  <clumens@redhat.com>

	* iw/timezone_gui.py:  Make GMT offset timezones available in the UI
	(#199076).
	* textw/timezone_text.py:  Likewise.

	* textw/grpselect_text.py:  Fix text package selection/deselection
	(#186043).

2006-07-20  Jeremy Katz  <katzj@redhat.com>

	* iw/partition_ui_helpers_gui.py (createAllowedDrivesStore): Reset
	drivelist sensitivity here

2006-07-19  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-07-19  David Cantrell  <dcantrell@redhat.com>

	* loader2/nfsinstall.c (getFileFromNfs): Bring down network iface after
	fetching kickstart file.

	* loader2/urlinstall.c (getFileFromUrl): Bring down network iface after
	fetching file.

2006-07-19  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILEGR): dejavu fonts instead of vera

	* iw/autopart_type.py (PartitionTypeWindow.addIscsiDrive): Don't
	use the username/pass stuff yet
	* ui/iscsi-config.glade: Some minor tweaks, prepare for CHAP
	username/password

	* ui/adddrive.glade: Clean up text a little bit
	* ui/autopart.glade: Likewise.

	* iw/autopart_type.py: Fix add drive dialog to be displayed (#199451)

	* ui/addrepo.glade (window_position): Center dialog.

	* iw/task_gui.py (TaskWindow._addRepo): Actually set the product 
	name...

	* scripts/scrubtree: Fix for new busybox so that we get links to
	all of the busybox applets (#199463)
	* scripts/mk-images: Likewise

	* scripts/mk-images: Use reboot instead of shutdown (#199262)

2006-07-19  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (configureTCPIP): Error messages were reversed and
	did not make sense (#199452).

2006-07-19  David Cantrell  <dcantrell@redhat.com>

	* loader2/init.c: Modify the snakes on a plane debugging mode a
	bit.
	* loader2/net.{c,h}: Removed NETWORK_DEBUG mode and send data to the
	logging function via debugNetworkInfo().

2006-07-18  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2006-07-18  David Cantrell  <dcantrell@redhat.com>

	* loader2/log.c (logMessageV): Fix argument order for va_copy()
	calls.
	* loader2/log.c: Cleaned up some indentation.

2006-07-18  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-07-18  Chris Lumens  <clumens@redhat.com>

	* scripts/upd-instroot:  Add bdevid python module.

2006-07-17  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (AnacondaYum.doConfigSetup): Using metadata_expire
	doesn't make sense for anaconda
	(YumBackend.doRepoSetup): Allow setup of a single repo, reorganize
	so that this works

	* iw/task_gui.py (TaskWindow._addRepo): Support for adding repos.
	* ui/tasksel.glade: Add button to bring up add repo dialopg 
	* ui/addrepo.glade: Initial pass at dialog for adding additional 
	repos.

2006-07-17  Peter Jones  <pjones@redhat.com>

	* loader2/log.c: add logMessageV()

	* loader2/log.h: ditto

	* loader2/loader.c (nashHotplugLogger): make this use logMessageV

2006-07-17  Peter Jones  <pjones@redhat.com>

	* dmraid.py: multipath functions analogous to those for dmraid.  Also
	make DmDriveCache more generic.

	* kickstart.py: add doMultiPath handler

	* partedUtils.py: add start/stop/renameMPath.  Tidy up the loging of
	when mpath and dmraid are started and stopped.

	* partitioning.py (Anaconda.partitionObjectsInitialize):
	stop dm devices before we reinitialize the disk subsystem, and then
	restart them afterwards.

	* partitions.py (Partitions): start and stop ppaths appropriately.

	* flags.py: turn mpath on

	* loader.c (main): add multipath kernel modules to our module list

	* scripts/upd-instroot: add libbdevid modules into the instroot

2006-07-17  Chris Lumens  <clumens@redhat.com>

	* iutil.py (execWithRedirect):  Move path check into preexec_fn so
	absolute symlinks to things that don't exist in the stage2 image work.

2006-07-17  Paul Nasrat  <pnasrat@redhat.com>

	* whiteout.py: drop openjade>docbook-dtds  (#196733)

2006-07-17  Peter Jones  <pjones@redhat.com>

	* loader2/loader.c: use nash's hotplug handler
	
	* loader2/Makefile: link against libnash

	* anaconda.spec: add mkinitrd-devel buildprereq

2006-07-17  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* iw/autopart_type.py: iscsi works in the kernel now.

	* scripts/upd-instroot: Add dhcp libs needed by isys now

2006-07-14  Peter Jones  <pjones@redhat.com>

	* scripts/mk-images: add multipath kernel modules

2006-07-14  Chris Lumens  <clumens@redhat.com>

	* installclass.py (BaseInstallClass.setClearParts):  Nuke more unused
	code.

	* yuminstall.py (YumBackend.doPreInstall):  Create mount points for
	protected partitions that the user has selected to mount.

2006-07-13  Jeremy Katz  <katzj@redhat.com>

	* iutil.py: Remove unused import.

	* loader2/hardware.c (scsiSetup): Always load iSCSI modules.

	* iw/autopart_type.py: Support add drive button, add basic
	infrastructure for adding disks, specifically for iSCSI.

	* ui/iscsi-config.glade: Change around to use a dialog for
	configuring iSCSI targets.

	* ui/adddrive.glade: Glade file for adding disks.

	* ui/autopart.glade: Add add disk button.

	* iscsi.py: Rework a bit to handle multiple targets.

	* iw/partition_ui_helpers_gui.py (createAllowedDrivesStore): Split
	store creation out of drive list creation so we can recreate it.

	* iw/iscsi_gui.py: Remove in favor of more integrated way of 
	configuring
	* textw/iscsi_text.py: Likewise.
	* dispatch.py (installSteps): Remove iscsi step.
	* installclass.py: Likewise.
	* gui.py: Likewise.
	* text.py: Likewise.

	* exception.py (handleException): Don't do stdio bits for test mode.

2006-07-13  Chris Lumens  <clumens@redhat.com>

	* loader2/loader.h:  Add noipv4 and noipv6 elements to loaderData.
	* loader2/net.c:  Pass around noipv4 and noipv6 flags that can be
	specified on kickstart network command lines.  Clean up arguments to
	doDhcp.
	* loader2/net.h:  Add noipv4 and noipv6 elements to
	networkDeviceConfig.

2006-07-13  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version

2006-07-13  Jeremy Katz  <katzj@redhat.com>	

	* scripts/upd-instroot (XORG): Add xkeyboard-config to fix VT switching

2006-07-13  Chris Lumens  <clumens@redhat.com>

	* isys/isys.py:  Removed isys_calcNetmask and isys_calcNS.

2006-07-13  David Cantrell  <dcantrell@redhat.com>

	* isys/isys.c: Added back the doConfigNetDevice() and
	doPumpNetDevice() functions, but rewritten to use libdhcp instead
	of pump.  Since the UI has not changed for IPv6, these two functions
	don't really do IPv6 stuff yet.

	* isys/Makefile: Link and compile with libdhcp.

	* loader2/net.h: Removed IP_STRLEN macro (moved to libdhcp headers).

	* loader2/net.c (manualNetConfig): Write the gateway to newCfg, not
	cfg.

2006-07-12  Jeremy Katz  <katzj@redhat.com>

	* iw/netconfig_dialog.py: Add dialog for doing network device
	config for stage2 as a prereq of better iscsi support and extra repo
	config.  This is basically just the UI bits without things hooked
	up, but a good chunk of what's needed
	* ui/netconfig.glade: Add the glade file.

2006-07-12  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c: Remove BOOTP from "Use dynamic IP configuration
	(BOOTP/DHCP)" string.

2006-07-12  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c: Added NETWORK_DEBUG mode for readNetConfig().
	Set to 1 if you want readNetConfig() to dump pump info and then
	exit.

2006-07-12  Chris Lumens  <clumens@redhat.com>

	* iutil.py (execWithCapture, execWithRedirect):  Use subprocess
	instead of our own code.
	(copyFile):  Removed.
	(getArch):  Removed.
	(memInstalled):  Remove /proc/e820info cruft.
	(rmrf):  Removed.

	* anaconda, exception.py, firewall.py, fsset.py, instdata.py,
	iscsi.py, iutil.py, kickstart.py, lvm.py, packages.py, partedUtils.py,
	rescue.py, security.py, text.py, vnc.py, textw/timezone_text.py:
	Don't pass the command we're running as the first element of the
	argument list, as subprocess doesn't want things that way.

	* xsetup.py (XSetup.write):  No way to enable/disable DRI in rhpxl
	anymore.

	* exception.py, gui.py, image.py:  iutil.copyFile -> shutil.copyfile

	* textw/network_text.py (NetworkGlobalWindow.getFirstGatewayGuess):
	Don't guess the gateway for consistency with loader's UI (#197578).

	* isys/isys.py (inet_calcGateway):  Removed.

	* instdata.py (InstallData.write): Fix "unknown error" on shadow file
	(#196705).

2006-07-11  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2006-07-11  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (cidrCallback): No need for cidr variable.
	* loader2/net.c (manualNetConfig): Actually copy in an IP address
	to the cfg->dev.ip variable.

2006-07-11  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.{c,h}: An exhaustive list of updates:
		- Moved struct intfconfig_s to net.h
		- Init ipcomps members to NULL.
		- Catch return value from configureNetwork() and tell user the
		  network config failed.
		- Pass an int for ipv4Choice and ipv6Choice to manualNetConfig()
		- Use cfg->dev.ipv4 to calculate missing IPv4 components
		- Pass a pointer to ipcomps to manualNetConfig()
		- Fix tab order for IPv6 address and prefix fields (subgrid)
		- Populate IPv4 address field if PUMP_INTFINFO_HAS_IPV4_IP set
		- Use cfg->dev.ipv4 to populate IPv4 address field
		- Populate IPv6 address and prefix if we already have those
		- In run form loop in manualNetConfig(), pull data in to newCfg
		  struct and set flags
		- Handle CIDR or dotted-quad entry for IPv4 netmask
		- Set cfg->dev.ip with ipv4 or ipv6 depending on the address
		  family of the gateway
		- In configureNetwork(), return nonzero on error

2006-07-11  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c: More manual TCP/IP configuration changes.  The UI has
	been changed around a bit to make more sense.  Removed some unnecessary
	functions in net.c and changed some internal structs to match the needs
	of the brave new IPv4/IPv6 future.  Users can specify the IPv4 netmask
	in CIDR notation or the old/deprecated dotted-quad notation.  Not all
	of the UI bits are hooked up yet, but that's coming to completion soon.
	* loader2/net.h: Changes to reflect changes in net.c.

2006-07-11  Chris Lumens  <clumens@redhat.com>

	* anaconda.py (runVNC):  Fix stdin/stdout on VNC shell.

	* bootloader.py (hasWindows):  Add a function to check all the
	bootloader entries for Windows.
	* iw/timezone_gui.py (TimezoneWindow.getScreen):  Use hasWindows.
	* textw/timezone_text.py (TimezoneWindow.__call):  Use hasWindows to
	automatically check the UTC box like the GUI does.

	* xsetup.py (XSetup.write):  No standalone mode in rhpxl anymore.

	* yuminstall.py (YumBackend.doPreInstall):  Remove call to deprecated
	method.

2006-07-10  Jeremy Katz  <katzj@redhat.com>

	* textw/grpselect_text.py: Fix traceback (#197858)

2006-07-10  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* utils/readmap.c (main): Try to fix things for serial console
	(Alexander Dupuy, #198310)

	* fsset.py (RAIDDevice.mdadmLine): Fix raid6 and map raid levels 
	 sanely (#197844)

	* anaconda (rootpath_cb): Allow relative path (markmc, #197669)

2006-07-10  David Cantrell  <dcantrell@redhat.com>

	* scripts/upd-instroot: Added smartctl(8) to rescue image (#198052).

2006-07-10  Chris Lumens  <clumens@redhat.com>

	* upgrade.py (findRootParts):  findExistingRoots returns a 4-tuple
	now (#197900).
	* iw/examine_gui.py:  Likewise.
	* textw/upgrade_text.py:  Likewise.

2006-07-07  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/net.c (configureTCPIP): Pop Configure TCP/IP window before
	opening the Manual Network Configuration window.

2006-07-07  Jeremy Katz  <katzj@redhat.com>

	* fsset.py (gfs2FileSystem.__init__): Actually let the command
	line option work... 

2006-07-07  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c: Rewrote readNetConfig() and added two new functions
	(configureTCPIP and manualNetConfig) that handle the TCP/IP section
	of loader.  Users can enable/disable IPv4 and IPv6 independently, as
	well as some other options.  In the case of manual configuration, users
	are only given entry fields for the protocol(s) selected.  Still some
	more work to do, but the basic idea is there.
	* loader2/net.h: Prototype changes to keep up with net.c and changing
	times.

2006-07-07  Chris Lumens  <clumens@redhat.com>

	* rescue.py (runShell): Set stdout and stderr to /dev/console (#197315).

2006-07-07  Chris Lumens  <clumens@redhat.com>

	* rescue.py (runRescue):  Move label reading to partedUtils.py.
	* partedUtils.py (DiskSet.findExistingRootPartitions):  Look up
	filesystem labels as we find root partitions, as we won't have LVM
	active if we wait until later (#196345).

2006-07-06  Chris Lumens  <clumens@redhat.com>

	* vnc.py (startVNCServer):  Use the configured interface for VNC
	connections, instead of the first one that returns anything
	(#197721).

2006-07-06  David Cantrell  <dcantrell@redhat.com>

	* loader2/init.c: WIFEXITED() and WEXITSTATUS() fixes.
	* loader2/modules.c: Same.

2006-07-06  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py: Log requiring package as well as require name

2006-07-05  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* fsset.py (gfs2FileSystem.formatDevice): Fix my typo

2006-07-05  Jeremy Katz  <katzj@redhat.com>
	
	* anaconda.spec: Bump version.

	* fsset.py (gfs2FileSystem.__init__): Use gfs2 consistently, have
	mkfs not require confirmation

	* yuminstall.py (AnacondaYum._run): At least try to log the real
	transaction error

	* stubs/Makefile: Link the stub lib against wlite (#197593)

	* scripts/mk-rescueimage.i386 (productpath): Fix for new stage2 
	location.
	* scripts/mk-rescueimage.ppc (productpath): Likewise.

2006-07-03  Jeremy Katz  <katzj@redhat.com>

	* loader2/method.c (getFileFromBlockDevice): Give a message if we
	fail to make the device node for some reason (markmc, #197514)

	* iw/lvm_dialog_gui.py (VolumeGroupEditor.__init__): Try to make
	things fit a little better (#197334)

	* lang-table: Add Marathi (#194572)

2006-06-30  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2006-06-30  Jeremy Katz  <katzj@redhat.com>

	* loader2/init.c: Nuke non-existent paths from LD_LIBRARY_PATH 

2006-06-30  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (setupInterface): Removed and moved those two lines to
	the calling function (configureNetwork).

	* loader2/net.c (readNetConfig): Spelling error fix. Calculate IPv4
	broadcast if user did a static IP config, close any possibly open
	dhcp_nic handle if doing a static IP config.

	* loader2/net.h: Removed setupInterface prototype.

	* loader2/init.c: Fix up tabs and alignment and junk. Added a debugging
	macro called SNAKES_ON_A_PLANE. The idea is you can have init load core
	modules and then dump you in a shell (that you provide, of course) and
	then you can go crazy debugging loader. It's an idea, might work, might
	not. It's funny though. Also, use waitpid() instead of wait4().

	* loader2/loader.c: Check return values on exec functions since they
	only return on error, but still check it. Use WIFEXITED and WEXITSTATUS
	more correctly.

2006-06-30  Jeremy Katz  <katzj@redhat.com>

	* scripts/buildinstall: Nuke runroot stuff since everything is
	runroot'd now.  Get rid of first/second run of buildinstall,
	--comp is now a no-op
	* scripts/upd-instroot: --comp argument no longer makes sense to take

	* partitions.py (Partitions.sanityCheckAllRequests): Don't allow
	/boot on gfs2

	* fsset.py (gfsFileSystem.__init__): Can't do this until parted
	actually knows about it.

	* scripts/mk-images: Move second stage images to images/ dir.
	* image.py: Adjust for stage2 in images/
	* loader2/cdinstall.c: Likewise.
	* loader2/hdinstall.c: Likewise.
	* loader2/method.c: Likewise.
	* loader2/nfsinstall.c: Likewise.
	* loader2/urlinstall.c: Likewise.

2006-06-30  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* wlite/GNUmakefile: Don't install wlite stuff

	* scripts/upd-instroot (KEEPFILE): Add gfs utils

	* fsset.py (gfsFileSystem): Start to add gfs2 support 

	* scripts/mk-images (FSMODS): Add gfs2 modules

	* loader2/loader.c: Load gfs2 modules

2006-06-29  Peter Jones  <pjones@redhat.com>

	* wlite/: add libwlite
	* Makefile: at wlite to subdirs
	* loader2/Makefile: add libwlite.a to unicode library list
	* stubs/Makefile: add includes for wlite
	* stubs/unicode-lite.c: add wc support (#196099, #186701).
	get rid of libc_freeres_fn, it doesn't help anything.

2006-06-29  Chris Lumens  <clumens@redhat.com>

	* loader2/cdinstall.c (kickstartFromCD):  Look for the kickstart file
	on all CD drives (notting, #197192).

	* loader2/net.c (doDhcp):  Pass the debug log level to
	pumpDhcpClassRun (markmc, #197175).

2006-06-28  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version, require yum 2.9.2

	* yuminstall.py: Fix up for logging API changes in 2.9.2
	* scripts/pkgorder: Likewise.

	* yuminstall.py (AnacondaYum.doConfigSetup): Move stuff around to
	match current yum API

2006-06-28  Chris Lumens  <clumens@redhat.com>

	* text.py (InstallInterface.run):  Fix traceback on nonexistant
	variable (#196615).

	* iw/kbd_gui.py (KeyboardWindow.getNext):  Make sure we call the
	correct getNext function so the keyboard layout is set (#196466).

2006-06-28  David Cantrell  <dcantrell@redhat.com>

	* loader2/urls.c (urlMainSetupPanel): Don't redefine buf, realloc it
	and free when done. Consistently set ui->prefix in the function.

2006-06-27  David Cantrell  <dcantrell@redhat.com>

	* loader2/cdinstall.c (setupCdrom): Fix corrupted double-linked list
	problem.

	* loader2/windows.c (winStatus): Use vasprintf().

	* loader2/dietstubs.c: Removed.

	* loader2/net.c (chooseNetworkInterface): Fix double free() when using
	a MAC address for ksdevice. Use str2upper() for ksMacAddr.

	* loader2/urls.c (urlMainSetupPanel): Fix double free() (#195749).

	* isys/str.c: Added str2upper() that doesn't use ctype.h or string.h.
	* isys/str.h: And the header file.
	* isys/Makefile: Added str.o
	* isys/nl.c: Use str2upper().

2006-06-27  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Require system-config-date (#196452).

	* iw/network_gui.py (NetworkWindow.getNext):  Make sure the contents
	of the UI end up in network.* variables (#196756).

2006-06-26  Paul Nasrat   <pnasrat@redhat.com>

	* scripts/splittree.py: Make trees with symlinks work (#195240).

2006-06-26  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Force graphical mode under VNC (#190099).

	* rescue.py (runRescue):  Display fs labels next to rescue choices
	(#196345).

2006-06-26  Peter Jones  <pjones@redhat.com>

	* Makefile.inc: get rid of USEDIET
	* isys/gzlib/Makefile: get rid of USEDIET and DIETLIB
	* isys/Makefile: get rid of USEDIET and DOBJECTS
	* loader2/Makefile: ditto
	* isys/ethtool.c: get rid of DIET
	* isys/nfsmount.h: ditto
	* isys/smp.c: ditto
	* isys/wireless.c: ditto
	* loader2/md5.h: ditto

2006-06-26  Peter Jones  <pjones@redhat.com>

	* loader2/modstubs.c (extractModule): don't leak memory
	* loader2/loader.c: set up mtrace and segfault handling very early, and
	put the segfault on tty8 so newt won't garble it.

2006-06-23  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-06-23  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Set flags.serial if we're doing a serial 
	install. (#196375)

2006-06-23  Jeremy Katz  <katzj@redhat.com>

	* iw/zfcp_gui.py (ZFCPWindow.getScreen): I can't type

	* textw/network_text.py (sanityCheckIPString): Fix for internal
	API changes (#196154)

	* scripts/pkgorder (PackageOrderer.setup): Fix for yum api changes.

2006-06-22  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILE): Add iscsistart

2006-06-22  Chris Lumens  <clumens@redhat.com>

	* isys/isys.c:  Removed doIsScsiRemovable and doIsIdeRemovable.
	* isys/isys.py:  Removed driveIsRemovable.  Added mediaPresent to
	check if a device is present/media is in the removable device.

	* partedUtils.py (DiskSet.openDevices):  Use mediaPresent.
	* command-stubs/list-harddrives-stub:  Likewise.

	* yuminstall.py:  Don't try to unmount a CD twice.  Don't log deps
	added for themselves.

	* autopart.py:  Some minor cleanups suggested by pychecker.
	* bootloader.py:  Likewise.
	* partitioning.py:  Likewise.
	* upgrade.py:  Likewise.

	* partErrors.py (PartitioningError, PartitioningWarning):  These
	should inherit from Exception, since that's what they are.

2006-06-21  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/net.c (doDhcp): Use a timeout of 45 seconds instead of
	10 so that we're in compliance with the dhcp rfc

2006-06-21  Peter Jones  <pjones@redhat.com>

	* net.c (ipCallback): check return values correctly on inet_pton()
	* net.c (getDnsServers): check value of "ns" correctly, and use
	struct in[6]_addr for calls to inet_pton()
	* net.c (setupNetworkDeviceConfig): check return from inet_pton
	correctly
	* net.c (readNetConfig): check return from inet_pton correctly, and
	memcpy ip_addr_t structures rather than assigning the pointers.

2006-06-21  Chris Lumens  <clumens@redhat.com>

	* iscsi.py (iscsi.write):  Don't try to write if we weren't using
	iscsi to begin with.

2006-06-21  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.getBestKernelByArch): Make sure we
	really have kernel-smp before trying to say we do (#196150)

2006-06-21  Peter Jones  <pjones@redhat.com>

	* loader2/init.c: set MALLOC_CHECK_ and _MALLOC_PERTURB for the loader

2006-06-21  Jeremy Katz  <katzj@redhat.com>

	* loader2/net.c (setupNetworkDeviceConfig): Remove s390 hack

	* network.py (sanityCheckIPString): Remove s390 hack

	* isys/isys.py (sync): Remove s390 hack

	* iscsi.py (iscsi.__init__): Fix for the case of not using iscsi

2006-06-21  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* iw/iscsi_gui.py (iscsiWindow.getNext): Don't need to do the
	startup here now.

	* isys/isys.py (compareDrives): Sort xvd devices first since
	they're the "bootable" ones for Xen
	(driveIsIscsi): Determine if a drive is iscsi or not.  Kind of ugly.

	* zfcp.py (ZFCP.write): Copy zfcp.conf here.

	* yuminstall.py (YumBackend.doPreInstall): Write out network, zfcp
	and iscsi info prior to the install starting. 

	* partitioning.py (partitionObjectsInitialize): Flush drive dict
	on initialization, set up iscsi devices here, make device nodes
	for drives

	* kickstart.py (AnacondaKSHandlers.doIscsi): Initial iscsi
	kickstart support.  This syntax *will* change

	* iscsi.py (iscsi.action): Set nodes to start up automatically on
	boot in the db
	(iscsi.startup): Give a popup while we're waiting on iscsi devs 
	to initialize
	(iscsi.write): Write out iscsi config

	* fsset.py: Add various bits so that we can set that a device
	should be marked as _netdev in the fstab and use it appropriately
	for iscsi.

	* autopart.py (getDriveList): Sort drive list "correctly"

2006-06-20  Jeremy Katz  <katzj@redhat.com>

	* iw/zfcp_gui.py (ZFCPWindow.getScreen): Fix fallout from anaconda
	class changes (#196097)

2006-06-20  Peter Jones  <pjones@redhat.com>

	* loader2/net.c (netlogger): don't pass our output to logMessage as a
	format specifier, it may have special characters in it.

2006-06-20  Peter Jones  <pjones@redhat.com>

	* loader2/usb.c: make sleepUntilUsbIsStable not static
	* loader2/usb.h: export sleepUntilUsbIsStable (and make the other
	functions extern aswell)
	* loader2/modules.c: use sleepUntilUsbIsStable() to wait for usb

2006-06-20  Chris Lumens  <clumens@redhat.com>

	* anaconda (setupPythonUpdates):  continue instead of return if a
	directory isn't found.  Also, repomd is gone.

2006-06-20  David Cantrell  <dcantrell@redhat.com>

	* loader2/Makefile: Cram a new linker path in to loader so that we can
	find libnss_* stuff in stage1.

	* scripts/mk-images (makeinitrd): Copy in libnss_dns* and libnss_files*
	to the stage1 image.

	* loader2/net.c (chooseNetworkInterface): Correctly handly ksdevice
	parameters that contain MAC addresses (#195907).

	* loader2/net.c (netlogger): I suppose I can use vasprintf().

2006-06-20  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (AnacondaYum._run): Translate the error 
	string (#194617)

2006-06-19  Jeremy Katz  <katzj@redhat.com>

	* lang-table: Greek tweak (#193872)

2006-06-16  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot (KEEPFILE): setfiles moved.

	* yuminstall.py (YumSorter.tsCheck): Give info about when we add
	packages as deps.  (#189050, others)

2006-06-16  Peter Jones  <pjones@redhat.com>

	* anaconda.spec: Require newer libdhcp, bump version.

2006-06-16  Chris Lumens  <clumens@redhat.com>

	* rescue.py (runShell):  Use shell running code from text mode instead
	to fix ctrl-characters and other terminal weirdness in rescue mode.

2006-06-15  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* network.py (sanityCheckIPString): More s390 inet_pton breakage

	* isys.py (sync): sync seems to cause an oops on s390 (#195630)

2006-06-16  Peter Jones  <pjones@redhat.com>

	* iutil.py (makeDMNode): don't throw an exception if
	/dev/mapper/control is already present

2006-06-15  Jeremy Katz  <katzj@redhat.com>

	* partedUtils.py (DiskSet.startDmRaid): No dmraid on s390

2006-06-15  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* iw/iscsi_gui.py (iscsiWindow.getNext): Hack for iscsi to stabilize

	* iscsi.py (iscsi.write): Write out iscsi config bits

	* anaconda (opts.iscsi): Actually handle the iscsi flag

	* loader2/net.c: Hack for s390 to work for now

	* isys/isys.py (inet_ntoa): Fix on 64bit machines

	* textw/zfcp_text.py (ZFCPWindow.__call__): Fix syntax errors.

	* scripts/pkgorder: Make sure all kernel packages are in
	pkgorder.  We don't really want kernel-devel on the last CD anyway.

2006-06-15  Jeremy Katz  <katzj@redhat.com>
	
	* anaconda.spec (BuildPreReq): We need the newer kudzu to
	avoid segfaults in the loader, not explicitly at runtime
	(Version): Bump

2006-06-14  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec (Requires): Need openssh to generate keys when
	building s390 trees
	(Version): Bump

	* scripts/mk-images: We need libaudit on s390 now too.

2006-06-14  Peter Jones  <pjones@redhat.com>

	* loader2/loader.c (main): initialize ttys earlier to make debugging
	system library breakage easier.

2006-06-14  Jeremy Katz  <katzj@redhat.com>

	* image.py (CdromInstallMethod.switchMedia): Don't switch if we're
	already there.

	* scripts/pkgorder: add some kernels

2006-06-14  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* scripts/pkgorder (addGroups): Only select groups which exist

2006-06-14  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* scripts/upd-instroot (KEEPFILE): Actually keep gptsync around

	* scripts/mk-images: More attempts at the s390...

	* dispatch.py (installSteps): That wasn't supposed to be committed...

	* yuminstall.py (YumBackend.kernelVersionList): I still can't
	type, especially at 1 am.

2006-06-14  Jeremy Katz  <katzj@redhat.com>
	
	* anaconda.spec: Bump version.

	* scripts/mk-images: More trying to fix s390...

	* yuminstall.py (YumBackend.getBestKernelByArch): New xen kernel
	package naming.

	* scripts/mk-images: New xen kernel name.
	* scripts/mk-images.x86: Likewise.

2006-06-13  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

	* iw/release_notes.py: Set is_showing to false on hide.

	* loader2/log.c: Removed vaLogMessage() and made logMessage() what
	it was in a past life.
	* loader2/log.h: Removed vaLogMessage() prototype.

	* loader2/net.c (netlogger): Make a buffer of an arbitrary size, cram
	the va_list in to that using vsnprintf(), pass to logMessage().

2006-06-13  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/pkgorder (PackageOrderer.setup): More API fixage

2006-06-13  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c: Last inet_ntoa() -> inet_ntop() conversions. Remove
	commented out libdhcp_stderr_logger() call.
	* loader2/urls.c: Likewise.

	* gui.py: Release notes viewer updates.
	* iw/release_notes.py: Likewise.

	* network.py (Network.available): Filter out sitX devices.

2006-06-13  David Cantrell  <dcantrell@redhat.com>

	* loader2/log.c: Added vaLogMessage() to take va_list argument, make
	logMessage() call this function.
	* loader2/log.c: vaLogMessage() prototype.
	* loader2/net.c (netlogger): Call vaLogMessage instead of logMessage().

2006-06-13  Chris Lumens  <clumens@redhat.com>

	* iw/network_gui.py (NetworkWindow.getNext):  This one's a string
	instead of a widget.

	* textw/grpselect_text.py:  Yum API fix.

2006-06-13  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-06-13  Paul Nasrat  <pnasrat@redhat.com>

	* scripts/mk-images.ppc: Fix quoting
	
2006-06-13  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

2006-06-13  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (doStartupConfig):  Move configuration steps around to
	better reflect API.  Also, packages actually get installed this way.

2006-06-13  David Cantrell  <dcantrell@redhat.com>

	* gui.py (InstallControlWindow.releaseNotesButtonClicked): Run
	ReleaseNotesViewerLauncher.

	* iw/release_notes.py: Shift functions around, catch more exceptions,
	peel more potatos.

2006-06-13  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (simpleCallback.callback): Another API fix

	* scripts/pkgorder: Fix up for new yum API, don't import
	anaconda_log until after we've put /usr/lib/anaconda into the path

	* scripts/mk-images: I will learn to type someday.

2006-06-13  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (readNetConfig): Put memset for newCfg in correct place.

	* anaconda.spec: Don't require pump-devel.

2006-06-13  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (AnacondaYum.doStartupConfig):  Override superclass
	method (#194987)

2006-06-13  David Cantrell  <dcantrell@redhat.com>

	* loader2/loader.c: parseCmdLineFlags() does not need to return flags.
	We don't need to set netDev.useipv6 anymore because flags are global.

	* loader2/net.h: Removed useipv6 from networkDeviceConfig struct.

	* loader2/net.c (waitForLink): Note which interface we are waiting on.
	* loader2/net.c (readNetConfig): Initialize newCfg (#194882).
	* loader2/net.c (doDhcp): Read global flags rather than useipv6.

2006-06-12  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot (PACKAGES): Add yum-metadata-parser

	* anaconda.spec (Requires): Bump yum version requires

	* yuminstall.py: Fixup imports for yum 2.9.x
	(AnacondaYumRepo.__init__): Fixup for Repo code in yum 2.9.x
	(AnacondaYum.__init__): Fix for config startup in yum 2.9.x

2006-06-12  David Cantrell  <dcantrell@redhat.com>

	* loader2/loader.c: Define boot loader flags as the global 'flags' so we
	can use it from anywhere within the loader. Remove all passing of flags
	to different functions.

	* loader2/cdinstall.c: Reference global flags variable, remove passing
	of flags to different functions.
	* loader2/driverdisk.c: Likewise.
	* loader2/driverselect.c: Likewise.
	* loader2/firewire.c: Likewise.
	* loader2/hardware.c: Likewise.
	* loader2/hdinstall.c: Likewise.
	* loader2/kbd.c: Likewise.
	* loader2/kickstart.c: Likewise.
	* loader2/lang.c: Likewise.
	* loader2/method.c: Likewise.
	* loader2/modules.c: Likewise.
	* loader2/net.c: Likewise.
	* loader2/nfsinstall.c: Likewise.
	* loader2/pcmcia.c: Likewise.
	* loader2/telnetd.c: Likewise.
	* loader2/urlinstall.c: Likewise.
	* loader2/urls.c: Likewise.
	* loader2/usb.c: Likewise.

	* loader2/cdinstall.h: Clean up prototypes to match flags being global.
	* loader2/driverdisk.h: Likewise.
	* loader2/firewire.h: Likewise.
	* loader2/hardware.h: Likewise.
	* loader2/hdinstall.h: Likewise.
	* loader2/kbd.h: Likewise.
	* loader2/kickstart.h: Likewise.
	* loader2/lang.h: Likewise.
	* loader2/loader.h: Likewise.
	* loader2/method.h: Likewise.
	* loader2/modules.h: Likewise.
	* loader2/net.h: Likewise.
	* loader2/nfsinstall.h: Likewise.
	* loader2/pcmcia.h: Likewise.
	* loader2/telnetd.h: Likewise.
	* loader2/urlinstall.h: Likewise.
	* loader2/urls.h: Likewise.
	* loader2/usb.h: Likewise.

2006-06-10  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* isys/isys.py (readReiserFSLabel_int): Close leaky fd

	* autopart.py (doClearPartAction): Clear partition on mactels if
	it doesn't have a filesystem so that we can do auto-partitioning
	on them.

	* anaconda.spec (Requires): ifarch the syslinux requires

2006-06-09  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* Makefile: Build and install gptsync on x86.

	* gptsync/: Add gptsync code from refit (http://refit.sf.net)
	until I get parted to do this.  Slightly modified to default to
	Linux native parts and not to prompt.

	* partitions.py (Partitions.sanityCheckAllRequests): Sanity check
	to ensure /boot on the mactels is on one of the first 4 parts

	* partedUtils.py (DiskSet.savePartitions): Use gptsync to sync
	gpt->mbr on mactels
	(archLabels): Allow gpt on i386, x86_64

	* bootloader.py (bootloaderSetupChoices): mactels need their
	bootloader on the partition.

	* iutil.py (isMactel): Add a way to check if a box is a mactel

	* scripts/upd-instroot (PACKAGES): kernel-utils is no more, make
	sure we get dmidecode

	* scripts/mk-images: More trying to beat s390 into working.

2006-06-09  David Cantrell  <dcantrell@redhat.com>

	* loader2/loader.c: Clean up formatting to make the file more readable.
	Set useipv6 in the netDev structure depending on 'noipv6' param.
	* loader2/net.c: Sure can't make up my mind. Put doDhcp back so that I
	can conditionally do the IPv6 thing or not from one place.
	* loader2/net.h: doDhcp() prototype.

2006-06-09  David Cantrell  <dcantrell@redhat.com>

	* scripts/mk-images: Added ipv6 to COMMONMODS

	* loader2/module-info: Upstream says we don't need ipv6 listed here.

	* loader2/net.c: Removed doDhcp and call pumpDhcpClassRun() directly.
	Use netlogger() to catch libdhcp log messages.
	* loader2/net.h: Removed doDhcp() prototype, added netlogger() one.

2006-06-09  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  netpbm-tools -> netpbm-progs.

	* autopart.py:  Simplify error handling and return values.
	(doAutoPartition):  Fix up a nonsensical error message.

	* dispatch.py:  Fix handling of dir yet again.
	* gui.py:  We don't need yet another dir variable.

2006-06-08  Jeremy Katz  <katzj@redhat.com>

	* fsset.py (extFileSystem.setExt3Options): user_xattrs and acls by 
	default

2006-06-08  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec: Bump version

2006-06-08  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c (initLoopback): No need to specify addresses, it's
	loopback.
	* ChangeLog: Fix previous formatting error in my ChangeLog entry.

2006-06-08  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c: Add some stuff to initLoopback() that should work, but
	appears not to (looking in to it).  Return to using pumpDhcpClassRun()
	for doDhcp() for now, converting later.  Removed ifxDHCPv6 and
	ifxDHCPv4.
	* loader2/net.h: doDhcp() returns a pointer again.

2006-06-08  David Cantrell  <dcantrell@redhat.com>

	* loader2/hardware.c: Added ipv6Setup() to load the ipv6.ko module.
	* loader2/hardware.h: Added ipv6Setup() prototype.

	* loader2/loader.c: Run ipv6Setup() on start. Look for a 'noipv6' flag
	passed to the installer. If we see that, disable IPv6 during install.
	* loader2/loader.h: Order flags numerically. Add NOIPV6 flag.

	* loader2/module-info: Add ipv6 module.

	* docs/command-line.txt: Added note about noipv6 option.

2006-06-08  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec (Requires): And dosfstools is needed too

2006-06-08  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Specify anaconda-runtime files better (#198415).
	Add Requires for anaconda-runtime (#194237).

	* autopart.py (fitSized):  Display a better error message if there's
	not enough space for the requested partitioning (#181571).

	* fsset.py (FileSystemSet.mountFilesystems):  Raise a warning dialog
	on upgrade if mounting a non-linux filesystem fails (#185086).

	* network.py (sanityCheckIPString):  A better validation check that
	takes IPv6 into account.

	* yuminstall.py (YumBackend.doPostInstall):  No point in a progress
	bar that never updates.

2006-06-07  Chris Lumens  <clumens@redhat.com>

	* network.py (IPError, IPMissing):  Moved here from iw/ipwidget.py.
	(sanityCheckIPString):  Simplified to just check the string, so we can
	complicate it up later for IPv6.
	* iw/ipwidget.py:  Removed.
	* iw/iscsi_gui.py:  Use a gtk.Entry instead of an IPEditor.
	* iw/network_gui.py:  Likewise.
	(NetworkWindow.handleNoActiveDevices):  Remove misleading text (#135828).

2006-06-07  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Require libdhcp-devel, libdhcp4client-devel, and
	libdhcp6client-devel

	* loader2/Makefile: Link with libdhcp, remove libpump stuff

	* loader2/net.c: Changes to use libdhcp instead of pump, support IPv6
	* loader2/net.h: Likewise
	* loader2/nfsinstall.c: Likewise
	* loader2/telnetd.c: Likewise
	* loader2/urlinstall.c: Likewise

	* isys/Makefile: Remove -lpump
	* isys/isys.c: Remove doPumpNetDevice and doConfigNetDevice

2006-06-06  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* Makefile (build): Switch to brew

2006-06-06  Chris Lumens  <clumens@redhat.com>

	* scripts/upd-instroot:  rhpxl is in /usr/lib, not $LIBDIR.

2006-06-05  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images: s390x ld.so is in /lib now (#192862)

2006-06-04  Jeremy Katz  <katzj@redhat.com>

	* lang-table: Add Greek (#193872)

2006-06-02  Chris Lumens  <clumens@redhat.com>

	* network.py (Network.write):  Write out IPv6 localhost (#44984).

	* vnc.py (startVNCServer):  If we don't have a valid hostname, tell
	the user to connect to the IP address instead (#191561).

	* loader2/urlinstall.c (loadSingleUrlImage):  Add User-Agent header to
	HTTP requests (#98617).
	(getFileFromUrl):  Likewise.

	* textw/welcome_text.py (WelcomeWindow.__call__):  Remove pointless
	back button (#187158).

2006-06-01  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Set methodstr early on so we have it in runRescue.  Add a
	rescue boolean to the anaconda class.  Move getInstallInterface into
	the anaconda class.

	* rescue.py (runRescue):  Make sure to set the install method in
	rescue mode.

	* iw/lvm_dialog_gui.py (VolumeGroupEditor.createPEOptionMenu):  If the
	volume group's physical extent size is other than what we expect, make
	sure to add it to the list (#185272).

	* ui/anaconda.glade:  Don't specify a window position.  This will help
	when the new rhpxl stuff makes it in.

2006-05-31  Chris Lumens  <clumens@redhat.com>

	* isys/isys.py (inet_aton):  Fix on 64-bit machines (#193609).

	* kickstart.py (AnacondaKSScript.run):  Read from the right stdin when
	running scripts (#192067, Hannu Martikka <hannu.martikka@nokia.com>).

2006-05-30  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.  Require glib2-devel.
	
	* loader2/Makefile:  Look for libglib2 in the right place on 64-bit
	machines.

2006-05-30  Chris Lumens  <clumens@redhat.com>

	* dispatch.py (Dispatcher):  Set self.dir the right way.

2006-05-30  David Cantrell  <dcantrell@redhat.com>

	* Makefile: Added api doxygen target.

	* docs/api.cfg: Doxygen configuration file for generating anaconda
	API documentation.

2006-05-26  Chris Lumens  <clumens@redhat.com>

	* fsset.py (FileSystemSet.mountFilesystems):  Don't try to mount any
	protected partitions since they are already mounted as the
	installation source, and trying again will cause an error.

	* packages.py (turnOnFilesystems):  Use anaconda class.
	* rescue.py (runRescue):  Likewise.
	* upgrade.py (mountRootPartition):  Likewise.

2006-05-26  David Cantrell  <dcantrell@redhat.com>

	* isys/Makefile: Remove getipaddr.o reference.

	* isys/getipaddr.c: Removed.

	* isys/isys.c (doGetIPAddress): Call netlink_interfaces_ip2str()
	instead of getIPAddr().

	* isys/net.h: Removed getIPAddr() prototype.

2006-05-26  David Cantrell  <dcantrell@redhat.com>

	* isys/nl.c (netlink_format_ip_addr): Rewrote to malloc for space
	in the function and handle IPv4 and IPv6 address lengths more
	gracefully.

	* isys/nl.c (netlink_interfaces_ip2str): Added function to return the
	IP address of the specified device name. If you have an IPv4 address
	for the device, that's returned. If you only have an IPv6 address,
	that's returned. The string returned is the human-readable IP addr.

	* isys/nl.c (_netlink_interfaces_elem_find): Renamed the
	_netlink_interfaces_elem_mac2str function since it's a generic intf
	search routine.

	* isys/nl.c (netlink_init_interfaces_list): If there is no IPv6
	address, memset intfinfo->ip6_addr to all zeros.

	* isys/nl.h: Prototype updates.

2006-05-26  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILE): pygobject2, keep pth files

2006-05-26  David Cantrell  <dcantrell@redhat.com>

	* isys/Makefile: Remove getmacaddr references. Add glib CFLAGS and
	LDFLAGS.

	* isys/getmacaddr.c: Removed.
	* isys/getmacaddr.h: Removed.

	* isys/isys.c: Call netlink_interfaces_mac2str() in doGetMacAddress.

	* isys/nl.c (netlink_format_mac_addr): Malloc space for buf if it's
	NULL when we enter the function.
	* isys/nl.c (netlink_interfaces_mac2str): Return buffer malloc is
	handled by netlink_format_mac_addr).

	* loader2/Makefile: Add glib CFLAGS and LDFLAGS.

	* loader2/net.c: Call netlink_format_mac_addr() and
	netlink_interfaces_mac2str().

	* loader2/urlinstall.c: Call netlink_interfaces_mac2str() instead of
	getMacAddr().

2006-05-25  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-05-25  Paul Nasrat <pnasrat@redhat.com>

	* image.py(presentRequiredMediaMessage):  Fix for yum backend
	* image.py (CdromInstallMethod.__init__): Fix traceback
	* yuminstall.py: Remove cd number checking (now in image.py)
	* iw/confirm_gui.py: presentRequireMediaMessage takes anaconda
	* textw/confirm_text.py: Likewise

2006-05-25  David Cantrell  <dcantrell@redhat.com>

	* anaconda (__main__): Pass reference to anaconda rather than id and
	dispatch references when calling anaconda.intf.run().

	* cmdline.py (InstallInterface.run): Changes to account for receiving
	a reference to the anaconda object rather than an id and dispatch
	object.
	* gui.py (InstallInterface.run): Likewise.
	* text.py (InstallInterface.run): Likewise.

	* gui.py (InstallControlWindow.releaseNotesButtonClicked): Pass
	reference to anaconda object to the ReleaseNotesViewerThread object.

2006-05-25  David Cantrell  <dcantrell@redhat.com>

	* isys/nl.h: Include glib.h and netinet/in.h.

2006-05-25  David Cantrell  <dcantrell@redhat.com>

	* isys/nl.h:  Prototypes for netlink_interfaces_list_free() and
	netlink_interfaces_mac2str()...and their helper functions.
	* isys/nl.c:  Several things... In netlink_format_mac_addr, make the
	formatted MAC address uppercase.  Added netlink_interfaces_mac2str which
	searches the interface list and hands you the human-readable MAC address
	for the specified interface.  Added netlink_interfaces_list_free to free
	the interfaces list and associated elements.

2006-05-25  Chris Lumens  <clumens@redhat.com>

	* partRequests.py (LogicalVolumeRequestSpec.sanityCheckRequest):  Don't
	allow logical volumes to be smaller than their volume group's PE size
	(#186412).
	* iw/lvm_dialog_gui.py (VolumeGroupEditor.editLogicalVolume):  Pass PE
	size to sanityCheckRequest for LVs.

	* harddrive.py (HardDriveInstallMethod.badPackageError):  Add a
	method-specific function to explain why the package may not be found.
	* image.py (CdromInstallMethod.badPackageError):  Likewise.
	(NfsInstallMethod.badPackageError):  Likewise.
	(NfsIsoInstallMethod.badPackageError):  Likewise.
	* installmethod.py (badPackageError):  Likewise.
	* urlinstall.py (UrlInstallMethod.badPackageError):  Likewise.

	* yuminstall.py:  Consolidate file fetching error handling into one
	set of urlgrabber error callbacks.  Allow retrying when the error
	dialog is displayed (#183974).

	* harddrive.py (HardDriveInstallmethod):  Don't unset self.tree to fix
	hard drive ISO installs (#185292, #187941).
	* yuminstall.py (YumBackend.doRepoSetup):  Switch media right off to
	make sure hard drive ISO source is mounted.

	* installmethod.py (InstallMethod.switchMedia):  Add to abstract
	class.

	* textw/complete_text.py:  iutil.getArch -> rhpl.getArch.

	* textw/partition_text.py (PartitionTypeWindow.__call__):  Skip
	partition review dialog if it's custom partitioning.

	* scripts/upd-instroot:  Add system-config-date, pam, and audit bits
	into minstg2.img to fix text mode (#191991).

2006-05-24  David Cantrell  <dcantrell@redhat.com>

	* isys/nl.c: Skip Netlink messages with void ARP headers or zero-length
	ARP headers.

2006-05-24  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (PACKAGESGR): Add new pygobject package
	coming soon to a theatre near you

2006-05-23  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2006-05-23  David Cantrell  <dcantrell@redhat.com>

	* isys/Makefile: Add nl.o, glib flags, and a target for nltest.
	* isys/nl.h: Netlink helper functions, the header file.
	* isys/nl.c: Netlink helper functions, the source file.

2006-05-23  Chris Lumens  <clumens@redhat.com>

	* bootloader.py (writeBootloader):  Don't try to pop the wait window
	twice - fixes text UI hang.

	* kickstart.py (AnacondaKSHandlers.doLogicalVolume):  Don't allow
	logical volumes to be smaller than their volume group's PE size
	(#186412).

	* scripts/upd-instroot:  glib2 has moved.

2006-05-23  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* po/kn.po, po/te.po:  Fix po files.

2006-05-23  Peter Jones <pjones@redhat.com>

	* stubs/unicode-lite.c: add strong alias for _nl_category_name_idxs

2006-05-23  Chris Lumens  <clumens@redhat.com>

	* iw/partition_ui_helpers_gui.py (mountptchangeCB):  Fix deprecation
	warning.

2006-05-23  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (LIBDIR): libdir on ppc64 is lib64

2006-05-23  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.  Require slang-devel.

2006-05-23  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec: Bump version.

	* partIntfHelpers.py (isNotChangable):  Allow existing partitions
	containing ISO images to be mounted (#105722).
	(doDeletePartitionByRequest):  Understand new isNotChangable return
	value.

	* iw/partition_dialog_gui.py (PartitionEditor.__init__):  Don't allow
	format and migrate options on protected partitions.
	* iw/raid_dialog_gui.py (RaidCloneDialog.sanityCheckTargetDrives):
	Understand new isNotChangable return value.

	* textw/partition_text.py:  Apostrophe does not mean "look out, here
	comes an S".

	* textw/grpselect_text.py (GroupSelectionWindow.__deselectPackage):
	Fix a traceback on catching an exception.

	* scripts/pkgorder:  Import anaconda_log to fix traceback.

2006-05-22  Peter Jones <pjones@redhat.com>

	* anaconda (parseOptions): add flags for multipath
	* flags.py (Flags): ditto
	* loader2/loader.c (parseCmdLineFlags): ditto

2006-05-22  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py, backend.py: Display full NEVRA in log (#189308)

2006-05-19  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2006-05-19  David Cantrell  <dcantrell@redhat.com>

	* po/fa.po: Fix build.

2006-05-19  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2006-05-19  David Cantrell  <dcantrell@redhat.com>

	* gui.py (handleRenderCallback): Sure would be nice if I could keep
	indentation correct when modifying functions.  Discontinue use of
	gtk.gdk.threads_init() and use gobject.threads_init() because of our
	use of callbacks.  Remove threads_enter/leave wrapper around gtk.main()

	* iw/checklist.py: Remove threads_enter/leave wrapper around gtk.main()
	since we're using gobject.threads_init() now.
	* iw/datacombo.py: Likewise.
	* iw/ipwidget.py: Likewise.
	* iw/pixmapRadioButtonGroup.py: Likewise.
	* iw/release_notes.py: Likewise.

2006-05-18  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-05-18  Chris Lumens  <clumens@redhat.com>

	* partedUtils.py (DiskSet.findExistingRootPartitions):  Fix traceback.

2006-05-18  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images.ppc: Clean up so that ppc64 trees don't have
	32-bit mac stuff

	* bootloader.py: Window isn't always there.

	* anaconda (Anaconda.setMethod): We need bootloader on CDs.

2006-05-18  Paul Nasrat <pnasrat@redhat.com>

	* network.py: enable ipv6 by default

2006-05-18  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Remove BuildRequires: glibc-kernheaders. Was told
	this will break things soon. All I want to be is pedantic.

	* htmlbuffer.py: Removed. Not used anywhere anymore.

2006-05-17  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* kickstart.py (AnacondaKSHandlers.doBootloader): Fix kickstart
	bootloader installation.

	* fsset.py (FileSystemSet.getBootDev): Avoid traceback for live CD

	* bootloader.py (bootloaderSetupChoices): Hack for livecd

	* anaconda (Anaconda.setMethod): Set up our libuser.conf

	* users.py (createLuserConf): Create a libuser.conf that points to
	our rootpath so that things work with live CD, etc

	* security.py (Security.write): Safe for all !test mode
	* instdata.py (InstallData.write): Likewise.

2006-05-17  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Fix runRescue to use anaconda class.
	* rescue.py:  Likewise.

	* upgrade.py (findExistingRoots):  Fix code path to use anaconda
	class.

	* partedUtils.py (DiskSet.findExistingRootPartitions):  Don't try to
	mount protected partitions when looking for an installed system on
	upgrade.

	* gui.py:  Remove more unused methods.

	* bootloader.py (writeBootloader):  Adapted to new kernelVersionList
	return value.
	* packages.py (copyExtraModules):  Moved to yuminstall.py.
	* yuminstall.py (YumBackend.copyExtraModules):  Moved here from
	packages.py.
	(YumBackend.doPostInstall):  Hookup copyExtraModules back up
	(#185344).

2006-05-17  David Cantrell  <dcantrell@redhat.com>

	* installclass.py: Removed steps that don't exist anymore.
	* upgradeclass.py: Likewise.
	* kickstart.py: Likewise.

	* gui.py: 505 lines changes in the name of threads and easier
	readability.

	* bootloader.py (writeBootloader): Pop the WaitWindow at the end of
	function, or we sit in gtk.main() indefinitely.

	* iw/release_notes.py: Wrap gtk.main() in threads_enter/threads_leave.
	Handle dispatch and id parameters differently for now.

	* docs/threads.txt: Notes about threads in anaconda.

2006-05-17  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images: Fix shell thinko

2006-05-16  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: Given that we run upd-instroot inside of
	runroot, don't use runroot constantly inside of upd-instroot

	* scripts/upd-instroot: Remove references to /usr/X11R6.
	* scripts/mk-images: Likewise.
	* scripts/scrubtree: Likewise.

	* scripts/mk-rescueimage.x86_64: Let's autogenerate this from the
	i386 script.
	* scripts/Makefile: Autogenerating.

	* scripts/mk-images.x86: Merge i386 and x86_64 script into one.
	* scripts/mk-images.i386: And then remove the old.
	* scripts/mk-images.x86_64: Likewise.

	* scripts/mk-images.s390: Good bye dead code.
	* scripts/mk-images.i386: Likewise.
	* scripts/mk-images.ppc: Likewise.

	* scripts/mk-images: Try to make it so that ppc64 trees can be
	installable. 

2006-05-16  Peter Jones  <pjones@redhat.com>

	* partitions.py: Handle empty drive lists better when looking for 
	usb-storage and firewire.

2006-05-16  Chris Lumens  <clumens@redhat.com>

	* gui.py:  Removed help-related methods and variables, since help will
	not be coming back.  Removed TextViewBrowser class since it's only
	being used by help.
	* iw/*.py:  Removed htmlTag variable, readHTML method calls, and
	querying help button status.
	* ui/anaconda.glade:  Remove help-related bits.

2006-05-16  David Cantrell  <dcantrell@redhat.com>

	* gui.py:  Remove PYGTK_DISABLE_THREADS environment variable.  Call
	gtk.gdk.threads_init() early on.  Wrap gtk.main() in threads_enter
	and threads_leave calls.

	* htmlbuffer.py:  Wrap gtk.main() in threads_enter and threads_leave
	calls.
	* iw/checklist.py:  Likewise.
	* iw/datacombo.py:  Likewise.
	* iw/ipwidget.py:  Likewise.
	* iw/pixmapRadioButtonGroup_gui.py:  Likewise.

2006-05-16  Jeremy Katz  <katzj@redhat.com>

	* iw/progress_gui.py: Ellipsize text instead of just 
	truncating (Roozbeh Pournader, #191844)

	* loader2/usb.c (usbInitializeMouse): Better mousedev looking,
	less verbose in the case of, eg, built-in (#191814) 

2006-05-15  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version

2006-05-15  Jeremy Katz  <katzj@redhat.com>

	* textw/network_text.py (NetworkGlobalWindow.__call__): Fix up
	some variable references

2006-05-15  Chris Lumens  <clumens@redhat.com>

	* installmethod.py (doMethodComplete):  Unmount media here so it's
	still available for kickstart %post scripts (#191381).
	* yuminstall.py (YumBackend.doInstall):  Move media unmount to later.

	* vnc.py:  Import iutil (#191548).

	* network.py (Network.write):  Put MTU= into the ifcfg script if it
	was used on the command line or kickstart file (#191328).
	(Network.writeKS):  Likewise for --mtu=.
	* loader2/net.c (setKickstartNetwork):  Look for mtu= option in the
	kickstart file.

	* po/te.po:  Fix build.

2006-05-12  David Cantrell  <dcantrell@redhat.com>

	* gui.py:  Moved a lot of the release notes viewer code to the new
	release_notes.py file.  Executing the viewer as a thread now rather
	than forking.

	* iw/release_notes_viewer_gui.py:  Removed.

	* iw/release_notes.py:  Created ReleaseNotesViewer class to run as
	thread from Anaconda.

2006-05-11  Chris Lumens  <clumens@redhat.com>

	* upgrade.py (findExistingRoots):  Fix traceback on dict access.

2006-05-10  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (Kickstart.setSteps):  Don't skip the welcome screen on
	interactive installs so we have somewhere to go back to (#191129).

2006-05-10  Peter Jones  <pjones@redhat.com>

	* isys/lang.c: change NR_KEYS to 128, as it used to be in the kernel
	headers.
	* utils/readmap.c: likewise

2006-05-09  Paul Nasrat <pnasrat@redhat.com>

	* nfsinstall.c, urls.c: Translatable strings (181594)

	* yuminstall: Disable broken kernel-module functionality

2006-05-09  Peter Jones  <pjones@redhat.com>

	* isys/isys.py (driveIsRemovable): Split module checking out to its
	own functions.  Allow usb-storage installs.
	* partitions.py: warn if you're using firewire or usb
	* loader2/modules.c (loadModule): Delay on reloading usb-storage, as
	it takes undefined time as well.  Without this /tmp/scsidisks is
	wrong.
	* loader2/modules.c (writeModulesConf): don't exclude usb-storage
	or sbp2.

2006-05-09  David Cantrell  <dcantrell@redhat.com>

	* isys/nfs_mountversion.h:  Removed since this is a generated file.
	* isys/.cvsignore:  Ignore nfs_mountversion.h
	* anaconda.spec:  We require glibc-kernheaders to generate the
	nfs_mountversion.h file.

2006-05-08  Chris Lumens  <clumens@redhat.com>

	* isys/dasd.c:  More build fixes.

2006-05-08  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version

	* yuminstall.py:  Use YumConf objects instead of writing config files.
	Use repo.get instead of method.getRPMFilename.  Make multirepo support
	work in kickstart.

	* harddrive.py, image.py, installmethod.py, urlinstall.py
	(getRPMFilename):  Remove obsolete method.
	* installmethod.py (InstallMethod.findBestFileMatch):  Likewise.

	* loader2/loader.py (doLoaderMain):  Don't pop up an invisible window
	asking for keymap in cmdline mode.

	* cmdline.py:  Use anaconda object.

	* exception.py (handleException):  Fix traceback in exception handler
	for cmdline mode.

	* product.py:  Add productStamp.

	* yuminstall.py (AnacondaYumRepo.__init__):  Make default repo id use
	product stamp to prevent collisions.

	* docs/kickstart-docs.txt:  Document repo keyword.

2006-05-08  David Cantrell  <dcantrell@redhat.com>

	* loader2/net.c:  Changes to inet_pton() and stuff preparing for IPv6
	integration.  Nothing exciting yet.
	* loader2/ftp.c:  Likewise.
	* loader2/nfsinstall.c:  Likewise.

2006-05-05  David Cantrell  <dcantrell@redhat.com>

	* iw/release_notes_viewer.py:  I want to make classes to, so now we
	have ReleaseNotesViewer class.  It's a start to fixing the many minor
	bugs I have open for it.  More coming later.

2006-05-05  Chris Lumens  <clumens@redhat.com>

	* backend.py (AnacondaBackend.doPostInstall):  Move account creation
	to instdata.py with the root password stuff.
	* instdata.py (InstallData.write):  Create user accounts at the same
	time as we write the root password.
	Load libuser after /etc/shadow has been created in the install root so
	root's password gets written.

	* cmdline.py (setupProgressDisplay):  Use anaconda object.

2006-05-05  Peter Jones  <pjones@redhat.com>

	* kickstart.py: fix bare intf usage to use anaconda class.
	* instdata.py: put a newline on the "rootpw" line

2006-05-04  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.c: Fix the build again

2006-05-04  Paul Nasrat <pnasrat@redhat.com>

	* anaconda.spec:  Bump version

2006-05-04  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Pass anaconda object to setInstallData.
	* dispatch.py:  Finish making non-UI steps use anaconda class.
	* backend.py:  Use anaconda object.
	* bootloader.py:  Likewise.
	* installclass.py:  Likewise.
	* installmethod.py:  Likewise.
	* kickstart.py:  Likewise.
	* network.py:  Likewise.
	* packages.py:  Likewise.
	* partitioning.py:  Likewise.
	* upgrade.py:  Likewise.
	* upgradeclass.py:  Likewise.
	* yuminstall.py:  Likewise.
	* installclasses/*.py:  Likewise.

	* iw/kbd_gui.py:  Added in a shim around system-config-keyboard for
	argument passing needs.

	* gui.py:  Use system-config-keyboard shim.

	* dispatch.py:  Make all UI steps use anaconda class.
	* autopart.py:  Use anaconda object.
	* exception.py:  Likewise.
	* partIntfHelpers.py:  Likewise.
	* iw/*.py:  Likewise.
	* textw/*.py:  Likewise.

	* iw/examine_gui.py:  Remove upgrade package customization.
	* textw/upgrade_text.py:  Likewise.

	* iw/installpath_gui.py:  Removed.
	* textw/installpath_text.py:  Likewise.
	* text.py:  Likewise.

	* anaconda:  Fix callback options.  Correct path for s-c-keyboard.
	Fix up exception handling arguments.

	* upgrade.py (findExistingRoots):  Reference cmdline dict correctly.

	* dispatch.py (installSteps):  Remove anaconda object argument as it
	is now implied for every step.
	(Dispatcher.bindArgs):  Removed.  Call functions directly instead of
	using apply.
	* gui.py (InstallControlWindow.setScreen):  Call functions directly
	instead of using apply.
	* text.py (InstallInterface.run): Likewise.

2006-05-03  Chris Lumens  <clumens@redhat.com>

	* backend.py (AnacondaBackend.doPostInstall):  Enable/disable services
	and create users after installation.
	* instdata.py:  Remove password-related code.
	* kickstart.py (AnacondaKSHandlers.doServices,
	AnacondaKSHandlers.doUser):  Add new command handlers.
	* users.py:  Added back in code to create users, since kickstart can
	do this now.

	* kickstart.py (AnacondaKSParser.handleCommand):  Don't traceback if
	pykickstart gets support for a new command before anaconda.

	* instdata.py (InstallData.writeKS):  Fix root password traceback.

	* anaconda:  Clean up dispatcher call mess.  Get rid of instPath.
	* dispatch.py:  Start to make things use anaconda class.
	* autopart.py (doAutoPartition):  Use anaconda object.
	* packages.py (betaNagScreen):  Use anaconda object.
	(queryUpgradeContinue):  Moved back to upgrade.py.
	* partitioning.py (partitionObjectsInitialize):  Use anaconda object.
	* upgrade.py (findRootParts, upgradeMountFilesystems,
	(upgradeSwapSuggestion):  Use anaconda object.
	(queryUpgradeContinue):  Moved back from packages.py.
	* iw/confirm_gui.py:  Change import.
	* iw/upgrade_swap_gui.py:  Likewise.
	* iw/zipl_gui.py:  Remove unused code.

2006-05-03  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.c: Don't include kernel fs headers -- the e2fsprogs
	ones have what we need.

2006-05-01  Jeremy Katz  <katzj@redhat.com>

	* isys/dasd.c: Fix the s390 build for real with a temporary hack

2006-05-01  Jeremy Katz  <katzj@redhat.com>
	
	* anaconda.spec: Bump version.

	* isys/net.h: Include <linux/types.h> for ethtool.h
	* isys/isys.c: Hack to fix compile error with new kernel headers
	* isys/dasd.c: More build fixage

2006-05-01  Jeremy Katz  <katzj@redhat.com>
	
	* anaconda.spec: Bump version.

	* bootloader.py: Clean up imports
	(getBootloader): Use isolinuxBootloader for the livecd case.

	* anaconda (rootpath_cb): Allow using --rootpath=cd:/path to
	specify that we're doing a livecd.  This is likely to change...
	* flags.py (Flags.__init__): Add livecd flag

	* instdata.py (InstallData.write): It's safe to run authconfig
	with --nostart in rootpath mode.
	* firewall.py (Firewall.write): Likewise for lokkit.

	* bootloader.py (writeBootloader): Don't traceback if there's no
	rootdev (eg, rootpath mode) so that we can have a bootloader setup
	for live CDs. 

	* docs/kickstart-docs.txt: Update for nfs mount options.
	* docs/command-line.txt: Likewise.

	* loader2/nfsinstall.c: Handle nfs mount options (Dave Lehman, #168384)
	* loader2/nfsinstall.h: Add mount opts to struct

2006-05-01  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Remove syslogd mode.
	* syslogd.py:  Use syslogd command, not anaconda.
	* scripts/upd-instroot:  Add syslogd-stub.

	* anaconda (startVNCServer):  Moved to vnc.py.
	* vnc.py (startVNCServer):  Likewise.

	* anaconda:  Refactor into functions.
	* vnc.py (getVNCPassword):  Moved here from anaconda.

	* anaconda (Anaconda):  Stub out anaconda class.

2006-04-27  Chris Lumens  <clumens@redhat.com>

	* partitions.py (Partitions.writeKS):  Emit --useexisting and --noformat
	for VGs, RAID, and LVs (#189123).

	* yuminstall.py (AnacondaYum._run):  Warn if there's not enough space
	for an upgrade (#189022).

2006-04-26  Jeremy Katz  <katzj@redhat.com>

	* network.py (Network.__init__): Don't reconfig network if using
	rootpath mode

	* anaconda: Remove dead comments

	* network.py (Network.lookupHostname): Don't change network config
	in rootpath mode (#185930)

	* anaconda: Don't symlink things that don't exist.

	* packages.py (setupTimezone): Don't change timezone on rootpath
	(Jane Dogalt, #185930)

2006-04-26  Chris Lumens  <clumens@redhat.com>

	* isys/isys.py (inet_ntoa, inet_aton):  Pass the right types to the
	socket module to make manual IP configuration work again.

2006-04-20  Chris Lumens  <clumens@redhat.com>

	* iw/timezone_gui.py (TimezoneWindow.getScreen):  Default UTC box to
	checked as long as we didn't find a Windows partition.

2006-04-19  David Cantrell  <dcantrell@redhat.com>

	* yuminstall.py (AnacondaYumConf):  Better regexp for trimming the base
	disc dir name.

2006-04-19  Jesse Keating  <jkeating@redhat.com>

	* scripts/buildinstall: don't pass version, I was dumb.

2006-04-19  Chris Lumens  <clumens@redhat.com>

	* command-stubs/rescue-startx-stub:  Removed.
	* scripts/upd-instroot:  Likewise.

	* yuminstall.py (YumBackend.doPostInstall):  Different message on
	upgrade (#189312).

2006-04-18  David Cantrell  <dcantrell@redhat.com>

	* urlinstall.py:  Remove some traceonly mode stuff.

	* yuminstall.py (AnacondaYumConf):  Make a guess as to whether or not
	the user is doing an HTTP install using loopback mounted ISO 9660
	images.  Add all possible CD paths to the baseurl in anaconda's
	yum.conf and let it run (#189097, #183999).

2006-04-18  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-04-18  Jesse Keating <jkeating@redhat.com>

	* scripts/buildinstall.py: Pass version on to mkstamp for discinfo files.

2006-04-12  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Fix handling of method for ftp.

2006-04-12  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py:  Don't download things twice (183654)

2006-04-11  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Make some symlinks earlier.

	* installclass.py (BaseInstallClass.setRootPassword):  Removed.
	* instdata.py (InstallData):  Use libuser for handling the root
	password.
	* kickstart.py (AnacondaKSHandlers.doRootPassword):  Use instdata.
	* users.py:  Removed, since we don't deal with non-root accounts
	anymore.
	* iw/account_gui.py:  Use new password handling system.
	* textw/userauth_text.py:  Likewise.

2006-04-10  David Cantrell  <dcantrell@redhat.com>

	* scripts/mk-rescueimage.i386:  Do not call sys.exit(0) from usage().
	Modify usage text to indicated productpath is required.  Remove test
	for optional productpath and just take the fourth argument (#188011).
	* scripts/mk-rescueimage.ppc:  Likewise.
	* scripts/mk-rescueimage.x86_64:  Likewise.

2006-04-04  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* anaconda:  Use rhpxl.monitor.Modes class.

	* installclass.py (BaseInstallClass.setVideoCard):  Use the right
	variable name.  If there's no list of drivers available, trust what we got
	from the user.
	(requireDisplayMode):  Removed.

	* scripts/upd-instroot:  Add xorg-x11-server-Xorg to $PACKAGES for the
	modes files.  Add libuser as well for password stuff.

2006-03-31  Chris Lumens  <clumens@redhat.com>

	* anaconda (setupPythonUpdates):  Allow updates to contain entire
	directories we forgot in an image.

	* scripts/pkgorder:  iutil.rmrf -> shutil.rmtree.

2006-03-30  Chris Lumens  <clumens@redhat.com>

	* backend.py (AnacondaBackend.initLog):  iutil.rmrf -> shutil.rmtree.
	* packages.py: iutil.copyFile -> shutil.copyfile.
	* timezone.py:  Likewise.
	* yuminstall.py:  Likewise.
	* isys/isys.py (hardDriveDict):  iutil.getArch -> rhpl.getArch.
	* iw/congrats_gui.py:  Likewise.

	* instdata.py (InstallData):  Don't use Accounts anymore.
	* users.py (Accounts):  Removed.

2006-03-28  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* scripts/Makefile:  Remove pythondeps.

2006-03-28  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-03-28  David Cantrell  <dcantrell@redhat.com>

	* fsset.py (swapFileSystems.mount): If the signature is SWAP-SPACE,
	raise OldSwapError so we can ask the user to reformat or skip it
	(#122101).

	* fsset.py (FileSystemSet.turnOnSwap): Added swapErrorDialog function
	to handle the OldSwapError and SuspendError exceptions.

2006-03-28  Chris Lumens  <clumens@redhat.com>

	* command-stubs/list-harddrives-stub, command-stubs/raidstart-stub,
	command-stubs/raidstop-stub:  Import anaconda_log (#187119).

2006-03-27  David Cantrell  <dcantrell@redhat.com>

	* exception.py (handleException): iutil.copyFile -> shutil.copyfile.

	* fsset.py (swapFileSystems.mount): If the signature on the swap device
	indicates software suspend, raise SuspendError (#186018).

	* fsset.py (FileSystemSet.turnOnSwap): On SuspendError, alert the user
	and offer Skip, Format, or Reboot. On skip, remove the partition from
	self.entries. On format, format swap device and mount it, on reboot
	reboot. On blitzen... (#186018).

2006-03-27  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Use logLevelMap from anaconda_log instead of duplicating.
	* anaconda_log.py:  Add logLevelMap.
	* kickstart.py (AnacondaKSHandlers.doLogging):  Add support for
	logging function.
	(AnacondaKSHandlers.doRepo):  Add stub function.

	* yuminstall.py (simpleCallback.callback):  Pass in timer (#186761).

2006-03-24  Chris Lumens  <clumens@redhat.com>

	* loader2/urls.c (urlinstStartTransfer):  Be a little less zealous
	with slashes in URLs.

2006-03-24  David Cantrell  <dcantrell@redhat.com>

	* fsset.py:  Use resource.getpagesize() instead of isys.getpagesize().
	* partedUtils.py:  Likewise.

	* isys/isys.c:  Removed doGetPageSize().
	* isys/isys.py:  replace getpagesize() with resource.getpagesize().

	* iutil.py:  Change isys.mknod to os.mknod.  Change isys.makedev to
	os.makedev.

	* anaconda: Changed iutil.getArch() to rhpl.getArch().
	* autopart.py: Likewise.
	* bootloader.py: Likewise.
	* exception.py: Likewise.
	* fsset.py: Likewise. Also fix typo 'resierfs' -> 'reiserfs'.
	* gui.py: Likewise.
	* image.py: Likewise.
	* installclass.py: Likewise.
	* iutil.py: Likewise.
	* network.py: Likewise.
	* packages.py: Likewise.
	* partedUtils.py: Likewise.
	* partitions.py: Likewise.
	* text.py: Likewise.
	* upgrade.py: Likewise.
	* upgradeclass.py: Likewise.
	* xsetup.py: Likewise.
	* yuminstall.py: Likewise.

2006-03-24  Peter Jones  <pjones@redhat.com>

	* Makefile.inc: Fix selinux conditional inclusion.
	* isys/Makefile: ditto

2006-03-23  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Remove customClass.

	* kickstart.py (Kickstart.setSteps):  Warn if %packages is given on
	upgrade.

	* partedUtils.py (DiskSet.openDevices):  Ignore disks listed in
	ignoredisks, even if we have clearpart --all (#186438).

	* loader2/urls.c (convertURLToUI):  Check for NULL (#186210).

2006-03-22  David Cantrell  <dcantrell@redhat.com>

	* fsset.py (reiserfsFileSystem):  Added missing labelDevice method.
	(#183183).

	* fsset.py (LabelFactory):  Added isLabelReserved method (#183183).

	* fsset.py (FileSystemSet.labelDevice):  Call isLabelReserved in the
	label factory to see if we should relabel the device.  Handles weird
	corner cases with existing partitions (#183183).

	* isys/isys.py (readReiserFSLabel_int):  Problem reading reiserfs
	labels, moved label reading code to _inside_ the for loop so it
	actually does some thing useful (#183183).

2006-03-22  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Use optparse instead of isys.getopt.  Remove traceonly
	mode.

	* isys/isys.py (getopt):  Mark as deprecated.

	* scripts/pythondeps:  Traceonly mode must die.
	* scripts/upd-instroot:  Move rhpxl to the non-X list (#185840).

	* desktop.py:  Remove ENABLE_DESKTOP_CHOICE crud.

	* isys/isys.c, isys/isys.py, isys/smp.c, isys.smp.h:  Remove
	summitavailable support.

	* constants.py:  Removed DEBUG since we can use cmdline for that.
	* flags.py:  Add a dictionary representing /proc/cmdline.
	* fsset.py, gui.py, installclass.py, instdata.py, iutil.py,
	network.py, partedUtils.py, text.py, yuminstall.py:  Use flags instead
	of opening /proc/cmdline yet again.

	* isys/isys.c, isys/isys.py:  Remove functions already in python.

2006-03-21  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-03-21  Chris Lumens  <clumens@redhat.com>

	* image.py (CdromInstallMethod.systemMounted):  Use a WaitWindow for
	now.

	* iutil.py:  Remove lots of unused methods and methods that are better
	implemented in the python library.  Add DeprecationWarnings to things
	that we're now just wrapping.

	* textw/timezone_text.py (TimezoneWindow.getTimezoneList):  Use
	system-config-date instead of our own stuff.

2006-03-21  Paul Nasrat <pnasrat@redhat.com>

	* isys/isys.py: i5 returns as pSeries! (#186070)

2006-03-21  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot: Let's see what size impact not doing the
	traceonly stuff has.

2006-03-14  Chris Lumens  <clumens@redhat.com>

	* lang-table:  Remove Amharic and Thai.

2006-03-14  Paul Nasrat <pnasrat@redhat.com>

	* sortedtransaction.py: Remove from required media on last package
	(#185437)

2006-03-13  Jeremy Katz  <katzj@redhat.com>

	* packages.py: Remove some obsolete code, convert a little bit of
	copyExtraModules (... which needs to be hooked back up)

	* gui.py: No longer import rpm
	* yuminstall.py: Add specspo bits here instead

	* exception.py (dumpException): Remove grpset code.
	* instdata.py (InstallData.reset): Likewise.

2006-03-13  Matt Wilson  <msw@rpath.com>

	* dispatch.py: Remove obsolete code.
	* floppy.py: Likewise.
	* language.py: Likewise.
	* upgrade.py: Likewise.

	* Makefile.inc: Add flag for whether or not to use SELinux.
	* isys/Makefile: Conditionalize SELinux.
	* isys/isys.c: Likewise.
	* loader2/Makefile: Likewise.
	
2006-03-13  Jeremy Katz  <katzj@redhat.com>

	* iw/lvm_dialog_gui.py (VolumeGroupEditor.createPEOptionMenu): Cap
	at 128M instead (#185272)

	* dmraid.py: Fix syntax error (#185275)
	* fsset.py (swapFileSystem.mount): Likewise.
	* product.py: Likewise.

2006-03-13  Paul Nasrat   <pnasrat@redhat.com>

	* yuminstall.py (YumBackend.doPostSelection):  Don't clobber 
	network on upgrades (#183203).

2006-03-13  Chris Lumens  <clumens@redhat.com>

	* harddrive.py (HardDriveInstallMethod.mountMedia):  Prompt for
	missing images like we do on NFS ISO installs (#185274).
	(HardDriveInstallMethod.__init__):  Add currentMedia.

	* yuminstall.py (YumBackend.doPostSelection):  Check the obvious
	(#185172).

2006-03-10  Chris Lumens  <clumens@redhat.com>

	* exception.py (handleException):  String consistency (#181916).

	* fsset.py (AutoFileSystem.mount):  Don't traceback trying to mount
	auto filesystems of types we don't actually support (#182730).

2006-03-09  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py: ignore conflicts on upgrade (#184461)
	* kickstart.py: Don't show group selection on upgrade (#184528) 

2006-03-09  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (getDownloadPkgs):  Don't try to download packages
	we're erasing (#184531).

2006-03-07  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images.x86_64: More fixing for new xen kernel naming.
	* scripts/mk-images.i386: Likewise.
	* scripts/mk-images: Likewise.

	* packages.py (setFileCons): Add some dirs as a hack (#182252)

2006-03-06  Jeremy Katz  <katzj@redhat.com>

	* scripts/mkrescueimage.i386: Fix text here too
	* scripts/mkrescueimage.x86_64: Likewise.
	
2006-03-07  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-03-06  Peter Jones <pjones@redhat.com>

	* yuminstall.py: fix whitespace

2006-03-06  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py: yum 2.6 runTransaction returns errorlist so
	generate more meaningful errors.

2006-03-06  Jeremy Katz  <katzj@redhat.com>

	* anaconda: Add magic 'vesa' flag to force the X driver to be vesa
	instead of the native
	* loader2/loader.c: Add it here.

	* yuminstall.py (YumBackend.getBestKernelByArch): New xen kernel
	package naming

2006-03-06  David Cantrell  <dcantrell@redhat.com>

	* yuminstall.py (doPostInstall): Only set runlevel 5 if we're running
	the installer in graphical mode (#184013).

2006-03-06  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (doPostSelection):  Disable size check on upgrade
	(#184112).
	(urlgrabberFailureCB):  Use urlgrabber's failure callback to handle
	retries and catch when files cannot be downloaded.

2006-03-04  Jeremy Katz  <katzj@redhat.com>

	* backend.py (doPostSelection): Pass direction
	* dispatch.py (installSteps): Likewise.
	* yuminstall.py (doPostSelection): Likewise.

2006-03-03  Paul Nasrat <pnasrat@redhat.com>

	* anaconda.spec: Bump version.

2006-03-03  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (AnacondaKSParser.addPackages):  @Everything -> "*"

	* backend.py (doPostSelection):  Support moving backwards.
	* yuminstall.py (YumBackend.doPostSelection):  Error if there's not
	enough disk space to install the selected packages (#183878).
	(YumBackend.selectPackage):  Support package globs (#177621).

2006-03-03  David Cantrell  <dcantrell@redhat.com>

	* rescue.py: Added runShell() to handle spawning the tty1 shell for
	rescue mode and set the controlling tty (#182222).

	* loader2/init.c: Do not disable Ctrl+C, Ctrl+Z, and friends if we're
	starting in rescue mode. Set controlling tty before dup2() calls.

	* textw/language_text.py (LanguageWindow.__call__): Sort list of
	available languages.

2006-03-03  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-03-02  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot: Include the second field of lang-table so
	we don't lose sr@Latn (#182591)

	* yuminstall.py (YumBackend.selectFSPackages): Select needed
	filesystem entries (#183271)

2006-03-02  Chris Lumens  <clumens@redhat.com>

	* isys/isys.py (compareNetDevices):  Add a function to more
	intelligently sort network device names (#166842).
	* textw/network_text.py:  Use compareNetDevices.

2006-03-02  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py: Conditionals in yum now

2006-02-28  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* language.py (expandLangs): Handle locales like sr@Latn 
	properly (#182591)

2006-02-28  David Cantrell  <dcantrell@redhat.com>

	* iw/autopart_type.py: Make the partitioning type combo box wider.

2006-02-28  Jeremy Katz  <katzj@redhat.com>

	* installclasses/fedora.py: Don't display Xen

	* yuminstall.py (YumSorter.__init__): Define conditionals in the class

2006-02-27  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* isys/eddsupport.c (uniqueSignatureExists): Fix segfault (#182589)

	* loader2/keymaps-x86_64: Add a keymap override
	* loader2/keymaps-i386: Likewise.

2006-02-27  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (AnacondaKSHandlers.doRaid):  "" vs. None for making
	swap on RAID work again (#176537).

	* whiteout.py:  Break gtk <-> hicolor-icon-theme cycle (#183018).

2006-02-24  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-02-24  David Cantrell  <dcantrell@redhat.com>

	* anaconda: If running text mode installer and missing $LANG, set
	it to en_US.UTF-8 before firing off intf.

	* language.py (Language.fixLang): Extra safety net for LANG=C.

	* scripts/upd-instroot: Added Vera.ttf, VeraBd.ttf, and VeraMono.ttf
	to the stage2.img list.

2006-02-24  Jeremy Katz  <katzj@redhat.com>

	* bootdisk/i386/options.msg: Be clearer about askmethod (#182535)
	* bootdisk/x86_64/options.msg: Likewise.

2006-02-24  Peter Jones  <pjones@redhat.com>

	* isys/isys.py (handleSegv): Fix python shim (#182739).

2006-02-24  Chris Lumens  <clumens@redhat.com>

	* isys/isys.py (handleSegv):  Add python shim (#182739).

2006-02-23  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-02-23  David Cantrell  <dcantrell@redhat.com>

	* loader2/dietstubs.c: Removed bogl stuff.

2006-02-23  Chris Lumens  <clumens@redhat.com>

	* exception.py:  Make the exception dumping code smart enough to
	ignore all references to things in our skip list.

2006-02-23  Peter Jones  <pjones@redhat.com>

	* isys/isys.c: add backtrace printing signal handler
	* anaconda: set isys.handleSegv() as the SIGSEGV handler

2006-02-23  Jeremy Katz  <katzj@redhat.com>

	* scripts/pkgorder: Don't get warnings spewed with new yum 

2006-02-23  Paul Nasrat     <pnasrat@redhat.com>

	* yuminstall.py: Make conditional packages on deps work

2006-02-23  David Cantrell  <dcantrell@redhat.com>

	* yuminstall.py: Suppress 'repository is missing name in config'
	warning.

	* language.py: Use fixLang in a few more places.  Set SYSFONT to
	selected lang's font in lang-table.  Modified getCurrent to return
	selected lang.

	* text.py (InstallInterface.run): The Language class handles the
	non-working languages for text mode.  Only call getFontFile to see
	if we should tell the user the selected lang won't work in text
	mode.

	* textw/language_text.py (LanguageWindow.__call__): None -> none

2006-02-23  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/pkgorder: Use a chroot, enable sqlite.  This should
	hopefully fix the ordering of packages across CDs.

	* exception.py (dumpClass): More skipping

2006-02-23  David Cantrell  <dcantrell@redhat.com>

	* text.py (InstallInterface.run): Initialize oldlang.

2006-02-22  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec: Bump version.

2006-02-22  Paul Nasrat  <pnasrat@redhat.com>

	* backend.py: Call upgrade check
	* yuminstall.py: Check version and packages to upgrade
	* upgrade.py: Remove unused code.

2006-02-22  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.py (hardDriveDict): Remove ide raid checking
	* isys/isys.c: Remove support code.
	* isys/hpt.c: Remove.
	* isys/pdc.c: Remove.
	* isys/silraid.c: Remove.
	* isys/Makefile: Don't link removed files.

	* lang-table: Set all previously bterm using languages to "none"
	for the fact that we can't handle them in text-mode anymore
	* textw/language_text.py (LanguageWindow.__call__): Remove bterm
	special-casing. 
	* text.py (InstallInterface.run): Likewise.
	* loader2/lang.c (setupLanguage): Likewise.
	* language.py (Language.fixLang): No more "bterm" font
	* stubs/unicode-lite.c: Don't require wlite
	* stubs/Makefile: Don't link against wlite
	* loader2/Makefile: No more linking to bterm here either
	* isys/lang.c: Remove bterm support code.
	* isys/lang.h: And declaration.
	* isys/Makefile (LOADLIBES): No more linking to bterm
	* isys/isys.c (start_bterm): Remove this
	* anaconda.spec (BuildPreReq): Bye-bye bogl

2006-02-22  Peter Jones <pjones@redhat.com>

	* iw/bootloader_main_gui.py (MainBootLoaderWindow): Don't use
	underline in device names for hotkeys.
	* iw/bootlocwidget.py (BootloaderLocationWidget): same

2006-02-22  Jeremy Katz  <katzj@redhat.com>

	* rescue.py (runRescue): Mount /selinux in the chroot

2006-02-22  David Cantrell  <dcantrell@redhat.com>

	* yuminstall.py (AnacondaYum.run): Fixed typo.
	* iw/autopart_type.py: Import _ and N_ from rhpl.translate.
	* installclasses/fedora.py (InstallClass.setGroupSelection): Take the
	intf parameter.
	* scripts/upd-instroot: Remove all bogl-related things.
	* scripts/mk-images: Remove all bogl-related things.
	* scripts/mk-images.s390: Remove all bogl-related things.

2006-02-21  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-02-21  David Cantrell  <dcantrell@redhat.com>

	* language.py (Language.__init__): Set display_mode to "g" by default.
	* language.py (Language.fixLang): Read localeInfo data to determine
	which languages need to use en_US.UTF-8 in text mode.

2006-02-21  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-02-21  David Cantrell  <dcantrell@redhat.com>

	* anaconda: Pass the display mode we're running in to InstallData.
	* instdata.py: Store the the display mode the installer is using.
	* language.py: For languages we can't display during installation
	in text mode, default to en_US.UTF-8, but write out the correct
	language for the final installation (#180417).

2006-02-21  Bill Nottingham  <notting@redhat.com>

	* utils/trimpciids: Force all strings to uppercase, for matching (#182231)

2006-02-21  Paul Nasrat   <pnasrat@redhat.com>

	* yuminstall.py: Try to be smarter if no required media (assume 
	single disc)
	* scripts/makestamp.py: Use an integer for default discNum

2006-02-21  Chris Lumens  <clumens@redhat.com>

	* iw/autopart_type.py (PartitionTypeWindow.getScreen):  Mark for
	translation (#181826).
	* textw/partition_text.py (PartitionTypeWindow.__call__):  Likewise.

2006-02-20  Jeremy Katz  <katzj@redhat.com>

	* loader2/net.c: Actually set mtu

	* upgrade.py (upgrade_remove_blacklist): Add dev to remove 
	list (#181593)

2006-02-19  Jeremy Katz  <katzj@redhat.com>

	* loader2/hdinstall.c: Try to mount as ext3 also now that we have
	the module

2006-02-17  Paul Nasrat   <pnasrat@redhat.com>

	* kickstart.py, yuminstall.py: Sanity check unknown packages & groups 
	* backend.py, dispatch.py, installclass.py: Pass intf to base package
	and group selection

2006-02-17  Chris Lumens  <clumens@redhat.com>

	* exception.py (handleException):  Reboot after writing to floppy or
	remote (#181745).

	* yuminstall.py (simpleCallback.callback):  Try again to get fn.

	* anaconda:  Don't traceback if we find an included file that doesn't
	exist while looking for vnc options early.

	* kickstart.py (Kickstart.setSteps):  Show confirm in interactive
	installs (#181741).
	(Kickstart.setSteps):  Show package selection if none were listed.
	(Kickstart.setSteps):  Reboot automatically in interactive mode if
	told to do so (#181743).
	(KickstartPreParser.__init__):  Don't traceback if we find an include
	file that doesn't exist while looking for %pre scripts (#181760).
	(KickstartHandlers.doLogicalVolume):  Skip partitioning if a logical
	volume was specified (#181806).
	(KickstartHandlers.doRaid):  Likewise for RAID.

2006-02-16  Chris Lumens  <clumens@redhat.com>

	* iw/timezone_gui.py (TimezoneWindow.getScreen):  Initialize UTC
	checkbox (#181737).

2006-02-14  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-02-14  Bill Nottingham  <notting@redhat.com>

	* lang-table: enable Arabic for text mode.

2006-02-14  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.h: Bump minimum RAM amounts for install, graphical
	install and when we need to enable swap early

2006-02-14  David Cantrell  <dcantrell@redhat.com>

	* gui.py:  Disable Next/Back while installing packages (#181357).

2006-02-14  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Add sqlitecache and sqlitesack to traceonly mode.

	* network.py (hasActiveNetDev):  Moved here from vnc.py.
	* vnc.py:  Likewise.

	* gui.py (ExceptionWindow.__init__):  Remove remote button if there's
	no network.
	* text.py (ExceptionWindow.__init__):  Likewise.

2006-02-14  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.selectConditionalPackages): Right
	namespace for selectPackage

2006-02-14  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version

	* yuminstall.py (YumBackend.getBestKernelByArch): Don't add a
	kernel if one is already selected. 

2006-02-13  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images.x86_64: Make guest kernel globbing more reliable.
	* scripts/mk-images.i386: Likewise.

2006-02-13  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* yuminstall.py (YumBackend.doPostSelection): Only import upgrade
	as needed, so that we don't need the full chain of deps for pkgorder

2006-02-13  Chris Lumens  <clumens@redhat.com>

	* gui.py:  Don't care about missing help text.

	* docs/kickstart-docs.txt:  Update kickstart docs.

2006-02-13  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/mk-images.x86_64 (SYSLINUX): More x86_64 xen kernel fixes

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: /lib doesn't always exist

	* scripts/mk-images (kerneltags): Fix syntax error

2006-02-12  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* instdata.py (InstallData.writeKS): Don't traceback if nfs:/// is
	being used like file:///.  Useful for live CD case.

2006-02-10  Paul Nasrat   <pnasrat@redhat.com>

	* yuminstall.py: use group.selected rather than lists
	* yuminstall.py: support conditional packages for lang support (#178029)

2006-02-10  Chris Lumens  <clumens@redhat.com>

	* isys/ethtool.c:  Remove reference to ethtool-copy.h.
	* isys/net.h:  Use linux/ethtool.h instead.

	* kickstart.py:  Fix some pychecker warnings.

2006-02-10  David Cantrell  <dcantrell@redhat.com>

	* textw/progress_text.py (InstallProgressWindow.setPackage):  If a
	package name is longer than 48 chars, trim to 45 and add '...' on
	the end (#180469).

2006-02-09  Jeremy Katz  <katzj@redhat.com>

	* isys/linkdetect.c: Use linux/mii.h and linux/ethtool.h now
	* isys/mii.h: Remove
	* isys/ethtool-copy.h: Remove
	
2006-02-09  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-02-09  Jeremy Katz  <katzj@redhat.com>
	
	* loader2/loader.c (startNewt): Fix my dumb typo

2006-02-09  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2006-02-09  Patrick Mansfield <patmans@us.ibm.com>

	* anaconda: Add handling of iscsi flag
	* flags.py: Add iscsi flag
	* installclass.py: Add iscsi step
	* dispatch.py: Add iscsi step.
	* gui.py: Add iscsi step.
	* text.py: Add iscsi step
	* instdata.py: Add iscsi object
	* iscsi.py: Add main iscsi code
	* iw/iscsi_gui.py: Add graphical iSCSI configuration
	* ui/iscsi-config.glade: Glade-file for iSCSI config
	* textw/iscsi_text.py: Add text mode iSCSI configuration
	* scripts/mk-images (SCSIMODS): Add iscsi modules
	* scripts/upd-instroot: Add iscsi tools
	
2006-02-09  David Cantrell  <dcantrell@redhat.com>

	* image.py (NfsIsoInstallMethod.mountImage):  Present dialog and retry
	button if the requested CD image is not on the NFS server.  User can
	ask the BOFH to put the required image in place and click retry.
	(#109051).

	* image.py (findIsoImages):  stat the path before searching for ISOs,
	which seems to flush the NFS cache and new images are picked up.

2006-02-09  Chris Lumens  <clumens@redhat.com>

	* scripts/upd-instroot (KEEPFILEGR):  Move modes data from rhpxl to
	xorg.

2006-02-08  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images (kerneltags): x86_64 kernel-xen-guest is a reality

	* loader2/loader.c (doShell): Add support for exec'ing busybox in
	msh mode if it's present on suspend.  We won't include it in
	standard initrds, but for debugging, the ability to chain multiple
	initrds is going to be beautiful.

2006-02-08  Paul Nasrat   <pnasrat@redhat.com>

	* anaconda.spec: Bump version

2006-02-08  David Cantrell  <dcantrell@redhat.com>

	* fssey.py (mountCompare):  Handle bind mounts correctly so that
	filesystems are mounted in the correct order for upgrades (#160911)

2006-02-08  Paul Nasrat   <pnasrat@redhat.com>

	* yuminstall.py: upgrade blacklist and don't create root nodes
	* yuminstall.py: disable repo conf, some pychecker fixes
	* anaconda.spec: require strip
	* scripts/mk-images: Strip loader here
	* loader2/Makefile: Don't strip loader so we get debuginfo

2006-02-08  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (AnacondaKSHandlers.doVolumeGroup):  Suggest a fix in
	the error message (#174597).

2006-02-07  David Cantrell  <dcantrell@redhat.com>

	* isomd5sum/.cvsignore:  Ignore .depend.

	* gui.py (InstallerControlWindow.nextClicked):  Force focus to the
	Next button on the keyboard screen.  Otherwise, pressing Enter will
	load the release notes.

2006-02-07  Chris Lumens  <clumens@redhat.com>

	* dispatch.py (installSteps):  Remove extra network step.

2006-02-06  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* backend.py (writeConfiguration): Include writing out instdata so
	that things like root password, etc all work again (#180310)

	* dispatch.py (installSteps): Pass id and instPath to writeconfig again
	
2006-02-06  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* fsset.py (FileSystemSet.mkDevRoot): Don't create it if it
	already exists (eg, lvm)

	* partitions.py (Partitions.setFromDisk): Fix reading of chunksize
	from pre-existing RAID (#178291)

2006-02-06  Patrick Mansfield <patmans@us.ibm.com>

	* loader2/hardware.c: Load iscsi modules if requested.
	* loader2/loader.c: Add iscsi flag parsing.  Ask for network if
	iscsi is being used.
	* loader2/loader.h: Add iscsi flag.

2006-02-06  Peter Jones  <pjones@redhat.com>

	* iutil.py (makeDriveDeviceNodes): don't try to make devices in
	mapper/

	* partedUtils.py (get_partition_name): use the same rules for
	partition naming as parted and iutil.py

2006-02-06  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec:  Build requires libXt-devel.

	* loader2/loader.c:  Pass --loglevel if nopass is set or not.

	* iw/congrats_gui.py (CongratulationWindow):  Force buttonBar on
	main installer screen to active in case release notes viewer is
	running (#179924).

2006-02-06  Jeremy Katz  <katzj@redhat.com>

	* fsset.py (FileSystemSet.mkDevRoot): Ensure /dev/root exists
	before stat'ing (Patrick Mansfield, <patmans AT us DOT ibm DOT com>

	* yuminstall.py (AnacondaYum.isGroupInstalled): Add method that
	pirut depends on now

	* scripts/upd-instroot (KEEPFILE): More sqlite (#171232)

2006-02-03  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.doGroupSetup): Oops, not the big big
	hammer :-)

	* anaconda.spec: Bump version.

	* yuminstall.py (YumBackend.doGroupSetup): Add a hack to remove
	the Xen group if we're running on xen (#179387)

	* iw/task_gui.py: Adjust for dynamic set of tasks
	* ui/tasksel.glade: Don't list tasks in the glade file, they're
	now auto-generated.
	* textw/task_text.py (TaskWindow.__call__): Likewise.

	* dispatch.py (installSteps): Pass new arg to tasksel step

	* installclasses/fedora.py (tasks): Define set of tasks to show on 
	task selection screen here.
	* installclass.py (tasks): Parent placeholder.

2006-02-03  Peter Jones  <pjones@redhat.com>

	* fsset.py (swapFileSystem): Fix format strings in call to
	labelDevice.  Add correct swapFileSystem.maxLabelChars .

	* yuminstall.py (YumBackend.writeConfiguration): self.ayum.repos,
	not self.repos .

2006-02-03  Chris Lumens  <clumens@redhat.com>

	* dispatch.py (installSteps):  Fix arguments to writeConfiguration
	(#179928).

	* exception.py:  Trim out package information yet again.

2006-02-03  David Cantrell  <dcantrell@redhat.com>

	* iw/lvm_dialog_gui.py (VolumeGroupEditor.editLogicalVolume):
	Increase logical volume label field to 32 characters.  Changed
	dialog text with a better explanation for increasing available
	space since you can't change the physical extent size after a
	group has been created. (#174661).

2006-02-03  Peter Jones  <pjones@redhat.com>

	* packages.py (setFileCons): set contexts on blkid.tab{,.old}

2006-02-03  Peter Jones  <pjones@redhat.com>

	* fsset.py (swapFileSystem.labelDevice): don't put "mapper/" in the
	swap label

2006-02-03  Jeremy Katz  <katzj@redhat.com>

	* loader2/module-info: Update for current driver set.

	* anaconda (dispatch): Patch to update steps skipped for rootpath 
	mode from Jasper Hartline <jasperhartline AT adelphia DOT net>

2006-02-02  David Cantrell  <dcantrell@redhat.com>

	* isys/isys.py (readReiserFSLabel):  Support all valid reiserfs
	block sizes.

2006-02-02  David Cantrell  <dcantrell@redhat.com>

	* scripts/upd-instroot:  Add reiserfstune.

	* isys/isys.py:  Added readReiserFSLabel() and related functions
	so we can skip over any existing reiserfs labels (#125939).

2006-02-02  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* iw/bootloader_main_gui.py (MainBootloaderWindow.getScreen):
	Clean up to not reference "changing" boot loaders while not
	changing strings (#159658)

	* yuminstall.py (YumBackend.getDefaultGroups): Select lang groups
	by default too (#178673).  Fix a typo.
	* backend.py (writeConfiguration): And another typo.

	* bootdisk/i386/boot.msg: Update to fix colors (#178033) and to be
	more accurate.
	* bootdisk/i386/general.msg: Likewise
	* bootdisk/i386/options.msg: Likewise
	* bootdisk/i386/params.msg: Likewise
	* bootdisk/i386/rescue.msg: Likewise	
	* bootdisk/i386/syslinux.cfg: Update options
	* bootdisk/x86_64/boot.msg: Likewise
	* bootdisk/x86_64/general.msg: Likewise
	* bootdisk/x86_64/options.msg: Likewise
	* bootdisk/x86_64/params.msg: Likewise
	* bootdisk/x86_64/rescue.msg: Likewise	
	* bootdisk/x86_64/syslinux.cfg: Update options

2006-02-02  Paul Nasrat   <pnasrat@redhat.com>

	* yuminstall.py: Implement writeConfiguration
	* backend.py dispatch.py packages.py: Move writeConfiguration

2006-02-02  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Add sqlite to traceonly.

	* gui.py:  Add /usr/share/pirut/ui to search path.

	* kickstart.py:  Make interactive mode work.

	* iw/timezone_gui.py:  Move sorting the combo to after adding
	everything to speed it way up.

2006-02-02  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2006-02-01  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILEGR): Add pirut stuff

	* iw/package_gui.py: Use pirut's version
	* iw/GroupSelector.py: Remove in favor of pirut's version.
	* ui/GroupSelector.glade: Likewise.

2006-02-01  Peter Jones  <pjones@redhat.com>

	* fsset.py (FileSystemSet): add a method to make /dev/root as it
	would be outside of the install environment (#171662)

	* upgrade.py (upgradeMountFilesystems): make /dev/root

	* yuminstall.py (doPreInstall): make /dev/root

2006-02-01  David Cantrell  <dcantrell@redhat.com>

	* fsset.py (swapFileSystem.labelDevice):  Make swap labels starting
	with SW- on /dev/cciss/* devices (#176074).

2006-02-01  Chris Lumens  <clumens@redhat.com>

	* anaconda:  If we get an error message from vncconnect, display it
	instead of assuming everything's fine.

	* kickstart.py (AnacondaKSHandlers.doLogicalVolume):  Provide an
	error dialog if there's a problem in the way LVM commands are given.

	* yuminstall.py (YumBackend.writePackagesKS):  Use yum's builtin group
	lists now.

2006-01-31  Paul Nasrat  <pnasrat@redhat.com>

	* ananconda.spec: Bump version
	* yuminstall.py: Use factory in newer yum
	* sortedtransaction.py: Move SortableTransactionData to yum
	* yuminstall.py: Text Clarification (#178105)
	* yuminstall.py: Anaconda should not use installonlypkgs (#179381)

2006-01-31  Peter Jones  <pjones@redhat.com>

	* bootloader.py (bootloaderSetupChoices(): update bl.drivelist before
	examining it for default bootloader selection.
	* dmraid.py: add support for renaming devices, and fix degraded raidset
	detection
	* kickstart.py: add dmraid device renaming support
	* partedUtils.py: add dmraid renaming support, fix dmList creation
	to have correct paths

2006-01-31  Chris Lumens  <clumens@redhat.com>

	* packages.py:  Removed unused functions.
	* dispatch.py:  Remove imports of unused functions from packages.py.

	* scripts/upd-instroot (KEEPFILE):  libexpat has moved to /lib.

2006-01-30  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* hdrlist.py: Remove dead file.

	* packages.py: Remove reference to hdrlist.py at least..
	* instdata.py: Remove hdrlist import
	* test/testHdrlist.py: Remove.

	* gui.py: Remove desktop_choice
	* iw/desktop_choice_gui.py: Remove
	* textw/desktop_choice_text.py: Likewise.

	* iw/package_gui.py: Back from the dead, this wasn't meant to go.
	* iw/simple_pkgselect.py: This was
	* gui.py: Adjust.

2006-01-30  Paul Nasrat <pnasrat@redhat.com>

	* utils/Makefile: Remove genhdlist
	* utils/genhdlist.c: Remove genhdlist
	* yuminstall.py:  Free up depsolving only storage

2006-01-30  Chris Lumens  <clumens@redhat.com>

	* gui.py (stepToClass):  GroupSelectionWindow has moved.
	* iw/examine_gui.py:  Don't try to import package_gui anymore.

2006-01-30  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILEGR): Add ethiopic fonts

2006-01-30  David Cantrell  <dcantrell@redhat.com>

	* packages.py (writeXConfiguration):  Do not create /etc/X11/X
	symlink (#179321).

2006-01-27  David Cantrell  <dcantrell@redhat.com>

	* textw/partition_text.py (PartitionTypeWindow):  Skip partition
	and bootloader screens if user doesn't want to review partition
	layout (#178739).

2006-01-26  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* partedUtils.py (DiskSet.openDevices): Patch from Patrick
	Mansfield <patmans AT us.ibm.com> so that device nodes don't 
	disappear out from under us.

2006-01-26  David Cantrell  <dcantrell@redhat.com>

	* instdata.py (InstallData):  Set backend to None by default, only
	read it if caller gives us a backend (makes rescue mode work).

2006-01-26  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Add squashfs-tools as a requirement.

2006-01-25  Jeremy Katz  <katzj@redhat.com>

	* textw/packages_text.py: Remove obsolete file.
	* iw/package_gui.py: Likewise.
	* iw/dependencies_gui.py: Likewise.
	* gui.py: Remove obsolete steps.
	* text.py: Likewise.
	* iw/partition_gui.py (AutoPartitionWindow): Remove obsolete code.
	* textw/partition_text.py (AutoPartitionWindow): Likewise.

	* textw/grpselect_text.py: Moved simple_pkgselect_text and added
	functionality for package selection within groups
	* text.py (stepToClasses): Text mode package selection is back to
	something reasonable.

	* kickstart.py (Kickstart.setSteps): Don't show tasksel if
	packages are selected.

	* iw/task_gui.py: Simple task selection UI so we don't just drop
	people into the complicated group selection screen.
	* ui/tasksel.glade: Add glade file for task selection UI
	* textw/task_text.py: Text version

	* dispatch.py (installSteps): Add tasksel step
	* installclass.py (BaseInstallClass.setSteps): Likewise.
	* gui.py (stepToClass): Likewise.
	* text.py (stepToClasses): Likewise.

	* isys/lang.c (loadKeymap): Can't load keymaps under Xen, so don't
	fail in a loud fashion.

	* anaconda: Don't ask about VNC in kickstart

2006-01-25  Chris Lumens  <clumens@redhat.com>

	* kickstart.py:  Add a permanentSkipList for steps we always want to
	skip, no matter what else happens in the ksdata.  Add bootloader to
	that list in doBootloader (#178815).

	* scripts/mk-images.ia64: Create images for ia64 (#175632) 

2006-01-25  David Cantrell  <dcantrell@redhat.com>

	* exception.py (handleException):  Changed 'be reset' to say
	'be rebooted' (#178566).

	* gui.py (InstallControlWindow.releaseNotesViewerPollExitCB):
	Call present() method on main window when release notes viewer
	closes.  Sets toplevel focus to the main window.  Also set the
	mouse pointer back to LEFT_PTR.

	* gui.py (InstallControlWindow.runReleaseNotesViewer):  Lower
	releaseNotesViewerPollExitCB() execution interval to 10 ms.

	* iw/release_notes_viewer_gui.py (relnotes_closed):  Set the
	mouse pointer to WATCH before exiting.

2006-01-24  Chris Lumens  <clumens@redhat.com>

	* Makefile:  Build stubs before loader.
	* loader2/Makefile:  Use libunicode instead of wcstubs.c (#178386).
	* loader2/wcstubs.c:  Removed.
	* stubs/Makefile:  Build a static library for the loader.
	* stubs/unicode-lite.c:  Sync with old wcstubs.c.

2006-01-23  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py (writePackagesKS):  Make %packages spew smaller

2006-01-23  David Cantrell  <dcantrell@redhat.com>

	* packages.py (queryUpgradeContinue):  Change No button text to
	Reboot since clicking it causes the system to reboot (#178096).

2006-01-23  Chris Lumens  <clumens@redhat.com>

	* whiteout.py:  Remove rpm-libs>rpm (#178540).

2006-01-21  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec:  Bump version

2006-01-20  Chris Lumens  <clumens@redhat.com>

	* anaconda: Pass backend to instdata.
	* backend.py (AnacondaBackend.writePackagesKS):  Add default method.
	* instdata.py (InstallData):  Add backend to instdata.  Call
	writePackagesKS.
	* yuminstall.py (YumBackend.writePackagesKS):  Write %packages section
	in template kickstart file.

2006-01-20  Peter Jones  <pjones@redhat.com>

	* loader2/loader.c (spawnShell): set PYTHONSTARTUP before spawning bash

	* anaconda: set PYTHONSTARTUP before spawning bash

	* scripts/Makefile: install pyrc.py in anaconda-runtime

	* scripts/pyrc.py: a pyrc that adds readline and whatnot automagically

2006-01-19  David Cantrell  <dcantrell@redhat.com>

	* instdata.py (InstallData.reset):  Set self.upgrade to None for
	initial setting (#178095).

	* instdata.py (InstallData.getUpgrade):  Return False if upgrade
	is set to None (#178095).

	* iw/examine_ui.py (UpgradeExamineWindow.getNext):  Set
	self.id.upgrade to True or False (#178095).

	* iw/examine_ui.py (UpgradeExamineWindow.getScreen):  Read
	self.id.upgrade to determine screen layout rather than checking
	to see if installtype is in the skip list (#178095).
	Always populate upgrade combo box, even if upgrade type is not
	selected.

2006-01-19  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Attempt to eject the CD drive if we're in kickstart and
	given the --eject parameter to halt or shutdown (#177554).
	* loader2/kickstart.c (setShutdown):  Recognize --eject option.

	* iw/timezone_gui.py:  Translate combo box and comments (#178250).

	* instdata.py (InstallData.write):  Disabled backend arg used for
	debugging.

2006-01-18  David Cantrell  <dcantrell@redhat.com>

	* anaconda.spec:  Bump version

2006-01-18  Jeremy Katz  <katzj@redhat.com>

	* lang-table: Add sr@Latn (#175611)

2006-01-18  Peter Jones  <pjones@redhat.com>

	* kickstart.py (Kickstart.setInstallData): start dmraid before parsing
	the kickstart file, so its device verification works.

2006-01-18  David Cantrell  <dcantrell@redhat.com>

	* scripts/upd-instroot:  Added grub to i386 rescue CD (#155399).

	* loader2/module-info:  Added mptsas (#178130).

2006-01-18  Chris Lumens  <clumens@redhat.com>

	* iw/timezone_map.py (AnacondaTZMap.timezone_list_init):  Add a
	parameter to match what superclass expects (#178140).  Don't display
	Etc timezones.

2006-01-17  David Cantrell  <dcantrell@redhat.com>

	* scripts/upd-instroot:  Add missing handler for XPM images (#177994).

2006-01-17  Chris Lumens  <clumens@redhat.com>

	* exception.py (dumpClass):  Add yum package selections and excludes
	to keySkipList.  Fix an exception in exception dumping code.

	* instdata.py (InstallData.write):  Don't traceback on printing out an
	authconfig-related error message (#178041).

	* kickstart.py (AnacondaKSScript.run):  Set permissions on log files
	to 0600 (#177519).

	* loader2/urlinstall.c (loadSingleUrlImage):  Not every caller wants
	to put the product on the front of the URL (#178001).

2006-01-13  Peter Jones  <pjones@redhat.com>

	* scripts/upd-instroot: put dmraid and dmsetup in the rescue image

2006-01-13  Chris Lumens  <clumens@redhat.com>

	* exception.py (dumpClass.keySkipList):  Remove a bunch more passwords
	and language-related stuff from the exception dumps.
	(copyExceptionToRemote):  Take a filename from the user instead of
	assuming what we got was just a directory (#177738).
	* ui/scp.glade:  Reword field label (#177738).

	* image.py (CdromInstallMethod.ejectCD):  Don't duplicate isys.

2006-01-13  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py:  Don't traceback on header download issues (#177596)

2006-01-12  Jesse Keating  <jkeating@redhat.com>

	* scripts/mk-rescueimage.ppc:  Remove map generation,
	anaconda does this elsewhere.

2006-01-12  Chris Lumens  <clumens@redhat.com>

	* yuminstall.py (YumBackend.deseletPackage):  Pass the tuple in
	instead of a reference to fix kickstart package deselection (#177530).

2006-01-11  Jesse Keating  <jkeating@redhat.com>

	* scripts/mk-rescueimage.i386: don't check for arch/arch, just check
	for destdir

	* scripts/mk-rescueimage.x86_64: don't check for arch/arch, just check
	for destdir

2006-01-11  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* scripts/pkgorder: Add xen kernels. 

	* anaconda.spec (Version): Bump version.

	* scripts/mk-images.ppc: Remove some unneeded bits from the ppc 
	boot.iso

2006-01-11  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (Kickstart.runTracebackScripts):  Typo fix.
	(Kickstart.setSteps):  Be smarter about skipping package selection.
	(Kickstart.setPackageSelection):  Add Core.

2006-01-11  Bill Nottingham  <notting@redhat.com>

	* iw/confirm_gui.py: propagate:
	
	revision 1.19
	date: 2004/05/07 01:22:44;  author: katzj;  state: Exp; lines: +1 -1
	the unbreakable stuff isn't working anyway now and it causes ppc gui
	installs to die.  so remove it for now

	to the other place where it happens. (#177537)

2006-01-10  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec (Requires): Bump version.

2006-01-10  Peter Jones  <pjones@redhat.com>

	* harddrive.py: add switchMount() and use it where appropriate

2006-01-10  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec (Version): Bump version.

2006-01-10  Peter Jones  <pjones@redhat.com>

	* dmraid.py: Fix detection of degraded raids

2006-01-10  Jesse Keating  <jkeating@redhat.com>

	* scripts/mk-rescueimage.ppc: Create mapping file for hfs stuff

2006-01-09  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* ui/exn.glade: Various little tweaks

	* pixmaps/exception.png: More accurate icon

	* gui.py (ExceptionWindow.__init__): Use our method for finding
	images so this works everywhere.

2006-01-09  Jesse Keating  <jkeating@redhat.com>

	* scripts/mk-rescueimage.ppc:  Copy boot_image from ppc
	tree into the rescue-image tree.

2006-01-09  David Cantrell  <dcantrell@redhat.com>

	* iw/GroupSelector.py (GroupSelector._categorySelected):  Scroll
	the group list to the top each time a category is selected.

2006-01-09  Chris Lumens  <clumens@redhat.com>

	* partitions.py (Partitions.writeKS):  Always write out a device
	name for RAID devices.  None vs. 0 vs. "" fixes.

2006-01-09  David Cantrell  <dcantrell@redhat.com>

	* gui.py (ExceptionWindow): Tweak display of the exception
	window.
	* ui/exn.glade: Change default size, add an hbox with an icon
	next to the label.
	* pixmaps/exception.png: Friendly icon indicating bad things
	have happened.

2006-01-08  Jeremy Katz  <katzj@redhat.com>

	* iw/GroupSelector.py (OptionalPackageSelector.__init__): Tweak
	default size a little.
	(OptionalPackageSelector._pkgToggled): Handle installed package
	cases here as well
	(GroupSelector._categorySelected): Add handling of selected vs
	installed semantics for groups
	(GroupSelector.__setGroupDescription): Likewise.

	* yuminstall.py (AnacondaYum.isGroupInstalled): Add the simple
	version here that we need for GroupSelector in anaconda

2006-01-06  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* lang-table: Remove sr@Latn until po files exist

	* loader2/Makefile: Make msgmerge quiet.  Fix noisiness from
	charset in the generated loader.po

2006-01-06  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* yuminstall.py (YumSorter.isPackageInstalled): Fix a latent bug I
	noticed when working on s-c-packages.  Won't really affect
	anaconda, though.

2006-01-05  David Cantrell  <dcantrell@redhat.com>

	* iw/progress_gui.py (InstallProgressWindow_NEW.getScreen):  Use a
	3x2 table to align the current package info and remaining time.
	Keeps the remaining time label from moving around.

	* ui/GroupSelector.glade:  Increase the height of the group
	description field so we don't get a scrollbar for a few pixel lines.

2006-01-05  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-rescueimage.ppc: Add ppc rescue image script from
	jkeating (#177003)

2006-01-05  David Cantrell  <dcantrell@redhat.com>

	* iw/progress_gui.py (InstallProgressWindow_NEW.getScreen):  Realign
	the remaining time indicator and current package description so text
	isn't displaying under buttons and other widgets.

2006-01-05  Chris Lumens  <clumens@redhat.com>

	* iw/timezone_gui.py (TimezoneWindow.timezone_widget_create):  Don't
	try to make the timezone widget bigger than the screen (#176025).

	* text.py (ProgressWindow.__init__):  Set a default on updpct.

	* yuminstall.py (simpleCallback.callback):  Fix message wording
	(#155884).
	(AnacondaYum.log):  Be quiet (#171663).

2006-01-04  David Cantrell  <dcantrell@redhat.com>

	* iw/GroupSelector.py (GroupSelector.populateCategories):  Display
	the sorted category list.

2006-01-04  David Cantrell  <dcantrell@redhat.com>

	* iw/GroupSelector.py (OptionalPackageSelector.__init__):  Position
	dialog centered over parent.  Increase window size to display more
	than a few packages.

	* iw/GroupSelector.py (GroupSelector.__init__):  Disable the optional
	packages button on initial window load.

2006-01-04  David Cantrell  <dcantrell@redhat.com>

	* iw/autopart_type.py (comboChanged): If you select the custom
	layout option, the review checkbox is forced on.  When you leave the
	custom layout selection, the previous state of the checkbox is
	restored.

	* gui.py (runReleaseNotesViewer): Run at 800x445 instead of 800x420
	when the installpackages step is running.

2006-01-04  Chris Lumens  <clumens@redhat.com>

	* network.py (NetworkDevice.__str__):  Put quotes around ethtool
	arguments (#176918).

2006-01-04  David Cantrell  <dcantrell@redhat.com>

	* iw/autopart_type.py (comboChanged): Preserve partition review checkbox
	between combo box selections (#176212).

2005-12-22  Jeremy Katz  <katzj@redhat.com>

	* lang-table: Add Serbian locales (#175611)

	* isys/isys.py (hardDriveDict): Only look for STMF on iSeries (#176024)

2005-12-22  Paul Nasrat <pnasrat@redhat.com>

	* text.py: Make the progress bar work for depsolving  (#176367)

2005-12-21  Jeremy Katz  <katzj@redhat.com>

	* gui.py: Need the a11y stuff here now

2005-12-20  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* iw/network_gui.py (NetworkWindow.getScreen): Spacing fixes.

	* loader2/loader.c: Give a stacktrace on SIGSEGV to make things
	easier to debug. 

2005-12-20  Bill Nottingham  <notting@redhat.com>

	* iutil.py (getPPCMachine): Be silent on non-ppc arches.

2005-12-19  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* gui.py (findPixmap): Fix missing comma

	* iw/progress_gui.py (InstallProgressWindow_NEW.getScreen): Better
	filename for lowres version

	* splashscreen.py: Remove unused file.

	* gui.py (InstallInterface.__init__): Set cursor here instead of 
	splashscreen.
	(InstallControlWindow.setup_window): Don't pop splashscreen.

	* anaconda: Don't use the splashscreen.  --nofallback isn't used
	and now that we trap and log the exception, it shouldn't be needed
	for debugging.

2005-12-19  David Cantrell  <dcantrell@redhat.com>

	* fsset.py (devify):  Make sure /etc/fstab has accepted standards
	for the pseudo filesystems (#176149).

2005-12-19  Chris Lumens  <clumens@redhat.com>

	* kbd.c (chooseKeyboard):  Use the selected language in loaderData
	instead of in $LANG to determine default keyboard layout (#172266).
	Change chooseKeyboard to take in loaderData instead.
	* kbd.h:  Likewise.
	* loader.c (doLoaderMain):  Likewise.

2005-12-19  Jeremy Katz  <katzj@redhat.com>

	* gui.py (InstallControlWindow.createWidgets): Don't dither the
	header, clean up the code to set the GtkImage

	* iw/welcome_gui.py (WelcomeWindow.getScreen): Don't dither.

	* scripts/mk-images.x86_64 (SYSLINUX): Generate syslinux splash
	using script in -logos package instead of hard-coding knowledge of
	colors here.
	* scripts/mk-images.i386 (SYSLINUX): Likewise.

2005-12-16  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.getBestKernelByArch): No more smp
	kernel if NX is available

2005-12-16 Paul Nasrat <pnasrat@redhat.com>

	* scripts/pkgorder: New groups format, need to setup a logger
	* sortedtransaction.py: Fix when using new relationship stores
	* yuminstall.py:  Fix text installs (#175773)

2005-12-15  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Add more encoding modules to traceonly (#175853).

2005-12-15  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* loader2/loader.h (FL_UB): Don't reuse a define (oops) and use &
	instead of &&. 

	* scripts/pkgorder: Fix for new group code.

2005-12-15  Chris Lumens  <clumens@redhat.com>

	* iutil.py (getArch, getfd, getPPCMachine):  Wrap the rhpl functions
	instead of copying.

2005-12-15  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* flags.py (Flags.__init__): dmraid by default so that it gets tested

2005-12-15 Paul Nasrat <pnasrat@redhat.com>

	* sortedtransaction.py: Use new relationship stores
	* anaconda: Add system-config-date to path to prevent Import Error
	* iw/timezone_gui.py:  Pass self to parent class calls, Fix typo

2005-12-14  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* iw/timezone_gui.py:  Change to use system-config-date.  Subclass
	TimezoneMap from that package to get the behavior we want.
	* iw/timezone_map_gui.py:  Removed.
	* scripts/upd-instroot:  Add system-config-date and rhpxl .mo files.

2005-12-14  David Cantrell  <dcantrell@redhat.com>

	* anaconda:  Made the 'press enter for a shell' spawning loop
	more complex.  This gets the snippet of code out of iutil that
	I had put in there yesterday.

2005-12-14  David Cantrell  <dcantrell@redhat.com>

	* iutil.py (execWithRedirect):  Not the right place to write out
	the vnc shell pid.

2005-12-14  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py (AnacondaYum.__init__): whiteout is now a module

2005-12-13  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (doRepoSetup): Make progress bars go a little bit
	more reasonably, taking into account that some steps take longer
	than others.  Nuke the progress bar after we're done.
	(YumProgress): Handle changes for the above.  Warn if we update
	the progress bar after using it.

	* yuminstall.py (__getGroupId): Fix groupid finding

	* whiteout.py (whitetup): Break the whiteout into tuples
	* yuminstall.py (tsCheck): Use whiteout tuple instead of string
	for a minor speed improvement.

	* yuminstall.py: Scale progress properly.  Also, give a warning if
	we update a popped progress bar so that we can try to find and fix
	such cases.

	* cmdline.py (ProgressWindow.__init__): Adjust for new API

2005-12-13  David Cantrell  <dcantrell@redhat.com>

	* anaconda:  Record the PID of the forked process that handles
	spawning the shell when you are using the VNC mode.
	* iutil.py (execWithRedirect):  If we see /tmp/vncshell.pid,
	record the PID of whatever we just spawned.
	* exception.py (handleException):  If we see /tmp/vncshell.pid,
	open it and kill everything listed.  Attempt to reclaim std IO.
	Drop to pdb after we have made sure the shell and spawning loop
	are dead.

	Generic comment:  Statements like "if not child:" are misleading
	because that test would be true if it actually was the child.  I
	have changed a few to "if child == 0:" to make it more readable.

2005-12-13  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py: Profiling with hotshot for fun, profit and 
	going from 22 to 8 seconds on depsolving of a default install 
	with a test case on my laptop.
	(_provideToPkg): Return what we find for the dep
	instead of requiring an additional dictionary lookup
	(resolveDeps): Only run dep check on packages we haven't looped
	across before.  Otherwise, we waste time looking things up that
	we've done before.
	(tsCheck): Look for only the specified.  Speed up relationship
	adding with a short-circuit so that we don't always loop over the
	full list.

2005-12-13  Chris Lumens  <clumens@redhat.com>

	* keymaps/updkmaps:  Typo.

	* keymaps/:  Removed obsolete directory.

2005-12-12  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* yuminstall.py (YumDepSolveProgress.tscheck): Enhance to allow
	knowing how many things are going to be added.  Put the smarts
	about the "nice" update here instead of restartLoop
	(YumSorter.tsCheck): Feedback on packages being checked so the
	progress bar moves :-)

	* gui.py (ProgressWindow.__init__): Allow specifying the
	percentage to do updates at so that we can update more often on known
	"slow" progress bars
	* text.py (ProgressWindow): Matching prototype

	* scripts/mk-images: Add ub to the module list
	* loader2/loader.c: Temporary handling of 'ub' command line flag
	to say to try ub instead of usb-storage.
	* loader2/loader.h: Add ub flag definition.
	* loader2/usb.c (usbInitialize): Load usb-storage/ub if there is
	something which looks relevant

	* gui.py (InstallControlWindow.refreshHelp): Revert a little bit.

	* anaconda: Allow hard drive installs again

	* harddrive.py: Untested attempt to get hard drive installs working

	* scripts/upd-instroot: Fix nano (#175479)

2005-12-12  Chris Lumens  <clumens@redhat.com>

	* installclass.py (BaseInstallClass.configureX):  Remove monitor
	configuration.
	* kickstart.py (AnacondaKSHandlers.doXConfig):  Likewise.
	* xsetup.py  (XSetup.writeKS):  Write out a monitor keyword to the
	generated kickstart file.

2005-12-11  Peter Jones  <pjones@redhat.com>

	* dmraid.py (dmDriveCache): add dmDriveCache class, to to manage
	our three-drive-monte with isys's hard drive list.
	(getRaidSetInfo): remove completely
	(scanForRaid): don't use getRaidSetInfo, just test the RaidSet object
	directly.  Also log a warning when we encounter a degraded raidset.
	(startAllRaid): don't use a generator, since we need to provide
	a non-None empty result set.
	(stopRaidSet): simplify the code a bit.
	(stopAllRaids): remove traceback stuff, and remove artifacts of
	getRaidSetInfo

	* fsset.py: don't disable dmraids when rescanning partitions
	(LogicalVolumeDevice): rename the volume group name argument
	to "vgname" instead of "lvname", and add an argument for the object
	so we can find its physical volumes.

	* lvm.py (writeForceConf): take device list as an argument, and use
	that to write the filter rules.

	* partRequests.py (LogicalVolumeRequestSpec.getDevice): pass vg object
	in to fsset.LogicalVolumeDevice

	* partedUtils.py (DiskSet.startDmRaid): rewrite it to remove some
	unneeded code, and make it a lot simpler.
	(.startAllRaid): cut out a lot of crap, make the s390 handling simpler
	(.stopDmRaid): remove some useless stuff
	(.stopAllRaid): remove the s390 handling
	(.openDevices): check for None to see if dmraid is initialized.
	
	* partitions.py (Partitions.setFromDisk): call lvm.writeForceConf
	before we probe for PV/VG/LV info.

2005-12-11  Jeremy Katz  <katzj@redhat.com>

	* gui.py: Stop looking for help.

	* anaconda.spec: anaconda-help is no more.

2005-12-10  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* textw/simple_pkgselect_text.py Basic fixup for new API so that
	we at least don't just die (#175443)

	* yuminstall.py: Remove anaconda_grouplist hack.
	(tsCheck): Fix for API change 
	(_catchallCategory): Fix for changes to groups API

	* iw/GroupSelector.py (GroupSelector._categorySelected): Update
	for new group code and sort based on display_order.
	(GroupSelector.populateCategories): Likewise.  
	(_ui_comps_sort): Add sorter.
	* ui/GroupSelector.glade: Minor tweak

	* yuminstall.py: Use TS_INSTALL_STATES instead of enumerating

2005-12-10  Paul Nasrat <pnasrat@redhat.com>

	* backend.py dispatch.py yuminstall.py: Ensure upgrades
	depsolved. Ensure rpm lock/cache removed.

2005-12-08  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* anaconda (startVNCServer): -once is back for Xvnc

	* iw/welcome_gui.py (WelcomeWindow.getScreen): Dither the image,
	look for it in the right path.

	* ui/anaconda.glade: Minor padding fixes.

2005-12-08  Paul Nasrat <pnasrat@redhat.com>

	* backend.py dispatch.py installclass.py upgrade.py
	upgradeclass.py yuminstall.py: Make install more robust to file read
	failures.  Initial support for upgrades again.

2005-12-08  Jeremy Katz  <katzj@redhat.com>

	* loader2/loader.c: remove slang hack

	* loader2/wcstubs.c (nl_langinfo): We can't do this in a
	statically linked binary, so lie to slang some more.

2005-12-08  Chris Lumens  <clumens@redhat.com>

	* partRequests.py:  Support bytesPerInode on RAID
	(Curtis Doty <Curtis at Greenkey.net>, #175288).

	* iw/GroupSelector.py (GroupSelector.__setGroupDescription):  Typos.
	* iw/confirm_gui.py, iw/upgrade_swap_gui.py, iw/zipl_gui.py:
	queryUpgradeContinue has moved.

2005-12-08  David Cantrell  <dcantrell@redhat.com>

	* anaconda (startVNCServer):  Removed the '-once' switch for vncserver
	since that option is invalid [now].

2005-12-08  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: Add back chinese font now that we use
	squashfs. (#172163) Also, enable locale-archive with the non-archive
	removal code.

	* iw/GroupSelector.py (GroupSelector.__setGroupDescription): Don't
	allow detail twiddling for groups that aren't selected.  Only show
	count of optional/default packages (and only if the group is selected)

	* installclasses/fedora.py (InstallClass.setGroupSelection): Get
	default groups from the backend

	* backend.py (AnacondaBackend.getDefaultGroups): Support for
	getting default groups

	* iw/GroupSelector.py: Guts of new group/package selection code.
	Eventually will live in son of s-c-packages.
	* ui/GroupSelector.glade: glade file for new group selection code

	* iw/package_gui.py: Basic shell for GroupSelector use in anaconda

	* yuminstall.py: Update for yum 2.5 API changes.  Note that we now
	*require* yum-2.5.0-0.20051207 or newer
	(isPackageInstalled): Add method to see if package is installed
	for group selection.  
	(_catchallCategory): Add method to take uncategorized groups and
	stick them somewhere
	(getDefaultGroups): Backend method for finding the default
	selected groups based on what comps says

	* gui.py (stepToClass): Move to new group selection code.

2005-12-07  Bill Nottingham  <notting@redhat.com>

	* anaconda: We don't care about the results of the mouse probe
	for starting X. If you want text, pass 'text'.

2005-12-07  Jeremy Katz  <katzj@redhat.com>

	* installclass.py (BaseInstallClass.setSteps): "package-selection"
	-> "group-selection"

	* scripts/upd-instroot: X data has moved.  Also, remove the vnc hack

2005-12-05  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* scripts/upd-instroot:  Add some additional SELinux-related programs
	and an /etc/shells to get semodule working again.

2005-12-05  Peter Jones <pjones@redhat.com>

	* isys/nfsmount_xdr.c (xdr_mountres3_ok): reformat weird tabbing,
	and don't type-pun any more.
	* isys/linkdetect.c (mdio_read): no type-punning.
	* loader/moduleinfo.c (readModuleInfo): fix typo (+ instead of +=) that
	gcc41 complains about.

2005-12-02  David Cantrell  <dcantrell@redhat.com>

	* loader2/mediacheck.c:  Reworded the media check result dialog to
	make the result more obvious (#174530).

2005-12-02  David Cantrell  <dcantrell@redhat.com>

	* loader2/Makefile:  Added a checkisomd5 target.

2005-12-01  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/loader.c (initializeConsole): Hack around the fact that
	slang doesn't properly enable UTF-8 anymore (#174761)

	* scripts/mk-images: Fix argument order for mksquashfs, chmod images

2005-12-01  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (KickstartPreParser.__init__):  Allow %pre scripts to
	be in an included file.

2005-12-01  David Cantrell  <dcantrell@redhat.com>

	* gui.py:  In 800x600 mode, set the window size of the release
	notes viewer to be 800x420 when the installpackages stage is
	running.  Release notes are readable and the progress bar is
	still visible.

2005-12-01  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2005-12-01  David Cantrell  <dcantrell@redhat.com>

	* dispatch.py (Dispatch.bindArgs):  Make sure args is a tuple or
	list type before running the for loop.  If called while in the
	installpackages state, args is a function.

2005-12-01  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images: Add squashfs to module list.  Build images as
	squashfs.

	* loader2/loader.c (main): Load squashfs.

	* loader2/method.c (mountLoopback): Try to mount squashfs too.

2005-12-01  David Cantrell  <dcantrell@redhat.com>

	* loader2/cdinstall.c:  Reworded the media check prompt dialog as
	suggested by #174472.

2005-11-30  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: Try to build policy with semodule so that
	all the files are there.  If it works, will fix #174563

	* scripts/upd-instroot: Allow system-logos to be used for logo
	package name

2005-11-30  David Cantrell  <dcantrell@redhat.com>

	* gui.py (runReleaseNotesViewer):  Pass in appropriate window
	dimensions for the release notes viewer from this function.  Also
	modified it so it execs a release notes viewer from RHupdates if
	one is present.

	* iw/release_notes_viewer_gui.py:  Use the window dimensions given
	to us from gui.py.  Do not center the window on the screen, but
	anchor it to the upper left corner of the main install dialog.

2005-11-30  Chris Lumens  <clumens@redhat.com>

	* anaconda:  None vs. "" for vncpasswd in test mode (from Patrick
	Mansfield <patmans AT us.ibm.com> on anaconda-devel-list)

2005-11-30  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py:  Don't try split transactions on non split
	installation methods (#174033)

2005-11-29  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* network.py (Network.available):  Check for ff:ff:ff:ff:ff:ff as
	well.

2005-11-28  David Cantrell  <dcantrell@redhat.com>

	* iw/release_notes_viewer_gui.py: Make the release notes viewer
	the entire size of the root window (either 8x6 or 6x4).

2005-11-26  Jeremy Katz  <katzj@redhat.com>

	* loader2/urlinstall.c (mountUrlImage): Fix booting with CD1 and
	using FTP/HTTP to not look for hdlist.  This still isn't ideal

2005-11-25  Jeremy Katz  <katzj@redhat.com>

	* bootdisk/ppc/yaboot.conf.3264: Fix ppc32 from CD (#174135)

2005-11-23  Chris Lumens  <clumens@redhat.com>

	* ui/scp.glade:  Make sure people know we're using scp to copy.

2005-11-22  Paul Nasrat  <pnasrat@redhat.com>

	* loader2/nfsinstall.c: Report no DNS servers if a hostname used (#168957)

2005-11-22  Jeremy Katz  <katzj@redhat.com>

	* loader2/loader.c: Fix /dd.img in initrd (from Dan Carpenter
	<dcarpenter AT penguincomputing.com> on anaconda-devel-list)

	* scripts/upd-kernel: Add a script to create a new initrd for a
	new kernel version. 

2005-11-21  Peter Jones  <pjones@redhat.com>

	* fsset.py (ext2FormatFilesystem): remove isys.sync() from the
	progress bar update to speed up installs.

2005-11-21  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Add email.Utils to traceOnly loading (#173169).
	* kickstart.py (AnacondaKSHandlers.doNetwork):  More helpful message.

2005-11-21  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/loader.c: pcspkr breaks on powerpc

2005-11-20  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* yuminstall.py (YumSorter.tsCheck): Fix backwards whiteout
	handling (#173738)
	(YumSorter.tsCheck): Log when whiteout is used
	(YumSorter._provideToPkg): If we already have a package installed
	which provides something, then we should just use that.  This
	makes it so we don't get the UP kernel pulled in when kernel-smp
	is already selected for installation.

2005-11-19  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* sortedtransaction.py (SplitMediaTransactionData.remove): typos
	are our friends.  *sigh*

2005-11-18  Chris Lumens  <clumens@redhat.com>

	* dmraid.py:  Don't print anaconda.dmraid logging on stdout.

2005-11-18  Jeremy Katz  <katzj@redhat.com>

	* loader2/selinux.h (ANACONDA_CONTEXT): Fix for new context types
	since the kernel no longer can do the mapping itself.

2005-11-18  Chris Lumens  <clumens@redhat.com>

	* anaconda: Sync vnc parameter handling with pykickstart.

2005-11-18  Bill Nottingham  <notting@redhat.com>

	* yuminstall.py: Add ellipsis to match other similar messages

2005-11-17  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* partedUtils.py (DiskSet.openDevices): debug prints -> 
	log.debug (#173533)

	* scripts/upd-instroot: vnc hack me harder...

	* yuminstall.py (YumSorter.tsCheck): Don't traceback on
	unresolvable deps. (#173508)
	(AnacondaYum.getBestPackages): Fix pkg.arch for %packages

2005-11-17  Paul Nasrat <pnasrat@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/buildinstall: Groups for createrepo

2005-11-17  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

2005-11-17  Chris Lumens  <clumens@redhat.com>

	* scripts/pkgorder:  Give excludeList a default.

2005-11-17  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2005-11-17  Chris Lumens  <clumens@redhat.com>

	* scripts/pkgorder:  Move to after args is set.

2005-11-17  Jeremy Katz  <katzj@redhat.com>

	* flags.py (Flags.__init__): dmraid is off by default.

	* sortedtransaction.py (SplitMediaTransactionData.remove): Don't
	get confused if we've already removed the package from the ts.

	* loader2/loader.c: dmraid flag handling

2005-11-17  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* yuminstall.py (YumBackend.selectLanguageGroups): crude language
	support group hack... 

2005-11-16  Peter Jones  <pjones@redhat.com>

	* isys/devnodes.c: clean code up some
	* dmraid.py: rework disk/spare listing to use class methods.
	play 3-card-monte with isys.cachedDrives so you can partition dmraids.
	use flags.dmraid.
	* isys/isys.py: don't do special pdc raid magic
	* partitions.py: don't down dmraid devices before partitioning
	* raid.py: make isRaidX() functions return true/false
	* anaconda: cleanup line beginnings (spaces vs tabs vs waaaa)
	add dmraid flags
	* flags.py: add dmraid flags
2005-11-16  Chris Lumens  <clumens@redhat.com>

	* urlinstall.py (UrlInstallMethod.getRPMFilename):  Fix to match
	parameters in other classes.
	* yuminstall.py (getcd):  Catch AttributeError for URL methods.

	* scripts/pkgorder:  i386 -> i686.

2005-11-16  Jeremy Katz  <katzj@redhat.com>

	* sortedtransaction.py (SplitMediaTransactionData.remove): fun
	with api...

	* utils/trimpciids (f): Make a little bit more failure resistent

	* scripts/mk-images (INITRDMODS): More videoaliases fixage.

	* scripts/buildinstall (BUILDINSTALL): Okay, don't do group info.

2005-11-16  Paul Nasrat <pnasrat@redhat.com>

	* anaconda.spec: Bump version.

	* yuminstall.py:  Single sort and single installer yum classes
	* scripts/pkgorder:  Force kernels to be on the first image.  Add
	* image.py:  CD Method switchMedia

2005-11-16  Jeremy Katz  <katzj@redhat.com>

	* scripts/buildinstall (BUILDINSTALL): Run createrepo quietly and
	with the group info.

	* scripts/mk-images (INITRDMODS): videoaliases changed.  no cookie
	for notting.

2005-11-16  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

2005-11-16  Chris Lumens  <clumens@redhat.com>

	* image.py, installmethod.py:  getRPMFilename takes a media number
	instead of a header obj.  Use currentMedia everywhere.  Add
	switchMedia method for images.
	* sortedtransaction.py:  Handle AttributeError.  Logic fixes.
	* yuminstall.py:  Move _getcd to top level.  Use package objs instead
	of headers.  Handle transactions per-media image.

2005-11-16  Jeremy Katz  <katzj@redhat.com>

	* exception.py (dumpClass): Don't include backend.ayum because
	it's a ton of (not overly useful) stuff.

	* anaconda_log.py (DEFAULT_LEVEL): Back to info for default.
	* loader2/log.c: Likewise.

2005-11-16  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (Kickstart.runPreScripts):  Don't give a progress bar
	if there aren't any scripts to run.
	(Kickstart.postAction):  Likewise.

	* sortedtransaction.py (SplitMediaTransactionData):  Move after its
	superclass.  Fix indentation.
	* yuminstall.py (YumSorter.doTsSetup):  Use SplitMediaTransactionData
	instead.

	* scripts/buildinstall:  Run createrepo before pkgorder.
	* scripts/pkgorder:  Force kernels to be on the first image.  Add
	--exclude as an option.

2005-11-16  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images: Add /var/lib/xkb as a symlink to /tmp so we
	have setxkbmap work.  
	* scripts/upd-instroot: Add xkbcomp.Remove old version of xkb 
	tmp symlinking

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: Don't build locale-archive for now.  The
	file is too big for cramfs :-/

2005-11-16  Bill Nottingham  <notting@redhat.com>

	* utils/trimpciids: Fix tyop

2005-11-15  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILEGR): Remove new chinese font for
	now.  It's larger than 16 megs which breaks cramfs (#172163)

	* anaconda.spec: Bump version

	* scripts/upd-instroot (XORGLIBS): Apparently lost a lib

2005-11-15  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

2005-11-15  Bill Nottingham  <notting@redhat.com>

	* scripts/upd-instroot, scripts/mk-images, utils/trimpciids:
	  Work with multiple videoaliases files.
	
2005-11-15  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec (BuildPreReq): Change for modular X package names

	* scripts/upd-instroot: Modular X changes, including --
	  Add new package names for modular X.  For now, list drivers by hand.
	  New paths to files everywhere
  	  Add a hack for Xvnc using the wrong font path

	* anaconda: New xorg path.  Allow getting a shell on the console
	if you're using vnc to help with the case where you don't have
	physical ttys.

	* yuminstall.py (simpleCallback.callback): Get the right filename,
	don't blow up if we can't unlink the file
	(simpleCallback.callback): Use method to unlink

	* image.py: Fix rpm filenames to be rooted at self.tree

	* yuminstall.py (YumBackend.getBestKernelByArch): Install smp
	kernel if NX is present (#172345)
	(YumBackend.doInstall): method monkeying
	(simpleCallback.callback): And fix the method name

	* iutil.py (hasNX): Add a method to find out if we have NX

2005-11-15  Chris Lumens  <clumens@redhat.com>

	* genheader.py (mungEpoch):  Add epoch manually instead of relying on
	deepcopy.
	(YumHeader.str):  Add summary and description to header.

	* image.py (CdromInstallMethod.getRPMFilename):  Fix typo.
	(NfsIsoInstallMethod.getRPMFilename):  Don't prepend the tree twice.

	* yuminstall.py (AnacondaYumMedia._getcd):  Fix typo.
	(AnacondaYumMedia.downloadHeader):  Set size and disc number.

	* scripts/pkgorder (createConfig):  Catch OSError as well.

2005-11-15  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* scripts/upd-instroot: Fix up for new selinux policy

2005-11-14  Paul Nasrat   <pnasrat@redhat.com>

	* anaconda.spec:  Bump version.

	* yuminstall.py scripts/pkgorder.py: Move sorter into yuminstall 

2005-11-14  Jeremy Katz  <katzj@redhat.com>

	* isys/devnodes.c: Add support for ub devices

2005-11-14  Paul Nasrat   <pnasrat@redhat.com>

	* anaconda.spec:  Bump version.

	* installmethod.py harddrive.py image.py 
	urlinstall.py yuminstall.py: Change getRPMFileName signature, use in
	callback, generate headers on split media methods
	* anaconda installmethod.py harddrive.py 
	  urlinstall.py image.py: Method handling in classes
	* backend.py: Method not methodobject
	* installmethod.py (InstallMethod): Remove legacy metadata handling
	* urlinstall.py harddrive.py image.py: Remove legacy metadata handling

2005-11-14  Peter Jones  <pjones@redhat.com>

	* anaconda.spec: add requirements for device-mapper
	* isys/Makefile: link against libdevmapper
	* isys/devnodes.c: add support for making device-mapper nodes
	
2005-11-14  Jeremy Katz  <katzj@redhat.com>

	* loader2/net.c (wait_for_link): Log warning if no network link detected

2005-11-14  Paul Nasrat   <pnasrat@redhat.com>

	* yuminstall.py (AnacondaYumMedia): Stub media class

	* genheader.py (YumHeader): Don't change original po epoch, tag
	addition method

2005-11-14  Chris Lumens  <clumens@redhat.com>

	* scripts/pkgorder:  Clean up error handling a little bit.  Select all
	matching packages in i386/i686 case.  Refactor group adding code.

2005-11-13  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.deselectGroup): Fix group deselection
	to pass pkgtup instead of po.  hooray for api inconsistency

2005-11-12  Jeremy Katz  <katzj@redhat.com>

	* loader2/net.c (findHostAndDomain): Not succeeding at reverse
	lookup should only be a warning

2005-11-11  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2005-11-11  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (AnacondaYum.log): fix log levels

	* loader2/firewire.c (firewireInitialize): this should be a debug 
	message...

	* splashscreen.py: Set up a11y if 'dogtail' on kernel command line 

	* scripts/upd-instroot: Add bonobo servers.
	* scripts/upd-instroot: And add some more libraries...

2005-11-10  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec (BuildPreReq): buildrequire yum so it ends up in
	the buildroots
	
2005-11-10  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: Add some stuff to try to get the framework
	present for dogtail to work (#172891) 

	* loader2/hardware.c: Look for xen devices.

	* loader2/modules.c: Who cares about missing modules, they're
	probably built-in...

2005-11-10  Paul Nasrat	  <pnasrat@redhat.com>
	
	* anaconda.spec:  require anaconda for anaconda-runtime
	* scripts/pkgorder:  Resurrect pkgorder based on yum
	* sortedtransaction.py: Only operate on dependencies (not obsoletes)

2005-11-10  Chris Lumens  <clumens@redhat.com>

	* anaconda_log.py (AnacondaLog.__init__):  Change level on stdout
	logging so we actually see what's being printed.

2005-11-10  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* scripts/upd-instroot (PACKAGES):  Add e2fsprogs-libs.

2005-11-09  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/driverdisk.c: Clean up log levels.
	* loader2/firewire.c: Likewise.
	* loader2/hardware.c: Likewise.
	* loader2/hdinstall.c: Likewise.
	* loader2/lang.c: Likewise.
	* loader2/loader.c: Likewise.
	* loader2/log.h: Likewise.
	* loader2/mediacheck.c: Likewise.
	* loader2/method.c: Likewise.
	* loader2/modstubs.c: Likewise.
	* loader2/modules.c: Likewise.
	* loader2/net.c: Likewise.
	* loader2/nfsinstall.c: Likewise.
	* loader2/pcmcia.c: Likewise.
	* loader2/urls.c: Likewise.
	* loader2/usb.c: Likewise.

	* loader2/driverselect.c (getManualModuleArgs): We don't have help
	about the args, don't pretend that we do.

	* text.py (InstallInterface.run): debug on suspend should have priority

2005-11-09  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Set up logging earlier.  Set level on handlers instead of
	on logger instance.
	* anaconda_log.py:  Remove logging of errors to stdout.
	(AnacondaLog):  Log everything to /tmp/anaconda.log.
	(LoggerClass):  Add new default Logger class.
	* autopart.py:  Use lvmLog instead of log.
	* lvm.py (getVGFreeSpace):  Lower log level on messages.
	* loader2/log.c:  Log everything to /tmp/anaconda.log.

	* text.py (InstallInterface.__init__):  Create the SnackScreen earlier
	to prevent a traceback in kickstart.

2005-11-08  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/module-info: Add xenblk and xennet

	* kickstart.py (AnacondaKSHandlers.doAuthconfig): Fix kickstart 
	traceback

	* yuminstall.py (AnacondaYum.run): Basic (bad) support for
	handling transaction errors.  Need to improve this, but at least
	it won't just traceback now.

	* text.py (InstallInterface.isRealConsole): Add method to check if
	we're on a "real" console instead of duplicating the code
	everywhere.  Add a check for /proc/xen to imply xen guest (not
	real console)
	(InstallInterface.run): Use new method.
	(InstallInterface.run): Use new method.
	* textw/language_text.py (LanguageWindow.__call__): Use new method.

2005-11-08  Peter Jones  <pjones@redht.com>

	* dmraid.py: First parts of this, needs pyblock and dm libs.
		     
2005-11-08  Chris Lumens  <clumens@redhat.com>

	* exception.py (dumpClass):  Seriously skip instLanguage stuff.

	* text.py (ProgressWindow):  Fix snack deprecation warnings (#172232).

	* yuminstall.py (YumProgress):  Don't try to update a progress window
	that's been popped (#172232).

2005-11-07  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILEGR): New chinese fonts (#172163)
	(KEEPFILEGR): Only need one.

	* upgrade.py (upgradeFindPackages): Fix message (#172030)

	* anaconda.spec: Bump version.

2005-11-07  Chris Lumens  <clumens@redhat.com>

	* instdata.py:  Import logging.
	(InstallData.reset):  Set default authconfig string.
	(InstallData.write):  Helps to have the right path.

	* kickstart.py (AnacondaKSHandlers.doAuthconfig):  Set id.auth.

	* yuminstall.py (YumBackend.doRepoSetup):  Typo fix.

2005-11-03  Chris Lumens  <clumens@redhat.com>

	* autopart.py (doAutoPartition):  Use "not X" instead of "X is not
	None".

	* installclass.py (BaseInstallClass.setClearParts):  Fix types.
	* kickstart.py (AnacondaKSHandlers.doClearPart):  use named parameters
	correctly.
	(AnacondaKSHandlers.doPartition):  Check for None in sizes.

	* security.py:  Use pykickstart SELinux constants for consistency
	(#172356).

2005-11-02  Peter Jones <pjones@redhat.com>

	* loader2/module-info: add bnx2

2005-10-31  Paul Nasrat  <pnasrat@redhat.com>
	
	* yuminstall.py: Log error messages, detail repoerror cause

2005-10-28  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* yuminstall.py (AnacondaYum.getBestPackages): Return the best
	package_s_ for a package name/arch.  Need more than one for
	multilib.  Should fix multilib package sel and best 
	arch selection (#171026, #171997)
	(YumBackend.getBestKernelByArch): Do this inside of
	selectBestKernel since that's the only place it's really wanted
	(YumBackend.selectGroup): Get packages using getBestPackages.
	(YumBackend.deselectGroup): Likewise.
	(YumBackend.selectPackage): Likewise.
	(YumBackend.deselectPackage): Likewise.

	* yuminstall.py (YumBackend.selectBestKernel): Select
	kernel-xen-guest if installing in a guest 

	* isys/devnodes.c: Add support for Xen xvd block devs
	* partedUtils.py (max_logical_partition_count): Likewise.

2005-10-28  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (KickstartPreParser):  Pass lineno to handlePackageHdr
	and handleScriptHdr.

2005-10-28  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images: Extract kernel-xen-guest on i386 in addition
	to kernel.  And we don't have pcmcia stuff in hwdata anymore
	* scripts/mk-images.i386: Just make an initrd and copy the kernel
	for xen-guest

	* anaconda: Don't make character device nodes quite that early

2005-10-27  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* upgrade.py (upgrade_remove_blacklist): Fix x86_64 traceback

	* bootloader.py (writeBootloader): Handle inconsistently named
	kernel-xen-{guest,hypervisor} kernels

	* yuminstall.py (YumBackend.doRepoSetup): Give full error on tty3.
	(YumBackend.selectBestKernel): Temporarily allow installation of
	xen-hypervisor kernel package by passing 'xen0' on kernel command line
	(YumBackend.kernelVersionList): Remove obsolete cruft, add xen stuff

2005-10-27  Chris Lumens  <clumens@redhat.com>

	* loader2/init.c (logChunk):  Try to put newlines into the syslog
	where appropriate.
	(doklog):  Break the logging out into its own function.

	* anaconda_log.py (DEFAULT_LEVEL):  Set minimum log level to WARNING.
	* loader2/log.c (minLevel):  Likewise.

	* scripts/upd-instroot:  Add pycairo to PACKAGESGR and KEEPFILEGR.

2005-10-26  Jeremy Katz  <katzj@redhat.com>

	* loader2/loader.c (main): Use nofb by default

2005-10-26  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Make Synaptics device nodes before X starts.

2005-10-24  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.kernelVersionList): Fix kernel finding

	* ui/anaconda.glade: Don't show the help buttons either...
	
2005-10-24  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* lang-table: Updated the wrong field

	* anaconda.spec: Bump version.

	* product.py: Allow passing the path to a buildstamp with an
	environment variable. Also, allow setting all values with env vars.

	* lang-table: Use pl2 keymap (#171583)

	* ui/anaconda.glade: Make help not visible by default.  This fixes
	screwiness where the pane was still there with kickstart installs.

	* dispatch.py (installSteps): Break out reposetup and base package
	selection into separate steps.
	* installclass.py (BaseInstallClass.setSteps): Likewise.
	* yuminstall.py (YumBackend.doRepoSetup): Add backend repo setup.
	* backend.py (doBasePackageSelect): Implement generically for now

	* scripts/mk-images.ia64 (image): Fix typo

	* isys/isys.py: Change some log levels

	* yuminstall.py (AnacondaYum.getBestPackage): Method to do best
	arch selection for now.
	(YumBackend.selectBestKernel): Find the "best" kernel for our
	system and select it.
	(YumBackend.selectBootloader): Ensure a bootloader is selected.

2005-10-24  Chris Lumens  <clumens@redhat.com>

	* exception.py (copyExceptionToRemote):  Destroy scp dialog.
	(copyExceptionToFloppy):  Pass in dispatch so the floppy part works.
	(handleException):  Don't make scp/floppy errors fatal so the user has
	another chance to get it right.

	* instdata.py (InstallData.writeKS):  Don't write empty authconfig
	line (#171558).
	* kickstart.py:  Make error reporting more useful with line numbers.

2005-10-21  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py: Only get filelists when needed

2005-10-21  Chris Lumens  <clumens@redhat.com>

	* scripts/upd-instroot:  Add email.* modules.  Remove directories we
	don't care about.

	* docs/command-line.txt:  Document new updates= behavior.
	* loader2/loader.h:  Add updatessrc to the loaderData.
	* loader2/loader.c (loadUpdatesFromRemote):  Retrieve updates.img from
	a remote machine.
	(parseCmdLineFlags):  Handle new updates= behavior.

2005-10-20  Jeremy Katz  <katzj@redhat.com>

	* splashscreen.py (splashScreenShow): Don't do xsetroot anymore.
	It makes things odd in some environments and doesn't buy us much
	with X starting with a solid black background.

2005-10-20  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* loader2/loader.c: Second stage module location no longer exists,
	stop trying to use it.
	* loader2/usb.c (usbInitializeMouse): Likewise.
	* loader2/hardware.c (scsiTapeInitialize): Likewise.
	* loader2/modules.c (mlLoadModuleSetLocation): Remove.
	* loader2/modules.h (mlLoadModuleSetLocation): Likewise.	

2005-10-20  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* loader2/urlinstall.c (loadUrlImages): minstg2.img instead of
	netstg2.img 
	* loader2/hdinstall.c (mountHDImages): minstg2.img instead of
	hdstg2.img
	* loader2/method.c (validIsoImages): Look for stage2.img instead
	of hdstg2.img

	* scripts/mk-images: mkcramfs is now mkfs.cramfs

2005-10-20  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/mk-images (padfile): Remove dead function.
	(makemainmodules): Likewise.
	(makebootdisk): Likewise.
	(findloopdevice): Likewise.
	(makedriverdisk): Likewise.
	* scripts/mk-images.ia64: Don't really need/want an ls120 image anymore

	* scripts/mk-images (INITRDMODS): Define modules used in common
	across all arches here. 
	(makeinstimage): Don't pass in modules for use here, they should
	all be in the initrd now.
	(makeSecondStage): Common makeSecondStage
	(doPostImages): Add a step to get called after boot images are
	created
	* scripts/mk-images.i386: Use common INITRDMODS and
	makeSecondStage, minor other cleanups.
	* scripts/mk-images.ia64: Likewise.
	* scripts/mk-images.s390: Likewise.
	* scripts/mk-images.x86_64: Likewise.
	* scripts/mk-images.ppc: Likewise.  Also, use doPostImages stuff.
	* scripts/mk-images.sparc64: Remove old file that's not correct
	for current stuff.
	* scripts/mk-images.alpha: Likewise.

2005-10-20  Chris Lumens  <clumens@redhat.com>

	* exception.py (dumpClass.keySkipList):  Don't dump language dicts.

2005-10-20  Paul Nasrat <pnasrat@redhat.com>

	* gui.py, text.py, yuminstall.py: Initial progress for depsolving

	* yuminstall.py: order transaction, transaction coloring

	* yuminstall.py: Speed improvements, progress bar

2005-10-20  Jeremy Katz  <katzj@redhat.com>

	* partitions.py (Partitions.sanityCheckAllRequests): Don't allow
	bootable partitions on xfs

2005-10-19  Chris Lumens  <clumens@redhat.com>

	* exception.py (copyExceptionToRemote, copyExceptionToFloppy,
	handleException):  Delete the interface in the proper place.
	* gui.py (ExceptionWindow, ScpWindow):  Add screen parameter to class
	so it matches text interface.
	* text.py (ExceptionWindow):  Move the exception handling screen into
	a class.
	(ScpWindow):  Add support for copying backtraces to a remote host in
	the text interface.

2005-10-18  Chris Lumens  <clumens@redhat.com>

	* exception.py (copyExceptionToRemote, copyExceptionToFloppy,
	handleException):  Break exception copying stuff out into its own
	functions so it's easier for handleException to run in a loop,
	therefore making the Cancel buttons do something other than reboot.
	* gui.py (ScpWindow):  Don't pop the busy cursor.
	(ExceptionWindow.run):  Add run method.
	(InstallInterface.exceptionWindow):  Return the ExceptionWindow
	instance.

2005-10-18  Paul Nasrat <pnasrat@redhat.com>

	* upgrade.py:  blacklist system-config-mouse

	* anaconda.spec: add yum dependencies

	* scripts/Makefile: install yumcache

	* scripts/yumcache: Create yum cache

2005-10-17  Chris Lumens  <clumens@redhat.com>

	* kickstart.py:  Import translation.

	* loader/selinux.c (loadpolicy):  Don't try to symlink again.

2005-10-14  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2005-10-14  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Call makeCharDeviceNodes.
	* iutil.py (makeCharDeviceNodes):  Add function to make character
	device nodes.
	* rescue.py (runRescue):  Call makeCharDeviceNodes.
	* isys/devnodes.c (devices):  Add /dev/input/event* nodes.

2005-10-13  Paul Nasrat  <pnasrat@redhat.com>

	* yuminstall.py: Fix typo

2005-10-12  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* dispatch.py: Remove unused import.  Pass intf to doPostAction

2005-10-12  Chris Lumens  <clumens@redhat.com>

	* scripts/upd-instroot:  Change location of modes data files.

2005-10-11  Jeremy Katz  <katzj@redhat.com>

	* floppy.py (hasFloppyDevice): Default return.

	* isys/devnodes.c: Make the ide drive device node creation cleaner.

2005-10-11  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Move warnings redirection here from kickstart.py.
	* kickstart.py:  Likewise.

	* floppy.py (hasFloppyDevice):  Return a boolean instead of an int.
	* floppy.py (makeBootdisk):  Removed.
	* gui.py (ExceptionWindow.__init__):  Use hasFloppyDevice.
	* text.py (InstallInterface.exceptionWindow):  Likewise.

2005-10-11  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot: Just remove test stuff (#170428)

	* iw/partition_gui.py (PartitionWindow.makeraidCB): Fix 
	traceback (#170189)

	* kickstart.py (Kickstart.postAction, Kickstart.preAction): Give
	visual indication of scriptlets running (#170017)

2005-10-10  Jeremy Katz  <katzj@redhat.com>

	* isys/imount.c: Actually assign the nfs mount opts to the right 
	variable

2005-10-10  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py: Handle missing metadata

2005-10-10  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* anaconda.spec:  Make rhpxl requirement conditional.
	* loader/loader2.c (main):  Add a newline.
	* scripts/upd-instroot:  Fix syntax error.

2005-10-07  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2005-10-07  Jeremy Katz  <katzj@redhat.com>

	* loader2/selinux.c (loadpolicy): load_policy changed how it
	works, let's try to keep it happy if we can instead of having to
	implement it ourselves.

	* scripts/upd-instroot (SELINUX): Create an selinux config.

2005-10-07  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Use rhpxl instead of rhpl for X configuration.
	* installclass.py:  Likewise.
	* xsetup.py:  Likewise.
	* command-stubs/rescue-startx-stub:  Likewise.

	* anaconda.spec:  Add rhpxl dependancy.
	* scripts/upd-instroot:  Likewise.

	* ui/exn.glade:  Fix word wrap so the dialog doesn't grow too much.

2005-10-06  Chris Lumens  <clumens@redhat.com>

	* anaconda (setupPythonUpdates):  Add pykickstart.

	* kickstart.py (KSshowwarnings):  Override warnings.showwarning to
	ensure kickstart DeprecationWarnings get logged.

	* partedUtils.py (get_partition_file_system_type):  Reorder cases so
	we don't run into a surprise None (#170003).

2005-10-05  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2005-10-05  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Reference pykickstart package.
	* kickstart.py:  Likewise.  Fixed up LVM and RAID partitioning typos.
	* kickstartData.py, kickstartParser.py:  Removed.
	* iw/network_gui.py (NetworkWindow.getNext):  Remove kickstart import.
	
	* anaconda.spec:  Pull in pykickstart package.
	* scripts/upd-instroot:  Likewise.  Pull in firstboot_module_window
	from the right place.

	* constants.py:  Pull in kickstart constants.

	* gui.py (InstallControlWindow.releaseNotesButtonClicked):  Display
	release notes instead of raising an exception.

2005-10-04  Chris Lumens  <clumens@redhat.com>

	* kickstart.py:  Switch to using new ksdata objects instead of lists
	of dictionaries which might contain certain keys, if we're lucky.
	* kickstartData.py:  Add objects for partition and network data.
	* kickstartParser.py:  Fix broken use of map action with callbacks
	instead.  Don't overwrite empty values in the ksdata with None at the
	end of each action.

2005-10-04  Jeremy Katz  <katzj@redhat.com>

	* kickstartParser.py (KickstartHandlers.doXConfig): Fix some defaults
	(KickstartHandlers.doXConfig): Revert, I'm backwards.

	* iw/autopart_type.py (PartitionTypeWindow.getNext): Skip
	bootloader screen if we're not reviewing/modifying 
	partitioning (#169817)

	* installclass.py (BaseInstallClass.setSteps): Make non-existent
	arch-specific step skipping permanent

	* iw/autopart_type.py (PartitionTypeWindow.getNext): Don't skip
	manual partitioning if we're doing custom partitions (#169001)
	(PartitionTypeWindow.comboChanged): Also make it obvious what's
	going on with custom partitioning + review checkbox 
	* ui/autopart.glade: Add callback.

	* textw/partition_text.py (PartitionTypeWindow.__call__): Properly
	shut down UI if custom partitioning selected.

2005-10-03  Jeremy Katz  <katzj@redhat.com>

	* anaconda (traceOnly): Add yuminstall to what we suck in (#169228)

2005-09-30  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* kickstart.py:  Fix location and name of ks script in run method.
	Make state and script attributed of the AnacondaKSParser object in
	line with kickstartParser changes.  Skip group-selection.
	* kickstartData.py:  Move constants here from kickstartParser, kill
	__str__ method since we'll have kickstartWriter soon instead.
	* kickstartParser.py:  Make state and script attributes of
	KickstartParser.  Fix %post scripts to run correctly.  Fix includes of
	scripts.

2005-09-27  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* kickstart.py:  Use AnacondaKSScript instead of Script class.
	Override KickstartParser.addScript so we have the run method.
	* kickstartData.py:  Reorganize.  Remove duplicate information.
	* kickstartParser.py:  Added a method to Script to print out the
	script in a form suitable for printing to a kickstart file.  Fix
	setattr on current ks command.  Prefix "ksdata" with "self." where it
	was missing.  Fix check for chroot script option.
	
2005-09-24  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2005-09-23  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py (YumBackend.deselectGroup): Fix group deselection
	to not remove everything

	* loader2/urlinstall.c: Silly fix for constant.

	* loader2/loader.c: Don't load parallel port module. (#169135)
	* loader2/loader.h (LOADER_FLAGS_NOPARPORT): Remove unused flag.
	* loader2/hardware.c (initializeParallelPort): Remove unused code.
	* loader2/hardware.h (initializeParallelPort): Remove declaration.	

2005-09-22  Chris Lumens  <clumens@redhat.com>

	* exception.py: Added a button to the exception dialog for saving
	the detailed traceback to a remote host via scp.  Thanks to Will Woods
	<wwoods@redhat.com> for the python scp control.
	* gui.py:  Likewise.
	* ui/exn.py:  Likewise.
	* ui/scp.py:  Likewise.

2005-09-22  Jeremy Katz  <katzj@redhat.com>

	* yuminstall.py: Adjust for yum api changes (returnNewestBy*
	always returns a list)

2005-09-21  Paul Nasrat <pnasrat@redhat.com>
	
	* scripts/mk-images.ppc: Single ppc boot image (#166625)
	* scripts/upd-instroot: Likewise
	* bootdisk/ppc/ofboot.b: Likewise
	* bootdisk/ppc/yaboot.conf.3264: Likewise
	* bootdisk/ppc/yaboot.conf.in: Likewise

	* bootdisk/ppc/ofboot.b.auto: removed
	* bootdisk/ppc/yaboot.conf.mac: removed
	* bootdisk/ppc/yaboot.conf.mac64: removed
	* bootdisk/ppc/yaboot.conf.pseries: removed

2005-09-20  Jeremy Katz  <katzj@redhat.com>
	
	* anaconda.spec: Bump version.

	* iw/simple_pkgselect.py: Simple group selection UI...
	* textw/simple_pkgselect_text.py: And the same for text mode

	* yuminstall.py (YumBackend): Some hacks for simple group
	selection UI.

	* dispatch.py (installSteps): Add simple group selection step.
	* gui.py (stepToClass): Likewise.
	* text.py (stepToClasses): Likewise.
	* installclass.py (BaseInstallClass.setSteps): Likewise.

2005-09-20  Paul Nasrat  <pnasrat@redhat.com>

	* yuminstall.py: ftp/http installation support

	* installclass.py: fix import

2005-09-20  Chris Lumens  <clumens@redhat.com>

	* loader2/init.c (doklog):  Don't copy null characters into the log
	file.

	* ui/exn.glade:  Added a glade file for exception dialogs.
	* cmdline.py (InstallInterface.exceptionWindow):  Rename params to
	match other interfaces.
	* constants.py:  Remove exceptionTextNoFloppy, reword exceptionText.
	* exception.py (handleException):  Provide name of traceback file.
	* gui.py (ExceptionWindow):  Use glade for the UI and add the full
	exception dump to the bottom of the dialog.
	* text.py (InstallInterface.exceptionWindow):  Rename params to match
	other interfaces.  Don't use exceptionTextNoFloppy.

2005-09-19  Chris Lumens  <clumens@redhat.com>

	* kickstartData.py:  Add package header data.
	* kickstartParser.py (KickstartParser.handlePackageHdr):  Likewise.

2005-09-19  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot (KEEPFILE): Fix some globs for x86_64.

	* loader2/module-info: Add skge. (#168590)

	* gui.py (InstallControlState.__init__): Look in /tmp/updates for
	help (... if we bring it back) (#168155)
	* text.py (InstallInterface.helpWindow): Likewise.

	* yuminstall.py (YumBackend.doInstall): Fix silly typo

2005-09-16  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* kickstartParser.py (KickstartHandlers.doNetwork): By default, we
	want onboot for network devices.

	* yuminstall.py (AnacondaYum.setup): Do macro setup ourselves.
	(YumBackend.doInstall): Add macro magic to speed up installs.

	* anaconda (setupPythonUpdates): repomd too.

	* anaconda (instClass): If there's only one visible installclass,
	don't ask about them either

	* installclasses/custom.py: Hide old install class.
	* installclasses/personal_desktop.py: Likewise.
	* installclasses/server.py: Likewise.
	* installclasses/workstation.py: Likewise.
	* installclasses/fedora.py: Add new Fedora install class.

	* yuminstall.py (AnacondaYum.__init__): Little bit of clean-up,
	remove some unused code.
	(YumBackend.__init__): Create config file sooner. 
	(YumBackend.doPreSelection): Get base install class package
	selection working in the short-term.
	(YumBackend): Implement groupExists, selectGroup, selectPackage
	and deselectPackage.

	* kickstart.py (AnacondaKSParser.handleCommand): Fix traceback.
	(Kickstart.setPackageSelection): Implement basic package selection.
	(Kickstart.setGroupSelection): ... and group selection.

	* installclass.py (BaseInstallClass.setPackageSelection): Use backend.
	(BaseInstallClass.setGroupSelection): Likewise.

	* dispatch.py (installSteps): Some comments to move stuff around,
	re-instate post action step.

	* backend.py (AnacondaBackend): Take instpath argument.  Stub in
	functions for basic package/group selection.

	* anaconda: Pass rootPath into backend.

2005-09-16  Paul Nasrat <pnasrat@redhat.com>

	* anaconda: Start to enable other install methods
	* backend.py: Method string not object for now
	* yuminstall.py: AnacondaYumConf for other methods

2005-09-16  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-initrd: Make a little bit easier to use by
	auto-canonicalizing the paths.  

	* isys/imount.c (doPwMount): Fix segfault when NFS mounting with
	no options.

2005-09-15  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* isys/imount.c (doPwMount): Make arguments for doPwMount
	simpler.  Use a bitmask of flags and pass extra data like
	mount(2). Use flags for nfs and pass arguments onto nfsmount().
	Kill some dead code.
	* isys/imount.c (doPwMount): Update prototype, add constants.
	* isys/isys.c (doMount): Update for new API.
	* loader2/cdinstall.c: Likewise.
	* loader2/driverdisk.c: Likewise.
	* loader2/hdinstall.c: Likewise.
	* loader2/loader.c: Likewise.
	* loader2/method.c: Likewise.
	* loader2/nfsinstall.c: Likewise.
	* loader2/usb.c: Likewise.

2005-09-15  Bill Nottingham  <notting@redhat.com>

	* loader2/firewire.c: Handle 'NULL' in device->driver.
	* loader2/hardware.c: Likewise.
	* loader2/pcmcia.c: Likewise.
	* loader2/usb.c: Likewise.

2005-09-15  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images.i386: No more --pcmcia.
	* scripts/mk-images.x86_64: Likewise.

2005-09-15  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (Kickstart.setInstallData):  Run %pre scripts.

2005-09-14  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* gui.py (stepToClass): More dead stuff.
	* text.py (stepToClasses): Likewise.

2005-09-14  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py (AnacondaYum.doPostInstall): set runlevel

2005-09-13  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* yuminstall.py (AnacondaYum.run): Fix install.log writing out
	some more.  We probably want to just have yum be passed a file
	which it then sets for the log file and the scriptFd eventually.

	* anaconda (setupPythonUpdates): Fix a thinko.

2005-09-13  Bill Nottingham  <notting@redhat.com>

	* loader2/hardware.c: Remove agpgartInitialize - agpgart is
	  built statically in 2.6 (and the probe code here won't work
	  now in any case...)
	* loader2/hardware.h: Likewise.
	* loader2/loader.c: Adjust accordingly.

	* loader2/pcmcia.c (getPcicController): Handle multiple
	PCIC types in one box.
	* loader2/pcmcia.c (startupPcmciaControllers): Add code to
	set resources for PCMCIA controllers, and enable them.
	(initializePcmciaController): Call it.
	(has_pcmcia, startPcmciaDevices, activate_device): Remove
	obsolete and ugly cruft.
	* loader2/pcmciatest.c: Remove obsolete file
	* loader2/hardware.c: Adjust for changes.
	* scripts/mk-images: Remove obsolete PCMCIA options
	* scripts/upd-instroot: Ship pcmciautils socket startup program.
	(mainly for debugging. It's tiny.)	
	
2005-09-13  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot: latest doesn't exist anymore, nuke.
	* scripts/mk-images: Likewise.

	* anaconda (setupPythonUpdates): Generalize setupRhplUpdates to
	work with things other than just rhpl.  For now, use for rhpl,
	yum, urlgrabber and rpmUtils

	* security.py (Security.write): log formatting fixes.

	* instdata.py (InstallData.write): authconfig's flags changed.  *sigh*

	* iw/network_gui.py (NetworkWindow.getNext): Don't enforce
	selinux/firewall here.  Use the object defaults.
	* textw/network_text.py (NetworkGlobalWindow.__call__): Likewise.

	* firewall.py (Firewall.__init__): Default firewall to allow ssh.

2005-09-13  Chris Lumens  <clumens@redhat.com>

	* kickstart.py:  Fill in the blanks on kickstart commands without
	handlers.
	* kickstartData.py:  Likewise.
	* kickstartParser.py:  Likewise.

2005-09-13  Jeremy Katz  <katzj@redhat.com>

	* packages.py: Remove unused import (for file that doesn't exist)

2005-09-12  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* iw/release_notes_viewer_gui.py: Switch to using
	gtkhtml2 instead of htmlbuffer for more complete HTML support.

	* scripts/upd-instroot: Add gnome-python2-gtkhtml2 stuff

	* yuminstall.py (YumBackend.doPreSelection): Do a minimal install
	if we ask for it until we get real package selection going.
	(AnacondaYum.run): Get RPM logging going to the install log.

	* packages.py: Remove obsolete pcmcia code.  This is irrelevant in
	today's world.
	* pcmcia.py: Remove dead file.

	* iw/fdisk_gui.py: Remove dead code.
	* iw/fdasd_gui.py: Likewise.
	* textw/fdisk_text.py: Likewise.
	* textw/fdasd_text.py: Likewise.

	* partitioning.py (partitionMethodSetup): Remove dead step code.
	(partitionObjectsInitialize): Set protected parts here.
	* dispatch.py (installSteps): Likewise.

	* installclass.py (BaseInstallClass.setSteps): More dead step nuking.

	* iw/xconfig_gui.py: Remove dead code.
	* textw/xconfig_text.py: Likewise.
	* iw/bootdisk_gui.py: Likewise.
	* iw/bootdisk_text.py: Likewise.

2005-09-12  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Move special PPC display stuff into rhpl functions.

	* kickstart.py  (AnacondaKSParser.doLangSupport):  Added to fix
	traceback.

	* kickstartData.py  (KickstartData.__init__):  Add more settings.
	* kickstartParser.py  (KickstartHandlers):  Likewise.

	* docs/kickstart-docs.txt:  Describe xconfig changes.

2005-09-12  Jeremy Katz  <katzj@redhat.com>

	* installclass.py (BaseInstallClass.setSteps): Nuke some dead steps.
	* dispatch.py (installSteps): Likewise.
	* gui.py (stepToClass): Likewise.
	* text.py (stepToClass): Likewise.

	* backend.py: Some imports...

	* packages.py (writeXConfiguration): Fix writeout of X server for
	new X backend code.

	* yuminstall.py (YumBackend.doPostInstall): Fix typo

	* dispatch.py (installSteps): Don't comment out findinstall.
	* installclass.py (showUpgrade): really disable upgrades for now

2005-09-12  Paul Nasrat <pnasrat@redhat.com>

	* utils/genhdlist.c: un-neuter for multilib composes

2005-09-09  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: Add videodrivers file so X will startup

2005-09-09  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version, fix rhpl requires.

2005-09-09  Bill Nottingham  <notting@redhat.com>

	* loader2/driverdisk.c, loader2/loader.c: Pass in the right
	  filename to pciReadDrivers()
	  
	* scripts/mk-images: Fix tyop.
	
	* scripts/mk-images: Ship videodrivers in first stage too.

2005-09-09  Paul Nasrat <pnasrat@redhat.com>
	
	* backend.py, yuminstall.py: start post install work

2005-09-09  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/mk-images (XDRIVERS): Fix tyop.

2005-09-09  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.
	* anaconda:  Make sure we have /dev/tty3 before trying to write to it.

2005-09-09  Bill Nottingham  <notting@redhat.com>

	* anaconda.spec: Bump version, tweak requirements
	* installclass.py (setVideoCard, configureX): Adapt to new rhpl
	  X setup code
	* kickstart.py (doXConfig): Likewise
	* kickstartData.py (__init__): Likewise
	* kickstartParser.py (doXConfig): Likewise
	* packages.py (writeXConfiguration): Likewise
	* xsetup.py (getArgList): Likewise
	* scripts/mk-images: Remove modules.pcimap, modules.usbmap,
	  pcitable, from images, and associated trimmer scripts from
	  files used. Add modules.alias, videoaliases. Trim modules.alias
	  using trimmodalias.
	* scripts/upd-instroot: Don't keep Cards, but keep videoaliases.
	  Don't run checkcards.py
	* utils/trimmodalias:  New script, trim modules.alias file to
	  match modules in the first/second stage
	* utils/trimpciids:  Trim pci.ids based on modules.alias and
	  videoaliases, not pcitable and modules.pcimap
	* utils/checkcards.py:  Remove now obsolete script
	* utils/trimmodmap:  Likewise
	* utils/trimpcitable:  Likewise
	* utils/trimusbmap:  Likewise
	* utils/Makefile: Adjust for changed/removed files

2005-09-08  Paul Nasrat <pnasrat@redhat.com>

	* scripts/pkgorder: Neuter pkgorder

	* utils/genhdlist.c: neuter genhdlist

2005-09-08  Jeremy Katz  <katzj@redhat.com>

	* gui.py: No help, let's see how it goes...

2005-09-08  Bill Nottingham  <notting@redhat.com>

	* scripts/mk-dd: Remove obsolete script

2005-09-08  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Catch all kickstart exceptions.  Pass the interface to
	the install class.
	* kickstart.py:  Straighten up exception throwing.  Add graphical
	exception dialog back.  Move KickstartPreParser here from
	kickstartParser.py since it's anaconda specific.
	* kickstartParser.py:  Don't copy certain attrs into the ksdata if
	they are None, as these will override our defaults.  Clean up
	exception handling.  Remove KickstartPreParser.

2005-09-07  Chris Lumens <clumens@redhat.com>

	* scripts/pythondeps:  Make sure there's a /tmp for logging.

2005-09-07  Paul Nasrat <pnasrat@redhat.com>

	* anaconda.spec: Bump version

2005-09-07  Chris Lumens  <clumens@redhat.com>

	* kickstart.py:  Modify skipSteps.  Set partition mount points to None
	where needed.
	* kickstartParser.py (KSOptionParser.error):  Fix typo.
	* partIntfHelpers.py (sanityCheckMountPoint):  Make error message
	useful.

2005-09-06  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Start using new kickstart code.
	* kickstart.py:  Likewise.
	* kickstartParser.py:  Runtime fixes.  Don't catch exceptions in
	handleCommand so they propagate up somewhere useful.

2005-09-06  Paul Nasrat  <pnasrat@redhat.com>

	* yuminstall.py: Fix selinux file_context handling

2005-09-01  Paul Nasrat  <pnasrat@redhat.com>

	* anaconda.spec: Bump version

	* anaconda, backend.py, dispatch.py, yuminstall.py whiteout.py:
	Make installs complete and correctly sort

2005-09-01  Chris Lumens  <clumens@redhat.com>

	* kickstartData.py:  Add more settings and defaults and a __str__
	method.
	* kickstartParser.py:  Add ability to mark arguments as required.
	Added partitioning handlers.

2005-08-31  Chris Lumens  <clumens@redhat.com>

	* kickstartData.py:  Add more settings and defaults.
	* kickstartParser.py:  Add processing for more commands.  Set values
	in data store from handlers.  Minor bug fixes.

2005-08-30  Chris Lumens  <clumens@redhat.com>

	* kickstartData.py, kickstartParser.py:  Added beginnings of unified
	kickstart parser and data store, though they're not hooked in yet.

2005-08-30  Jeremy Katz  <katzj@redhat.com>

	* exception.py (dumpClass): Stop spamming dumps with the release notes

	* loader2/module-info: Add qla2100 (#167065)

2005-08-30  Paul Nasrat <pnasrat@redhat.com>

	* anaconda, backend.py, dispatch.py, yuminstall.py:
	dispatch and yum backend integration

2005-08-29  Chris Lumens  <clumens@redhat.com>

	* installclass.py (BaseInstallClass.setAuthentication):  Simplified to
	store authconfig data as a string to be passed to authconfig without
	mangling.
	* kickstart.py (Kickstart.doAuthconfig):  Likewise.
	* instdata.py (InstallData.write, InstallData.writeKS):  Likewise.

	* dispatch.py (installSteps):  Removed authentication step.
	* gui.py (stepToClass):  Likewise.
	* text.py (stepToClasses):  Likewise.
	* installclasses/personal_desktop.py:  Likewise.
	* installclasses/server.py:  Likewise.

	* packages.py (handleMiscPackages):  Check string instead of instdata
	values.
	* users.py (Authentication):  Removed.
	* iw/auth_gui.py:  Removed.
	* textw/userauth_text.py (UsersWindow, AuthConfigWindow):  Removed.

2005-08-29  Jeremy Katz  <katzj@redhat.com>

	* anaconda: Don't translate temporary text.  Also, don't warn me
	in test mode, I get it.

	* iw/autopart_type.py (PartitionTypeWindow.getScreen): Fix a
	traceback from clumens

2005-08-26  Jeremy Katz  <katzj@redhat.com>

	* dispatch.py (installSteps): Add new autopart type step, remove
	some obsolete stuff (fdisk, fdasd)
	* gui.py (stepToClass): Add new step.
	(getGladeWidget): Add helper function for glade screens.
	* text.py (stepToClasses): Add new step.
	* installclass.py (BaseInstallClass.setSteps): Add new step.
	* iw/autopart_type.py: Add first pass at new autopartitioning
	screen.  Still want to make the shown options more dynamic based
	on what your system initially looks like.
	* textw/partition_text.py: Add new autopartitioning screen.
	* ui/autopart.glade: Add glade file for new autopartitioning screen.

2005-08-25  Jeremy Katz  <katzj@redhat.com>

	* network.py (NetworkDevice.__init__): Don't set some types that
	aren't really relevant (#136188, #157193)

2005-08-24  Matt Wilson  <msw@rpath.com>

	* loader2/loader.c: Disable selinux if mounting /selinux fails.

2005-08-23  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.c: We don't use /dev/ptyp* anymore, so our pty major
	is different.  Check for the range to fix getting a shell with
	telnet installs (#165437)

2005-08-19  Paul Nasrat <pnasrat@redhat.com>

	* anaconda.spec: Bump version

	* packages.py: remove rpmErrorClass

	* packages.py: remove sortPackages

	* packages.py: Extract InstallCallback

	* packages.py: remove now uncalled anacondaTS

	* anaconda: fixup temporary warnings

	* anaconda: warn for nfs installs

	* anaconda, dispatch.py, packages.py: break all but nfs installs

	* dispatch.py, packages.py: Extract checkDependencies

	* dispatch.py, packages.py: Extract readPackages

	* packages.py: remove unused function

	* harddrive.py, image.py, installmethod.py, urlinstall.py:
	Simplify findBestFileMatch

	* harddrive.py, image.py, installmethod.py, urlinstall.py:
	Remove legacy comps reading

2005-08-18  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2005-08-17  Jeremy Katz  <katzj@redhat.com>

	* loader2/net.c: Add support for ksdevice=bootif with patch from
	Alex Kiernan (alex.kiernan@gmail.com).  This plus "IPAPPEND 2" in
	your pxelinux config will set your install device to the one you
	pxebooted from.  (#166135)
	* loader2/loader.h: Likewise.
	* loader2/loader.c: Likewise.
	* docs/command-line.txt: Document it!

2005-08-17  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (Kickstart.doMouse):  Don't silently fail anymore.
	* docs/kickstart-docs.txt:  Document change.

2005-08-16  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILE): Fix paths to some python stuff
	for lib64 systems

2005-08-16  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Init tty3 logger in the right place to fix scripts.
	* anaconda_log.py (AnacondaLog.__init__):  Likewise.

	* iutil.py (getPPCMachine):  Add support for Pegasos machine
	(dwmw2, #166013).
	* partedUtils.py (getDefaultDiskType):  Likewise.

	* tree.py:  Remove unused code.

	* loader2/kickstart.c (ksReadCommands):  Correctly detect when we're
	in a ks file section (dlehman, #165865).

	* scripts/upd-instroot:  Switch to Sazanami Japanese font (#166045).

2005-08-16  Jeremy Katz  <katzj@redhat.com>

	* iw/installpath_gui.py: Remove unused vars (msw@rpath.com)

	* autopart.py (autoCreatePartitionRequests): Fix for autopart with
	not lvm (msw@rpath.com)

2005-08-15  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2005-08-15  Jeremy Katz  <katzj@redhat.com>

	* kickstart.py (Kickstart.readKickstart): Remove obsolete and dead
	--ignoredeps stuff (#165224).
	* instdata.py (InstallData.writePackagesKS): Likewise.
	* packages.py (checkDependencies): Likewise.
	* docs/kickstart-docs.txt: Likewise.

2005-08-15  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Accept loglevel= and syslog= command line options.
	Establish connection to remote syslog process if needed.
	* anaconda_log.py (AnacondaLog.__init__):  Keep a log on tty3.
	* anaconda_log.py (AnacondaLog.addSysLogHandler):  Use argument for
	which logger to add handler to.
	* docs/command-line.txt:  Explain new options.
	* loader2/loader.c:  Accept loglevel= and syslog= command line options.
	* loader2/loader.h:  Add logLevel to loaderData.
	* loader2/log.c:  Use macro for level.

2005-08-15  Paul Nasrat <pnasrat@redhat.com>

	* textw/network_text.py: 165934 typo

2005-08-12  Chris Lumens  <clumens@redhat.com>

	* bootloader.py, desktop.py, exception.py, firewall.py, floppy.py,
	fsset.py, harddrive.py, hdrlist.py, image.py, installclass.py,
	installmethod.py, iutil.py, network.py, partRequests.py,
	partedUtils.py, partitioning.py, partitions.py, pcmcia.py, raid.py,
	rescue.py, security.py, syslogd.py, text.py, timezone.py, upgrade.py,
	urlinstall.py, users.py, vnc.py, whiteout.py, yuminstall.py, zfcp.py,
	iw/lvm_dialog_gui.py, iw/package_gui.py, iw/partition_gui.py,
	iw/progress_gui.py, iw/upgrade_migratefs_gui.py,
	iw/upgrade_swap_gui.py, iw/xconfig_gui.py, textw/bootloader_text.py,
	textw/keyboard_text.py, textw/language_text.py, textw/network_text.py,
	textw/packages_text.py, textw/partition_text.py,
	textw/progress_text.py, textw/upgrade_text.py, textw/zfcp_text.py:
	Use new logging system.
	* loader2/log.c (logMessage):  Don't write to the same file twice.

	* loader2/log.c (logMessage), loader2/log.h:  Support the same sort of
	logging levels and output style as we do in the python portion of the
	installer.
	* loader2/cdinstall.c, loader2/driverdisk.c, loader2/driverselect.c,
	loader2/firewire.c, loader2/getparts.c, loader2/hardware.c,
	loader2/hdinstall.c, loader2/kbd.c, loader2/kickstart.c,
	loader2/lang.c, loader2/loader.c, loader2/loadermisc.c,
	loader2/mediacheck.c, loader2/method.c, loader2/modstubs.c,
	loader2/modules.c, loader2/net.c, loader2/nfsinstall.c,
	loader2/pcmcia.c, loader2/selinux.c, loader2/telnet.c,
	loader2/telnetd.c, loader2/urlinstall.c, loader2/urls.c,
	loader2/usb.c:  Use new logging level support.

2005-08-11  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Use new logging system.
	* anaconda_log.py:  Reimplemented using python's logging class, which
	gets us log levels and the ability to write the logs to all sorts of
	places.  Files that have not been converted from rhpl.log will
	currently log to tty1.  Currently defaulting to verbose.
	* autopart.py:  Use a separate logger for LVM debugging.
	* language.py:  No logging here.

	* cmdline.py, dispatch.py, gui.py, hdrlist.py, kickstart.py, lvm.py,
	packages.py, text.py, isys/isys.py, scripts/pkgorder:  Converted to
	new logging system.

2005-08-10  Jeremy Katz  <katzj@redhat.com>

	* isomd5sum/libcheckisomd5.c: Fix buffer overrun (from Dustin
	Kirkland <dustin.kirkland@us.ibm.com>

2005-08-03  Bill Nottingham  <notting@redhat.com>

	* ui/Makefile: fix make clean

2005-08-01  Jeremy Katz  <katzj@redhat.com>

	* loader2/module-info: Add mptspi and mptfc for new driver split

2005-07-29  Jeremy Katz  <katzj@redhat.com>

	* loader2/driverdisk.c (loadDriverFromMedia): Apply patch from 
	Akinobu Mita <mita@miraclelinux.com> to fix dd off of sda1:/dd.img

2005-07-26  Jeremy Katz  <katzj@redhat.com>

	* gui-tags.txt: Remove unused file.

	* scripts/makestamp.py (opts): Fix from dgregor for passing
	timestamp in (#163875)

2005-07-21  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* dispatch.py (installSteps):  Remove firewall step.
	* gui.py (stepToClass):  Likewise.
	* kickstart.py (Kickstart.setSteps):  Likewise.
	* text.py (stepToClasses):  Likewise.
	* firewall.py:  Remove Service class.
	* installclass.py (BaseInstallClass.setFirewall):  Interactive
	kickstart installs can no longer see a firewall config screen, so
	simplify this method.
	* iw/network_gui.py (NetworkWindow.getNext):  Initialize firewall and
	SELinux.
	* textw/network_text.py (NetworkGlobalWindow.__call__):  Likewise.
	* iw/firewall_gui.py:  Removed.
	* textw/firewall_text.py:  Likewise.

2005-07-21  Bill Nottingham <notting@redhat.com>

	* network.py: Use the right enum. Not that it makes
	  much difference here.

2005-07-20  Paul Nasrat <pnasrat@redhat.com>

	* anaconda.spec:  Bump version.

	* dispatch.py: Work in yum for testing

	* installclass.py: Work in yum for testing

	* scripts/mk-images.ppc: sungem_phy

2005-07-15  Paul Nasrat <pnasrat@redhat.com>

	* fsset.py: Fix for writing boot flag to first part #157245

2005-07-13  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.
	* installclass.py (BaseInstallClass.setNetwork):  Use list of all
	network devices so the firstdev is properly excluded and multiple NICs
	works in kickstart (#158556).
	* network.py (Network.__init__):  Set firstnetdevice from
	/tmp/netinfo as part of above.

2005-07-11  Paul Nasrat <pnasrat@redhat.com>

	* kickstart.py: name.arch fix from Florian

2005-07-08  Paul Nasrat <pnasrat@redhat.com>

	* yuminstall.py: Solve dependencies and pull files from right place

2005-07-08  Jeremy Katz  <katzj@redhat.com>

	* partitions.py (Partitions.getBootableRequest): Nuke some dead code.

	* scripts/mk-images.ia64 (image): Bump ia64 boot.img size (#162801)

	* autopart.py (doAutoPartition): Fix from lxo for 
	clearpart --none (#162445)

	* scripts/upd-instroot (KEEPFILERESCUE): Add rsync (#162292)

2005-07-07  Chris Lumens  <clumens@redhat.com>

	* iw/progress_gui.py (InstallProgressWindow_NEW.getScreen):  Work
	around pygtk progress table bug.

2005-07-07  Paul Nasrat <pnasrat@redhat.com>

	* anaconda.spec:  Bump version.

2005-07-06  Jeremy Katz  <katzj@redhat.com>

	* packages.py (handleMiscPackages): Select kernel-devel if we
	install kernel and gcc even if we installed kernel-smp also (#160533)

2005-07-01  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images: Fixups for ia64 images from prarit (#162072)
	* scripts/mk-images.ia64: Likewise.

2005-06-30  Paul Nasrat <pnasrat@redhat.com>

	* scripts/upd-instroot: add rpmUtils
	* scripts/upd-instroot: Include yum libraries in stage2
	* yuminstall.py: Initial stubbing for yum back end

2005-06-30  Chris Lumens  <clumens@redhat.com>

	* gzread.py:  Removed.

2005-06-29  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2005-06-28  Chris Lumens  <clumens@redhat.com>

	* exception.py (dumpClass.keySkipList):  Remove references to
	langsupport.
	* packages.py (selectLanguageSupportGroups):  Likewise.
	* iw/language_gui.py (LanguageWindow.getNext):  Likewise.
	* textw/language_text.py (LanguageWindow.__call__):  Likewise.
	* installclass.py (BaseInstallClass.setLanguageSupport):  Removed.
	* kickstart.py (Kickstart.doLangSupport):  Removed langsupport keyword.
	* language.py (Language):  Remove langsupport and langInfoByName
	lists; and getSupported, getAllSupported, and setSupported methods.

	* docs/kickstart-docs.txt:  Mark langsupport as deprecated and explain
	what to do instead.  Also clarify the purpose of the lang keyword.

	* Makefile:  Remove locale-list.
	* scripts/genlocalelist.py:  Likewise.
	* scripts/upd-instroot (KEEPFILE):  Likewise.

2005-06-27  Chris Lumens  <clumens@redhat.com>

	* fsset.py:  Add a clobberDevice method used for obliterating
	identifying information and call it before formatting.
	* isys/isys.c (doClobberExt2):  Add function to clobber ext2
	filesystems.
	* isys/isys.py (ext2Clobber):  Glue.

2005-06-24  Chris Lumens  <clumens@redhat.com>

	* scripts/upd-instroot (KEEPFILEGR):  libpixman is required for cairo
	(#161556).

2005-06-23  Chris Lumens  <clumens@redhat.com>

	* isys/isys.py (oldSwapLabelMunge):  Remove method in addition to
	calls.

2005-06-22  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.py (oldSwapLabelMunge): Nuke it.

	* scripts/upd-instroot (KEEPFILEGR): Add cairo for new pango/gtk

2005-06-21  Chris Lumens  <clumens@redhat.com>

	* fsset.py (AutoFileSystem):  Add mount and umount methods so entries
	in /etc/fstab marked as "auto" can still be mounted on upgrade
	(#160986).
	* language.py (Language.setDefault):  Canonicalize default language
	(#160923).
	* upgrade.py:  Remove the comment that's no longer correct.

2005-06-20  Bill Nottingham  <notting@redhat.com>

	* anaconda.spec: Bump version

	* utils/genhdlist.c: Reliance on undefined behavior is fun!
	
2005-06-17  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2005-06-17  Chris Lumens  <clumens@redhat.com>

	* gui.py (InstallControlWindow.loadReleaseNotes):  Some FTP servers
	cause urllib to give us back an empty file for files that don't exist,
	rather than an exception  (#160262).

2005-06-16  Chris Lumens  <clumens@redhat.com>

	* isys/eddsupport.c (readDiskSig):  Close file descriptor leak
	relating to reading the partition table (Jon Burgess, #160693).

2005-06-16  Paul Nasrat <pnasrat@redhat.com>

	* anaconda: Fix typo breaking pseries console support (#160573)

2005-06-15  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (Kickstart.setPackageSelection,
	Kickstart.setGroupSelection):  Allow ignoring packages without having
	to specify architecture (#160209).

	* scripts/upd-instroot:  Add gpart to the i386 rescue image (#55532).
	
2005-06-13  Jeremy Katz  <katzj@redhat.com>

	* anaconda: Start the warnings for mixed tabs/spaces.
	Or not.  Far too many changes needed.

	* Makefile Makefile.inc mini-wm.c xmouse.c xutils.c isys/Makefile
	isys/isys.c isys/lang.c isys/smp.c isys/uncpio.c
	isys/gzlib/Makefile isys/gzlib/inflate.c loader2/Makefile
	loader2/driverdisk.c loader2/driverselect.c loader2/hdinstall.c
	loader2/init.c loader2/kickstart.c loader2/loader.c
	loader2/loadermisc.c loader2/moduleinfo.h loader2/modules.c
	loader2/net.c loader2/nfsinstall.c loader2/telnet.c
	loader2/undomounts.c loader2/urlinstall.c utils/Makefile
	utils/genhdlist.c utils/mapshdr.c utils/snarffont.c: Define cflags
	in one place (Makefile.inc) and use a consistent set
	everywhere. Fix up some of the compile warnings this uncovered.
	Also fix a few more things that -Wextra turned up. 

2005-06-07  Jeremy Katz  <katzj@redhat.com>

	* isys/lang.c (bterm_main): Use the full font first (#159505)

	* partitions.py (Partitions.writeKS): And use the quoted format so
	we get it everywhere (#159193)

	* fsset.py (FileSystemType.getName): Pass back quoted fsname if needed.

	* packages.py (rpmErrorClass.install_callback): Don't segfault
	before removes, should fix upgrades.

2005-06-01  Chris Lumens  <clumens@redhat.com>

	* packages.py (doInstall):  Fixed grammar problem (#159044).
	* iw/congrats_gui.py (CongratulationWindow.getScreen):  Simplify text
	(#156408).
	* textw/complete_text.py (FinishedWindow.__call__):  Likewise.
	* po/:  update-po.

2005-05-31  Chris Lumens  <clumens@redhat.com>

	* fsset.py (RAIDDevice.mdadmLine):  Revert to super-major behavior for
	volumes that aren't activated either (#159079, #159182).

2005-05-25  Chris Lumens  <clumens@redhat.com>

	* iw/lvm_dialog_gui.py:  Use sizes of PV requests instead of
	preexisting PVs on volume group editor screen (#158696).

2005-05-24  Peter Jones  <pjones@redhat.com>

	* autopart.py (doAutoPartition):  Don't consider drives without
	free space as candidates on which to put partitions.

2005-05-24  Chris Lumens  <clumens@redhat.com>

	* packages.py:  Automatically select any conditional packages that
	are required by currently selected groups.  This step used to be only
	needed for parts of language support, but is now needed more widely
	(#154572, #158389).
	* dispatch.py (installSteps):  Likewise.
	* installclass.py (BaseInstallClass.setSteps):  Likewise.
	* upgradeclass.py (BaseInstallClass.setSteps):  Likewise.

2005-05-23  Jeremy Katz  <katzj@redhat.com>

	* partedUtils.py (DiskSet.getLabels): Look for labels on all
	fstypes.  

	* loader2/modules.c (loadModule): usb-storage has reached new
	levels of awful and now doesn't enumerate the devices with
	anything approaching a reasonable speed.  Add a sleep to wait for
	some devices to show up

	* isys/isys.py (oldSwapLabelMunge): Munge old swap label format to
	the new version.  Elliot's first pass wasn't accepted upstream so
	we need to try to do some conversion.  We should probably nuke
	this code for FC5 or FC6.

	* bootloader.py (writeBootloader): Only update the default if
	we're setting the default to linux (#156678)

	* hdrlist.py (DependencyChecker.callback): Make the comments a
	little clearer

	* upgrade.py (upgradeFindPackages): Ensure we don't leave deps
	stranded that we could have solved (#157754)

	* iw/progress_gui.py (InstallProgressWindow_NEW.setPackage): Limit
	the length of the package installing string to try to avoid
	jumping (#157583)

	* autopart.py (partlist.getFreeSpace): Fix problem Chris and Paul
	saw on Friday where manual partition growing would stop at the
	size of the partition.  When imposing a max size based on the free
	sectors available, it should remember how big the part originally was.

	* kickstart.py (Kickstart.setGroupSelection): Allow excluding
	packages based on arch (Dave Lehman, #158370)

	* loader2/net.c: Don't spew an error if you don't set the wepkey
	or essid (#158223)

	* loader2/module-info: Add megaraid (#157420).  Go through the
	kernel and add other new drivers that I noticed.

2005-05-23  Chris Lumens  <clumens@redhat.com>

	* isys/isys.c:  Left pad UUID chunks with zeros to eight places.

2005-05-20  Paul Nasrat <pnasrat@redhat.com>

	* scripts/upd-instroot: PACKAGESGR for synaptics

2005-05-19  Jeremy Katz  <katzj@redhat.com>

	* loader2/telnetd.c: Switch to using ptys via devpts instead of
	hard-coded ptyp* (#124248)

2005-05-19  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* fsset.py (prepbootFileSystem.__init__): PReP partitions should
	be marked bootable, from Dustin Kirkland.

	* raid.py (availRaidLevels): Allow ppc to have a RAID /boot, from
	Dustin Kirkland.

	* partitions.py (Partitions.getBootableRequest): Split
	PMac/pSeries handling to be different.  pSeries can do bootable
	PReP.  Patch from Dustin Kirkland <dustin.kirkland@us.ibm.com>

	* exception.py (handleException): Just exit on the bdbQuit exception.

	* textw/bootloader_text.py (BootloaderImagesWindow.__call__):
	Support deletion of images in text mode (#125358).  After FC4 goes
	out, we'll want to uncomment the new help line.

2005-05-19  Chris Lumens  <clumens@redhat.com>

	* fsset.py (RAIDDevice.mdadmLine):  Use the UUID instead of the
	super-minor, unless the UUID is somehow not available (#136051).
	* isys/isys.c:  Converted to using kernel MD headers instead of our
	own internal copies.  Return the RAID's UUID from the superblock as
	well.
	* isys/md-int.h:  Don't need this anymore.

2005-05-19  Jeremy Katz  <katzj@redhat.com>

	* loader2/urlinstall.c (loadUrlImages): Use the constant, bumped
	to 192M to try to avoid OOM situations (#157274)

	* loader2/loader.h (GUI_STAGE2_RAM): Add constant for when to do a
	graphical install with stage2.img loaded into RAM.

2005-05-19  Paul Nasrat <pnasrat@redhat.com>

	* scripts/mk-images.ppc, bootdisk/ppc/ofboot.b.auto:
	magic boot for macs

	* scripts/upd-instroot: Include synaptics for x configuration

2005-05-18  Jeremy Katz  <katzj@redhat.com>

	* iw/network_gui.py (NetworkWindow.getNext): Don't depend on 
	class as closely (#158134)

2005-05-17  Bill Nottingham <notting@redhat.com>

	* loader2/method.c: The arch could be up to 65 character;
	a little more storage won't hurt.

2005-05-17  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2005-05-17  Bill Nottingham  <notting@redhat.com>

	* scripts/mk-images: Add arch to buildstamp...
	
	* loader2/method.c: ... and check it. (#151927)

2005-05-17  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2005-05-17  Peter Jones  <pjones@redhat.com>

	* loader2/selinux.h: switch from system_u:object_r:anaconda_t to
	system_u:system_r:anaconda_t .

2005-05-16  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot: Keep email python stuff (#157709)

2005-05-16  Chris Lumens  <clumens@redhat.com>

	* scripts/splittree.py (Timber.createSplitDirs):  Handle traversing
	directories on a symlink (David Kuestler, #157722).
	* scripts/splittree.py (Timber.getSize):  Fix typo, integer overflow
	(David Kuestler, #157721).
	* scripts/splittree.py (usage):  Change example arguments to match
	current number of discs (David Kuestler, #157723).

2005-05-12  Paul Nasrat <pnasrat@redhat.com>

	* upgrade.py: (name, arch) tuples for blacklist
	Add x86_64 perl.i386 to blacklist (#156658)

2005-05-11  Chris Lumens  <clumens@redhat.com>

	* isys/isys.py (compareDrives):  Make drive sorting smarter.

2005-05-10  Jeremy Katz  <katzj@redhat.com>

	* kickstart.py: Remove %installclass support.  It's
	been in the code for five years.  And it's been broken the entire
	time. (#149690)

2005-05-10  Paul Nasrat <pnasrat@redhat.com>

	* kickstart.py: fix thinko

2005-05-06  Chris Lumens  <clumens@redhat.com>

	* autopart.py (doAutoPartition):  Also remove bogus preexisting RAID
	information when doing kickstart installs (#88359).

2005-05-06  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot: Pretend we have nano too.

2005-05-05  Jeremy Katz  <katzj@redhat.com>

	* loader2/cdinstall.c: Don't load stage2.img into RAM if they boot
	with 'text' (#155398)

2005-05-05  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/pkgorder: This used EverythingExclude.

2005-05-05  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2005-05-05  Paul Nasrat <pnasrat@redhat.com>

	* loader2/loader.c: fix typo

2005-05-05  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILE): Pull in more selinux policy
	files for dwalsh

2005-05-04  Jeremy Katz  <katzj@redhat.com>
	
	* fsset.py (HfsPlusFileSystem.__init__): Add hfs+ support.

	* autopart.py (growParts): Don't try to grow a partition beyond 
	the size of the largest free space.  Fixes pathological problem 
	hit when installing a dual boot with MacOS X. 

	* hdrlist.py (EverythingExclude): Add the gfs kernel module
	packages to the everything exclude list too... we need to do this
	better :-/ (#156849)

2005-05-04  Chris Lumens  <clumens@redhat.com>

	* packages.py (selectLanguageSupportGroups):  Unselect the language
	support group if no languages besides en_US are supported.

2005-05-03  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2005-05-03  Chris Lumens  <clumens@redhat.com>

	* autopart.py (doAutoPartition):  Remove bogus preexisting LVM
	information when doing kickstart installs with --onpart for everything
	(#156283, possibly others).
	* partRequests.py (LogicalVolumeRequestSpec.__str__):  Allow the
	resulting string to be put into a call to rhpl.log.

2005-05-03  Bill Nottingham  <notting@redhat.com>

	* loader2/init.c: always reset terminal attributes on ppc (#156411)

2005-05-03  Jeremy Katz  <katzj@redhat.com>

	* anaconda: More pmac X hacking -- look at what the fb is running
	at and use that as the resolution to try.

2005-05-02  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* iw/progress_gui.py (InstallProgressWindow_NEW.setPackage):
	Slightly shorter strings.

	* anaconda: If the monitor doesn't support 800x600, try 1024x768;
	helps with G3 iMac.  Use the same xconfig for post-install as
	during install.  Allow booting with "usefbx" to go back to old
	fbdev X behavior on ppc. (#149188)
	* loader2/loader.c (parseCmdLineFlags): Add usefbx

2005-05-02  Chris Lumens  <clumens@redhat.com>

	* image.py  (NfsIsoInstallMethod.__init__):  Fix parameter passing so
	mounted ISO image installs work again, too.
	* packages.py  (selectLanguageSupportGroups):  Select language support
	package for install-time language.

2005-04-29  Jeremy Katz  <katzj@redhat.com>

	* packages.py (InstallCallback.cb): Switch these back.  Otherwise,
	things are wrong in GUI.  Text mode is just not going to be quite
	right with the text.

	* image.py (CdromInstallMethod.getRPMFilename): Beep when asking
	to insert the CD, not after... 

2005-04-28  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot (LC_ALL): Don't do the locale trimming in
	an attempt to fix Chinese.
	(KEEPFILEGR): Add bluecurve icons back since we should be 
	using them now.

2005-04-28  Chris Lumens  <clumens@redhat.com>

	* fsset.py (readFstab):  Don't skip bind mounts with an fstype of none
	on upgrades (#151458).

	* harddrive.py (HardDriveInstallMethod.__init__):  Fix parameter
	passing so ISO image installs work again.

2005-04-28  Peter Jones  <pjones@redhat.com>:
	
	* mediacheck.h: add FRAGMENT_SUM_LENGTH here, fix parsepvd prototype.
	* mediacheck.c: remove FRAGMENT_SUM_LENGTH, include mediacheck.h,
	fix some declarations
	* cdinstall.c: fix parsepvd call for new prototype.

2005-04-27  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* installmethod.py (doMethodComplete): Figure out rootfs better
	* dispatch.py (installSteps): Pass id.fsset to methodcomplete.

2005-04-27  Peter Jones  <pjones@redhat.com>

	* installmethod.py (doMethodComplete): write a minimal mtab when
	we're done installing, so fsck/mount don't complain on first boot.

2005-04-27  Jeremy Katz  <katzj@redhat.com>

	* loader2/undomounts.c: Stop error'ing out on umounting of (tmpfs) /dev

	* hdrlist.py (betterPackageForProvides): Nuke debug code.

	* partitions.py (Partitions.setFromDisk): Fix lvs showing up with
	a mountpoint of 0 (#153965)

	* text.py (InstallInterface.messageWindow): Properly return the
	idx of the return on a custom messageWindow

	* image.py (presentRequiredMediaMessage): Add back button for
	required media message (#114770)
	* textw/confirm_text.py (BeginUpgradeWindow.__call__): Likewise.
	(BeginInstallWindow.__call__): Likewise.
	* iw/confirm_gui.py (UpgradeConfirmWindow.getNext) 
	(InstallConfirmWindow.getNext): Likewise.

	* scripts/mk-images.i386: Bump size of diskboot.img
	* scripts/mk-images.x86_64: Likewise.

	* textw/partition_text.py (PartitionWindow.__call__): Give a
	little bit more room for cylinder #s (#119767)

	* gui.py (InstallInterface.run): Don't set SUPPORTED 
	unnecessarily (#155847)
	* language.py (Language.getDefault): Likewise.
	* text.py (InstallInterface.run): Likewise.

	* iutil.py (writeRpmPlatform): patch from Joe Pruett to improve
	rpmarch= support (#101971)

	* iw/ipwidget.py (IPEditor.dehydrate): Make sure people get
	decimal IP addrs.  (#156088)

2005-04-27  Chris Lumens  <clumens@redhat.com>

	* docs/kickstart-docs.txt:  Updated for new --label parameter.
	* fsset.py:  Modify LabelFactory to use kickstart-provided
	filesystem labels if possible, and make up new ones otherwise.
	* kickstart.py:  Recognize --label for the part keyword  (#79832).
	* partRequests.py:  Pass labels between kickstart and requests.

	* language.py (Language.__init__):  Set a default font for bterm and
	none, which only mean something to the loader (#156052).

2005-04-27  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.c (doDevSpaceFree): Apply Jindrich Novy's patch to fix
	space calculation on > 2 TB devices (#155709)

	* cmdline.py (progressDisplay.setPackageStatus): Don't spam about
	package downloads in cmdline mode (#155250)

2005-04-27  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/hardware.c (detectHardware): Probe macio (pnasrat, #154846)

	* packages.py (InstallCallback.cb): Fix order of retry/reboot (#155884)

2005-04-26  Jeremy Katz  <katzj@redhat.com>

	* isomd5sum/libimplantisomd5.c: Add Dustin Kirkland's patch for
	implanting the isomd5 fragments. 
	* isomd5sum/libcheckisomd5.c: Add Dustin's patch to give slightly
	more verbose output.

	* packages.py (handleMiscPackages): Only select a kernel-smp that
	matches the arch of the primary kernel (#149618).  Remove dead code.

2005-04-26  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2005-04-26  Jeremy Katz  <katzj@redhat.com>

	* image.py (CdromInstallMethod.getRPMFilename): Beep if we need to
	insert a new CD (#109264)

	* harddrive.py (HardDriveInstallMethod.__init__): Do method
	parsing here instead of in anaconda.  Pass intf down.
	* image.py (ImageInstallMethod.__init__): Likewise.
	* image.py (CdromImageInstallMethod.__init__): Likewise.	
	* image.py (NfsInstallMethod.__init__): Likewise.	
	* image.py (NfsISOInstallMethod.__init__): Likewise.
	* installmethod.py (InstallMethod.__init__): Likewise.
	* urlinstall.py (UrlInstallMethod.__init__): Likewise.

	* anaconda: Make method __init__'s all basically act the same

	* hdrlist.py (EverythingExclude): Add kernel-smp-devel and
	kernel-hugemem-devel to the exclude too

2004-04-26  Chris Lumens  <clumens@redhat.com>

	* gui.py (InstallControlWindow.setLanguage):  Work around the buttons
	being drawn in English only.  Thanks to Ronny Buchmann for the patch.
	* iw/language_gui.py  (LanguageWindow.getNext):  Likewise.

	* isys/isys.c (doLoSetup):  Don't overflow the buffer when copying
	over image location in case loopback images are buried (#154715).
	* loader2/method.c (mountLoopback):  Likewise.

2005-04-26  Peter Jones  <pjones@redhat.com>

	* isomd5sum/libcheckisomd5.c: sync the code with loader's version.
	Also check result from read to make sure it's not larger than 
	requested.
	* loader2/mediacheck.c: sync the code with isomd5sum's version.

2005-04-26  Jeremy Katz  <katzj@redhat.com>

	* iw/congrats_gui.py (CongratulationWindow.getScreen): Beep on
	install completion (#116681)

	* text.py (InstallInterface.beep): Add no-op beep method.  Could
	actually do something if newtBell() were bound in snack.

	* cmdline.py (InstallInterface.beep): Add (no-op) beep method.

	* gui.py (InstallInterface.beep): Add beep method.

	* scripts/mk-images.x86_64 (COMMONMODULES): Add pcspkr module.
	* scripts/mk-images.i386 (COMMONMODULES): Likewise.
	
	* loader2/loader.c (main): Load pcspkr module.

2005-04-25  Chris Lumens  <clumens@redhat.com>

	* iw/language_gui.py (LanguageWindow.getNext):  Set language properly
	on CD and nopass installs  (#149688).  Also fixes the button bar
	disappearing on CD installs (#151837).
	* textw/language_text.py  (LanguageWindow.__call__):  Likewise.

2005-04-22  Paul Nasrat <pnasrat@redhat.com>

	* bootloader.py: Upgrade PReP on iSeries as no real bootloader

2005-04-21  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* autopart.py (doAutoPartition):  Copy filesystem options over for
	preexisting partitions so they show up in /etc/fstab (#97560).
	* fsset.py (FileSystemSetEntry.__str__):  Better output.
	* hdrlist.py (Package.select):  Turn off debugging output (#155611).

2005-04-21  Jeremy Katz  <katzj@redhat.com>

	* partRequests.py (RaidRequestSpec.sanityCheckRaid): Ensure there
	are <= 27 members of the RAID device (#155509)

2005-04-21  Paul Nasrat <pnasrat@redhat.com>

	* instdata.py: Make anaconda-ks.cfg ro

2005-04-20  Chris Lumens  <clumens@redhat.com>

	* isomd5sum/libcheckisomd5.c:  Applied Dustin Kirkland's checkpoint
	fragment sum patch.

2005-04-18  Jeremy Katz  <katzj@redhat.com>

	* iw/progress_gui.py (InstallProgressWindow_NEW.setPackageStatus):
	Mark Downloading for translation properly (#155214)

2005-04-18  Chris Lumens  <clumens@redhat.com>

	* iw/language_gui.py:  Fix traceback (#155103).
	* kickstart.py (KickstartBase.definePartition):  Write out filesystem
	options for regular partitions instead of "--fsoptions".

2005-04-16  Jeremy Katz  <katzj@redhat.com>

	* textw/partition_text.py (AutoPartitionWindow.__call__): Check
	for a drive being selected (#124296)
	* partIntfHelpers.py (mustHaveSelectedDrive): Add UI helper for
	selected drives error.
	* iw/partition_gui.py (AutoPartitionWindow.getNext): Use helper.

	* loader2/kickstart.c: Allow specifying 'mediacheck' in ks.cfg to
	specify mediacheck.
	* loader2/kickstart.h: Define constant.
	* kickstart.py (KickstartBase.readKickstart): Define no-op for
	'mediacheck' keyword for stage2

	* loader2/method.c (queryIsoMediaCheck): Allow mediacheck for 
	kickstart if 'mediacheck' passed on the command line. (#116429)
	* loader2/cdinstall.c (queryCDMediaCheck): Likewise.

2005-04-15  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* packages.py (selectLanguageSupportGroups):  Select language support
	packages for all requested languages (#153746, #154181).

2005-04-14  Chris Lumens  <clumens@redhat.com>

	* gui.py (growToParent):  Make WrappingLabel wrap (#153071, #154786).
	* iw/examine_gui.py (UpgradeExamineWindow.getScreen):  Don't indent
	the upgrade selection box so much.
	* iw/blpasswidget.py (BootloaderPasswordWidget.__init__):  Don't set
	alignment internally in case this gets wrapped in another alignment.
	* iw/bootloader_main_gui.py (MainBootloaderWindow.getScreen):  Fix
	left alignment on all widgets.
	* iw/network_window.py (NetworkWindow.getScreen):  Fix spacing so UI
	elements don't run off the screen in French translation.
	* iw/osbootwidget.py (OSBootWidget.__init__):  Don't set alignment
	internally in case this gets wrapped in another alignment.
	* ui/anaconda.glade:  Use the correct forward button image.

2005-04-14  Jeremy Katz  <katzj@redhat.com>

	* hdrlist.py (EverythingExclude): Add kernel-xen?-devel too (#154819)

2005-04-13  Chris Lumens  <clumens@redhat.com>

	* instdata.py (InstallData.writeKS):  Decode source URL (#154149).

2005-04-13  Peter Jones  <pjones@redhat.com>

	* scripts/upd-instroot: revert last week's nptl hack

2005-04-13  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Always set a default language.
	* gui.py  (InstallInterface.run):  Set supported languages.  Use
	Language's search path instead of making our own.
	* installclass.py  (BaseInstallClass.setLanguageSupport):  Use
	language nicknames instead of regular names.
	* language.py:  Use language nicknames throughout.  Have canonLangNick
	return en_US.UTF-8 if the nickname isn't found.  Set up the runtime
	language properly even if the installtime langauge is not supported by
	anaconda  (#152404).
	* loader2/loader.c (main):  Set LC_COLLATE=C.
	* text.py:  Use Language's search patch instead of making our own.
	Use language nicknames throughout.  Set supported languages.

2005-04-13  Peter Jones  <pjones@redhat.com>

	* scripts/upd-instroot: add libaudit to the graphical environment,
	because the new Xorg needs it.

2005-04-12  Jeremy Katz  <katzj@redhat.com>

	* isys/wireless.c: Free'ing mem from alloca() can be bad (#129058)

	* scripts/upd-initrd: Add simple stupid script to update the
	loader in an initrd to make my life easier.

	* upgrade.py (upgradeFindPackages): Fix message (#154552)

	* rescue.py (runRescue): Fix rescue mode network enabling (#153961)

2005-04-11  Jeremy Katz  <katzj@redhat.com>

	* iw/progress_gui.py (InstallProgressWindow_NEW.setPackage): Cut
	summary off at a reasonable length to avoid changing the screen
	layout (#154459)

2005-04-11  Peter Jones  <pjones@redhat.com>

	* anaconda.spec: Bump version.
	* language.py (Language.CanonLangNick): Always return some value;
	if the input language isn't in the list, use en_US.UTF-8
	* upgrade.py (bindMountDevDirectory): function that does bind mounting
	of /dev to /mnt/sysimage/dev, so there are devices there.
	* upgrade.py (upgradeMountFileSystems): mount dev once we've found
	the new root directory.

2005-04-11  Jeremy Katz  <katzj@redhat.com>

	* partitioning.py (partitioningComplete): Don't try to do
	early swap in test mode and use yesno instead of okcancel (msw)

2005-04-10  Jeremy Katz  <katzj@redhat.com>

	* gui.py (ExceptionWindow.__init__): Fix typo (menthos, #154324)

2005-04-08  Bill Nottingham  <notting@redhat.com>

	* bootdisk/i386/param.msg: Choose something more reasonable memory-wise
	* bootdisk/x86_64/param.msg: Likewise

2005-04-08  Chris Lumens  <clumens@redhat.com>

	* loader2/init.c (createDevices):  Use the right flag for creating
	block devices (#152381, #154132).
	* loader2/net.c (setupNetworkDeviceConfig):  Don't free a string we
	need later. (#149871, #150844, #153072)

2005-04-07  Bill Nottingham  <notting@redhat.com>

	* scripts/upd-instroot: fix default theme, take 2 (#154153)

2005-04-07  Peter Jones  <pjones@redhat.com>

	* scripts/upd-instroot: put ncurses into the text images.

2005-04-07  Bill Nottingham <notting@redhat.com>

	* scripts/upd-instroot: Need redhat-artwork for the default gtkrc.
	I suppose we could write one inline as well.

2005-04-07  Peter Jones  <pjones@redhat.com>

	* scripts/upd-instroot: - Move the linuxthreads stuff around some,
	to stop bogus error messages.  
	- move readline to KEEPFILES/PACKAGES, not GR
	- bump version

2005-04-07  Chris Lumens  <clumens@redhat.com>

	* scripts/upd-instroot:  Move /usr/lib/locale/* into KEEPFILE so we
	have it around for running build-locale-archive.  Also add
	/usr/share/locale/locale.alias.

2005-04-06  Elliot Lee  <sopwith@redhat.com>

	* textw/language_text.py: The language display is now in English
	names instead of nicknames - make this a reality in more of the code.
	* iw/language_gui.py: Ditto

2005-04-06  Chris Lumens  <clumens@redhat.com>

	* language.py (Language.setDefault):  Don't set SYSFONTACM.

2005-04-06  Peter Jones  <pjones@redhat.com>

	* anaconda.spec: bump version

	* scripts-upd-instroot: avoid removing libraries that aren't the ones
	in obsolete/linuxthreads/

2005-04-05  Peter Jones  <pjones@redhat.com>

	* anaconda.spec:  Bump version.

	* scripts/upd-instroot: pull libc, libm, libpthreads, and librt from
	/lib/obsolete/linuxthreads/ if it's there, unless called with --nptl .
	This flag may not come before --debug, and must come before --comps .
	Hopefully we can revert this soon :/

2005-04-05  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* language.py (Language.setDefault):  Use canonicalized nick
	(#153656).
	* scripts/mk-images:  Don't delete anaconda-runtime before it's
	needed.
	* scripts/upd-instroot:  Fix path to chroot.

2005-04-05  Elliot Lee  <sopwith@redhat.com>

	* anaconda: import encodings.idna to fix #153754

2005-04-04  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (KickstartBase.doLangSupport):  Don't skip a step that
	doesn't exist.
	* loader2/lang.c (setLangEnv):  Change font case to match lang-table.

2005-04-04  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* language.py (Language.__init__):  Add settings for the 'C' locale to
	prevent a traceback when building an RPM.

2005-04-02  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* Makefile: Fix makefile deps and clean target.

2005-04-01  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* iw/language_support_gui.py:  Removed.
	* dispatch.py:  Removed reference to LanguageSupportWindow.
	* gui.py:  Likewise.
	* textw/language_text.py:  Likewise.

	* installclass.py (BaseInstallClass.setLanguageSupport):  Don't add
	duplicate entries to supported list.
	* language.py:  Fix traceback on kickstart language support.
	* language.py (Language.setDefault):  Remove dependance on
	langInfoByName.
	* text.py (InstallInterface.run):  Use language nick instead of name.

2005-04-01  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot: Lots of cleanup to try to get things
	smaller, including:
	 Creating a locale-archive and using that instead of /usr/lib/locale.
	 Removal of old unneeded packages.
	 Removal of bits of the standard python library that aren't needed.
	 Removal of pyc files from stage2.img as well.

	* scripts/mk-images: Do some cleanup of images before we create them.

	* scripts/upd-instroot (PACKAGESGR): Add missing indic font packages
	(LC_ALL): Use build-locale-archive to try to reduce the amount of
	space needed for stage2

2005-03-31  Elliot Lee  <sopwith@redhat.com>

	* scripts/splittree.py: s/srcdiscs/src_discs/

2005-03-31  Chris Lumens  <clumens@redhat.com>

	* language.py (InstallTimeLanguage.__init__):  Set default language
	settings so we get a useful /etc/sysconfig/i18n on manual installs
	(#149688).
	* language.py (InstallTimeLanguage.__init__):  Fix time zones.

	* language.py:  Renamed class to Language.
	* instdata.py:  Likewise.
	* scripts/getlangnames.py:  Likewise.

	* iw/network_gui.py  (NetworkWindow.setHostOptionsSensitivity): Make
	sure automatic hostname option isn't greyed out when using a static IP
	for installation (#149116).

2005-03-30  Jeremy Katz  <katzj@redhat.com>
	
	* anaconda.spec: Bump version.

	* bootdisk/ppc/yaboot.conf.mac: Nuke maxcpus=1
	* bootdisk/ppc/yaboot.conf.pseries: Likewise.
	* scripts/mk-images.ia64 (image): Likewise.

2005-03-30  Elliot Lee  <sopwith@redhat.com>

	* language.py (expandLangs): s/str/astring/ - as the name of 
	the string type, 'str' is a pseudo-reserved word in python.

2005-03-30  Chris Lumens  <clumens@redhat,com>

	* language.py (InstallTimeLanguage.setSupported):  supported is a list
	of language names, not nicknames.
	* language.py (InstallTimeLanguage.setDefault):  Fix check for if we
	got a match or not.

	* loader2/lang.c (loadLanguageList):  Language names may now contain
	spaces, which sscanf splits on.  Change what it's looking for.
	* loader2/lang.c (setLangEnv):  Don't set $LANG to the language's name.

2005-03-29  Chris Lumens  <clumens@redhat.com>

	* language.py (InstallTimeLanguage.__init__):  Fix string split.

2005-03-29  Jeremy Katz  <katzj@redhat.com>

	* loader2/lang.c: Oops, remove debug printf

	* anaconda.spec: Bump version.

	* scripts/buildinstall (PRODUCTPATH): Fix silly tree build problem

	* anaconda.spec: Bump version.

	* scripts/Makefile: Old file go away.

2005-03-29  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

	* language.py (InstallTimeLanguage.__init__):  Split on tabs.
	* scripts/genlocalelist.py, scripts/getlangnames.py: Updated for
	lang-table format change.  Also, delimit fields with tabs to make
	splitting easier.

2005-03-29  Jeremy Katz  <katzj@redhat.com>

	* product.py (bugUrl): Clean up .buildstamp reading, read in bug url

	* constants.py (bugzillaUrl): Make bug url a per-product characteristic.

	* scripts/buildinstall: Allow passing in bug url on the command
	line.
	* scripts/mk-images: Likewise, and use it to populate .buildstamp.

	* text.py: Make topline match the loader.

	* anaconda: Remove essentially unused config file data code,
	product.img basically supplanted this.
	* Makefile: Likewise.
	* cmdline.py: Likewise.
	* gui.py: Likewise.
	* text.py: Likewise.

	* dispatch.py: Likewise.
	* instdata.py: Likewise.
	* splashscreen.py: Likewise.
	* iw/welcome_gui.py: Likewise.
	* textw/welcome_text.py: Likewise.
	
	* anaconda.conf: Remove file.
	* configFileData.py: Likewise.
	* readConfigFile.py: Likewise.

	* constants.py: Fix traceback

	* bootdisk/sparc/*: Remove out of date sparc files.

	* anaconda: Product name fixup
	* bootdisk/ppc/bootinfo.txt: Likewise.
	* loader2/linuxrc.s390: Likewise.

	* scripts/buildinstall (PRODUCTPATH): Product path simplification.
	* scripts/pkgorder: Likewise.
	* scripts/mk-rescueimage.x86_64 (productname): Likewise.
	* scripts/mk-rescueimage.i386 (productname): Likewise.
	* scripts/mk-images (PRODUCTPATH): Likewise.

	* text.py (stepToClasses): Remove silo stuff.
	* gui.py (stepToClasses): Likewise.
	* iw/silo_gui.py: Remove.
	* textw/silo_text.py: Remove.

	* utils/genhdlist.c: Genericize product dir
	* loader2/loader.c (initProductInfo): Likewise.
	* scripts/splittree.py: Likewise.

	* scripts/check-repository.py: Remove dead code.
	* iw/congrats_gui.py (CongratulationWindow.getScreen): Likewise.

	* partedUtils.py (getRedHatReleaseString): Change to getReleaseString.
	* upgrade.py (findExistingRoots): Method name change.

	* constants.py: Make bugzilla URL more changeable.
	* iw/xconfig_gui.py (XConfigWindow.getNext): Likewise.
	* packages.py (betaNagScreen): Likewise.

	* hdrlist.py (GroupSet.__main__): Nuke some dead code.
	* Makefile (DESTDIR): Likewise.

	* image.py (findIsoImages): Genericize comment.
	* loader2/urlinstall.c: Likewise.
	* urlinstall.py (UrlInstallMethod.__init__): Likewise.

	* loader2/cdinstall.c (findRedHatCD): Change function to
	findAnacondaCD to be more general.
	* loader2/cdinstall.h: Likewise.
	* loader2/urlinstall.c: Likewise.
	* loader2/loader.c: Likewise.

	* loader2/lang.c: Fix for removed instlang line.  Require tabs for
	spacing language information.
	* loader2/lang.h: Remove instlang.

2005-03-28  Peter Jones  <pjones@redhat.com>
	* partitions.py, partRequests.py: don't put snapshot LVs into
	RequestSpecs after all.  Instead, look for children when we
	actually do the lvremove()
	
2005-03-28  Jeremy Katz  <katzj@redhat.com>

	* loader2/loader.c (parseCmdLineFlags): Allow setting mtu on the
	command line (#151789)

2005-03-28  Chris Lumens  <clumens@redhat.com>

	* language.py (setDefault):  Check all forms of the language nick in
	case someone's specified a shorter one.

	* instdata.py:  Remove the Boolean class.  We have a type for that.
	* kickstart.py, packages.py, upgradeclass.py:  Don't use the old
	accessors made obsolete by the boolean type.

2005-03-28  Peter Jones  <pjones@redhat.com>

	* lvm.py (lvlist,vglist,pvlist): make lvm list functions use
	a specified separator, explicitly ask for the fields we need,
	and get sizes without format specifiers
	
	* lvm.py (lvlist): list the "origin" of snapshot LVs
	
	* partRequests.py (LogicalVolumeRequestSpec.__init__): add 
	"snapshots" and "lvorigin" attributes, so we can track lv
	snapshots we need to delete

	* partedUtils.py (DiskSet.findExistingRootPartitions): explictly
	ignore snapshot LVs

	* partitions.py (Partitions.setFromDisk): mark snapshot LV requests
	with lvorigin, and link snapshots to parents.

	* partitions.py (Partitions.deleteDependentRequests): add snapshot
	requests to the delete list when deleting snapshots.

2005-03-28  Peter Jones  <pjones@redhat.com>

	* scripts/mk-rescueimage.i386 scripts/mk-rescueimage.x86_64:
	Make the rescue images identify which arch they're for (#151501)

2005-03-28  Peter Jones  <pjones@redhat.com>

	* loader2/pcmcia.c: don't load "ds" any more, but do load "pcmcia"
	(#151235)

	* loader2/pcmciatest.c: same as above, plus some gcc4 fixes

	* scripts/mk-images.i386: don't load "ds", do load "pcmcia"

2005-03-25  Bill Nottingham  <notting@redhat.com>
	
	* anaconda.spec: Bump version.

	* partedUtils.py (allPartitionTypesDict): add comma

2005-03-24  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: Switch theme to Clearlooks

	* partedUtils.py (allPartitionTypesDict): Add new Solaris
	partition label

2005-03-23  Jeremy Katz  <katzj@redhat.com>

	* textw/timezone_text.py (TimezoneWindow.__call__): Mark strings
	for translation.
	* gui.py (ExceptionWindow.__init__): Likewise.
	* iw/network_gui.py (NetworkWindow.handleIPError): Likewise.
	* textw/mouse_text.py (MouseWindow.__call__): Likewise.

2005-03-23  Peter Jones  <pjones@redhat.com>

	* fsset.py (xfsFileSystem.formatDevice): Fix mkfs on xfs,
	from Lars Hamann (#151378)

2005-03-23  Chris Lumens  <clumens@redhat.com>

	* Bump version.

2005-03-23  Jeremy Katz  <katzj@redhat.com>

	* gui.py (readImageFromFile): Fix gtk Deprecation warning.

	* hdrlist.py: Make sure we don't hide groups which just have
	metapkgs (#149182)

	* loader2/selinux.c: Load SELinux booleans (#151896)

2005-03-23  Chris Lumens  <clumens@redhat.com>

	* dispatch.py, exception.py, installclass.py, instdata.py,
	packages.py, iw/package_gui.py, textw/packages_text.py:  Renamed
	langSupport to instLanguage to comply with the class merging in
	language.py.
	* gui.py:  Updated for new language classes.
	* lang-table:  Remove last column, which duplicates information.
	* language.py:  Rewrote to combine Language and InstallTimeLanguage
	into a single class, hopefully simplifying language support.
	* packages.py, iw/language_gui.py:  Use getNickByName as it's more
	descriptive of what's actually going on.
	
	* scripts/upd-instroot  (KEEPFILE, PACKAGES):  Once more, with
	feeling - this time for libgcc.

2005-03-22  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec: Bump version.

	* dispatch.py (installSteps):  Pass id down to network.
	* iw/network_gui.py (getNext, getScreen):  If we're using an
	interactive kickstart install and using DHCP for networking, don't
	obliterate the nameserver settings so we write out a good
	/etc/resolv.conf (#151472).
	* textw/network_text.py:  Accept id parameter.
	* scripts/upd-instroot (PACKAGES):  List libstdc++ in PACKAGES to
	hopefully really fix the tree scrubbing problem.

2005-03-21  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/Makefile (LANGS): Fix translation getting (Northern
	Sotho broke it)

	* lang-table: Add locale support for Afrikaans, Amharic,
	Indonesian, Northern Sotho and Thai.

	* scripts/splittree.py (Timber.__init__): Add reserve_size for use
	on ppc (#151234)

	* hdrlist.py (EverythingExclude): Exclude Xen kernels from an
	everything install for now (related to #151490)

2005-03-21  Paul Nasrat <pnasrat@redhat.com>

	* loader2/cdinstall.c: Don't unlink device (#151232)

2005-03-16  Chris Lumens  <clumens@redhat.com>

	* iw/congrats_gui.py:  Kill the big empty box on the congrats screen
	to fix word wrap (#149526).
	* scripts/upd-instroot:  rpm needs libstdc++.so.6 in the network
	install images.
	* ui/anaconda.glade:  Don't constrain the button bar so much so the
	buttons can grow a bit for wordy translations (#151208).

2005-03-16  Jeremy Katz  <katzj@redhat.com>

	* packages.py (betaNagScreen): Fix beta nag translation.

2005-03-14  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: More finagling for bogl fonts (#149039)

	* scripts/upd-instroot (KEEPFILEGR): Fix for font location 
	changes (#150889)

	* scripts/mk-images (DEBUG): Fix handling of --debug (Ingo
	Pakleppa, #150925)

	* scripts/buildinstall (BUILDINSTALL): Fix passing --debug to
	second buildinstall invocation (Ingo Pakleppa, #150920)

2005-03-14  Paul Nasrat <pnasrat@redhat.com>

	* utils/genhdlist.c: support longer package names - #146820
	* scripts/upd-instroot: sqlite3->sqlite

2005-03-11  Peter Jones  <pjones@redhat.com>

	* gui.py htmlbuffer.py splashscreen.py iw/account_gui.py
	iw/auth_gui.py iw/blpasswidget.py iw/bootdisk_gui.py
	iw/bootloader_advanced_gui.py iw/bootloader_main_gui.py
	iw/bootlocwidget.py iw/checklist.py iw/confirm_gui.py
	iw/congrats_gui.py iw/dependencies_gui.py iw/zfcp_gui.py
	iw/driveorderwidget.py iw/examine_gui.py iw/fdisk_gui.py
	iw/firewall_gui.py iw/installpath_gui.py iw/ipwidget.py
	iw/language_gui.py iw/language_support_gui.py iw/lvm_dialog_gui.py
	iw/mouse_gui.py iw/network_gui.py iw/osbootwidget.py
	iw/package_gui.py iw/partition_dialog_gui.py iw/partition_gui.py
	iw/partition_ui_helpers_gui.py iw/partmethod_gui.py
	iw/pixmapRadioButtonGroup_gui.py iw/progress_gui.py
	iw/raid_dialog_gui.py iw/release_notes_viewer_gui.py
	iw/timezone_gui.py iw/timezone_map_gui.py iw/zipl_gui.py
	iw/upgrade_bootloader_gui.py iw/upgrade_migratefs_gui.py
	iw/upgrade_swap_gui.py iw/xconfig_gui.py
	iw/desktop_choice_gui.py: fix warnings about gtk.TRUE and gtk.FALSE,
	partly based on a patch from Colin Charles.

2005-03-11  Chris Lumens  <clumens@redhat.com>

	* loader/method.c (validIsoImages):  Unmount the loopback mounted ISO
	image to free up the loopback device for later use (#150887).

2005-03-09  Chris Lumens  <clumens@redhat.com>

	* anaconda:  Put a comma between "once" and "DisconnectClients"
	(#150498).

2005-03-09  Peter Jones  <pjones@redhat.com>

	* iutil.py (swapAmount): fix this to actually use the SwapTotal line
	from /proc/meminfo, not just whichever line is at offset 2.  Offset
	2 is now "Buffers:", so this is hopelessly broken.
	* isys.py (ddfile): use '\x00' * num instead of os.read to make a
	string of '\x00' characters.
	* fsset.py: make availRaidLevels be in raid.py instead of here
	* partitions.py: get availRaidLevels from raid.py not fsset.py
	* raid.py: move availRaidLevels here, and put it and getRaidLevels()
	before the module imports, so it doesn't go boom importing sometimes
	when it can't find getRaidLevels()
	* iw/raid_dialog_gui.py: get availRaidLevels from raid.py
	* textw/partition_text.py: get availRaidLevels from raid.py

2005-03-07  Peter Jones  <pjones@redhat.com>

	* anaconda.spec: Bump version.
	* anaconda: add LVM_SUPPRESS_FD_WARNINGS to the environment,
	which should make the lvm tools not complain about open FDs on exec.
	* partRequests.py: comment out not-so-useful log events.
	* autopart.py: still clamp each LV to the pesize.

2005-03-07  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* anaconda.spec (Requires): Require python-urlgrabber

	* scripts/upd-instroot (PACKAGES): urlgrabber stuff is in its own
	package now

2005-03-06  Peter Jones  <pjones@redhat.com>

	* autopart.py: fix growable size log to show IDs instead of
	python's <instance> info.
	log how much free space we're starting with
	don't clamp an lv's total size, instead clamp pv's sizes appropriately
	* lvm.py: remove and recreate all PVs when we do a vgremove, so they
	don't lose 1 PE each time due to an lvm2 bug.
	log what lvm commands are being run, since that doesn't go into lvmout.
	log total vs actual in getVGFreeSpace
	* partRequests.py: get rid of getPVSize, that way can't work (oopsie).
	remove bogus check in getActualSize.
	clamp totalspace for preexisting PVs.
	clamp each PV's size and trim 1 PE off when computing total space.
	don't clamp the LV's overall size.
	* iw/lvm_dialog_gui.py: clamp each PV and trim 1 PE when computing
	availSpaceMB.
	
2005-03-03  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (PACKAGESGR): Add new font package names

2005-03-02  Bill Nottingham <notting@redhat.com>

	* upgrade.py: Empty blacklist (#142893)

2005-03-01  Peter Jones  <pjones@redhat.com>
	* anaconda/isys/gzlib/binding.c anaconda/isys/devnodes.c
	  anaconda/isys/lang.c anaconda/isys/isys.c anaconda/isys/pdc.c
	  anaconda/isys/smp.c anaconda/isys/wireless.c
	  anaconda/isys/eddsupport.c anaconda/loader2/loader.c
	  anaconda/loader2/loadermisc.c anaconda/loader2/modules.c
	  anaconda/loader2/moduledeps.c anaconda/loader2/lang.c
	  anaconda/loader2/driverdisk.c anaconda/loader2/mediacheck.c
	  anaconda/loader2/method.c anaconda/loader2/cdinstall.c
	  anaconda/loader2/telnet.c anaconda/loader2/telnetd.c
	  anaconda/loader2/undomounts.c anaconda/loader2/shutdown.c
	  anaconda/loader2/init.c anaconda/utils/snarffont.c
	  anaconda/isomd5sum/libimplantisomd5.c
	  anaconda/isomd5sum/libcheckisomd5.c anaconda/xutils.c:
	silence some gcc4 warnings that stop the build
	* anaconda/isys/Makefile anaconda/isys/Makefile anaconda/Makefile
	  anaconda/utils/Makefile anaconda/loader2/Makefile
	  anaconda/stubs/Makefile anaconda/isomd5sum/Makefile:
	use -D_FORTIFY_SOURCE=2, build genhdlist.o with -Wno-return-type
	as a temporary fix for a gcc4 warning
	* anaconda.spec: Bump version
	
2005-03-01  Chris Lumens  <clumens@redhat.com>

	* loader2/driverdisk.c:  Fix nested case statements in a switch to
	silence a gcc4 warning.

2005-02-28  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec:  Bump version.

2005-02-28  Jeremy Katz  <katzj@redhat.com>

	* anaconda (startVNCServer): Add -once to help ensure Xvnc exits
	when last client of the server exits (#137337)

	* scripts/upd-instroot: More attempts at the bogl stuff.

2005-02-28  Chris Lumens  <clumens@redhat.com>

	* scripts/upd-instroot, scripts/mk-images:  Import new
	libkrb5support.so library.  (#149856)

2005-02-25  Peter Jones <pjones@redhat.com>

	* partRequests.py: All RequestSpec's must be able to guess how much
	space a nested PV can provide.

2005-02-24  Peter Jones <pjones@redhat.com>

	* gui.py: fix "debug" cmdline arg to not traceback.

2005-02-24  Paul Nasrat <pnasrat@redhat.com>

	* loader2/net.c: Do ethtool setup everywhere (#145422)

2005-02-23  Peter Jones  <pjones@redhat.com>

	* iw/lvm_dialog_gui.py iw/raid_dialog_gui.py textw/partition_text.py:
	Add Apple Bootstrap partitions to the lvm/raid ignore lists
	* kickstart.py/partitions.py: kickstart support for the Apple
	Bootstrap part
	
2005-02-23  Chris Lumens  <clumens@redhat.com>

	* iw/account_gui.py, iw/bootdisk_gui.py, iw/confirm_gui.py,
	iw/congrats_gui.py, iw/examine_gui.py, iw/mouse_gui.py,
	iw/silo_gui.py, iw/timezone_gui.py, iw/xconfig_gui.py:  Use
	gui.readImageFromFile instead of deprecated ics methods.
	* partitions.py:  Fix clampPVSize call.  Fix typo in
	getBootableRequest.

2005-02-23  Paul Nasrat  <pnasrat@redhat.com>

	* loader2/cdinstall.c: Eject CD when failing (#147272)

2005-02-21  Chris Lumens  <clumens@redhat.com>

	* iw/network_gui.py  (NetworkWindow.setHostOptionsSensitivity):
	Properly set hostname option sensitivity to follow which option is
	selected (#149116).

2005-02-21  Paul Nasrat  <pnasrat@redhat.com>

	* partitions.py: Deal with multiple Apple Bootstrap 
	partitions (dwmw2)

2005-02-21  Jeremy Katz  <katzj@redhat.com>

	* fsset.py (FileSystemSet.mtab): Don't write out filesystems we
	haven't mounted like /dev/shm (#149091)

	* scripts/upd-instroot: More bogl fixing

2005-02-20  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot: Attempt to fixup bogl changes (#149039)
	(KEEPFILE): Include all urlgrabber files (#149040)

2005-02-20  Peter Jones <pjones@redhat.com>

	* bootloader.py: remove code to show lilo as a bootloader choice
	* gui-tags.txt: remove reference to lilo_gui.py and LiloWindow
	* installclass.py: remove lilo specific code
	* kickstart.py: remove lilo specific code
	* packages.py: don't choose lilo if "useGrubVal" is 0.
	  - remove lilo.conf from list of anaconda generated files
	* tui-tags.txt: remove references to lilo_text.py and LiloAppendWindow
	* upgrade.py: remove code to add lilo package to install set.
	* kickstart-docs.txt: remove docs about lilo options
	* iw/bootloader_main_gui.py: remove lilo radio button entries
	* iw/bootlocwidget.py: remove lilo drive ordering code
	* textw/bootloader_text.py: remove lilo bootloader choice

2005-02-19  Paul Nasrat <pnasrat@redhat.com>

	* autopart.py, bootdisk/ppc/ofboot.b, fsset.py, installclass.py,
	partedUtils.py, partitions.py, scripts/mk-images.ppc:
	Fedora PPC - autopartitioning (#121266) and G5 (#149081)
	* anaconda.spec: Bump version

2005-02-16  Karsten Hopp  <karsten@redhat.com>

	* scripts/mk-images: the s390 linuxrc creates some devices 
	during boot, shut up warnings about nonexistant groups

2005-02-12  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2005-02-10  Chris Lumens  <clumens@redhat.com>

	* iw/network_gui.py (NetworkWindow.getScreen):  Always put the
	hostname we got from DHCP (or localhost.localdomain) in the hostname
	entry box (#132826).

2005-02-09  Chris Lumens  <clumens@redhat.com>

	* installclass.py (BaseInstallClass.postAction):  Handle the default
	case where there is no %post script.

	* docs/kickstart-docs.txt:  Synchronize options with kickstart.py.

2005-02-09  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot (KEEPFILE): urlgrabber is in a noarch
	python package ==> usr/lib/python?.? instead of usr/$LIBDIR

2005-02-08  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version
	
2005-02-08  Chris Lumens  <clumens@redhat.com>

	* dispatch.py:  Pass a handle to the interface into doPostAction.
	* kickstart.py:  Support --erroronfail as an option for %pre and
	%post.  This option will display an error dialog to the screen and
	terminate installation (#124386).
	* packages.py (doPostAction):  Accept a handle to the interface so we
	can pass it into the %post kickstart handler.

	* docs/kickstart-docs.html:  Removed.
	* docs/kickstart-docs.txt:  Cleaned up in preparation for additions.

2005-02-08  Jeremy Katz  <katzj@redhat.com>

	* packages.py: Fix segfault if we have to order packages.

	* scripts/upd-instroot: Add new deps of rpm 4.4 (sqlite3 and neon)
	as well as relevant libs needed for rpm-python 4.4

	* iw/timezone_map_gui.py: Fix-up for new gnome-python2-canvas
	module naming.  Handle fallback for older gnome-python2.
	* iw/partition_gui.py: Likewise.

	* comps.py: Remove old code.

2005-02-08  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2005-02-08  Paul Nasrat  <pnasrat@redhat.com>

	* findpackageset.py:
	Don't use rpm.archscore as iseries upgrades don't work (#146915)

	* installclass.py, network.py:
	Only configure ksdevice if no --device (#138852)

2005-02-07  Chris Lumens  <clumens@redhat.com>

	* gui.py (helpClicked, refreshHelp):  If help is disabled, don't
	redraw the help pane when the next button is clicked (#145691).

2005-02-07  Matt Wilson  <msw@specifixinc.com>

	* exception.py: Import log handler

2005-02-04  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2004-02-03  Chris Lumens  <clumens@redhat.com>

	* kickstart.py:  Support setting filesystem options via kickstart
	through a --fsoptions flag (#97560).
	* partRequests.py:  Likewise.
	* isys/isys.py (mount):  Don't try to make a device node for virtual
	filesystems like proc or shm.

2005-02-02  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* installclass.py (BaseInstallClass.setSteps): Nuke languagesupport.

	* packages.py (selectLanguageSupportGroups): Switch to selecting
	metapkgs of a "language-support" group so that language selection
	is just like other package selection

	* product.py: Default product path to Fedora for HEAD

	* urlinstall.py: Fix urlgrabber import up
	* kickstart.py: Likewise.
	* hdrlist.py (groupSetFromCompsFile): Likewise.

	* scripts/upd-instroot: Fix up little bugs in the font reduce stuff

2005-02-02  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* iw/congrats_gui.py (CongratulationWindow.getScreen): Fix up
	reference to media to not get stale (#138688)
	* textw/complete_text.py (FinishedWindow.__call__): Likewise.

	* fsset.py (FileSystemSet.reset): Mount pseudo-filesystems with a
	device name other than "none" for clarity (#136820)
	(Device.__init__): Allow specification of device for generic devices.
	(readFstab): Handle the above changes when reading in fstabs

	* scripts/splittree.py: Allow not creating SRPM CDs by passing
	--src-discs=0.  Based on a patch from Armijn Hemel (#119070)

	* scripts/upd-instroot: Create reduced font for bogl at
	upd-instroot time (#92146, #140208)

	* loader2/Makefile (install): Install the unicode linedraw chars file

2005-02-02  Chris Lumens  <clumens@redhat.com>

	* comps.py (ComponentSet.readCompsFile):  Use urlgrabber instead of
	urllib2 directly.
	* gui.py (InstallControlWindow.loadReleaseNotes):  Likewise.
	* hdrlist.py (groupSetFromCompsFile):  Likewise.
	* kickstart.py (pullRemainingKickstartConfig):  Likewise.
	* urlinstall.py (urlretrieve, UrlInstallMethod.readHeaders):  Likewise.
	* scripts/upd-instroot:  Pull in urlgrabber from yum until it's broken
	out into its own package.

2005-02-02  Jeremy Katz  <katzj@redhat.com>

	* partRequests.py: import math, fix a traceback

2005-01-31  Chris Lumens  <clumens@redhat.com>

	* kickstart.py (KickstartBase.doBootloader):  Don't install a
	bootloader if --location=none is provided in the kickstart config
	file (#146448).

2005-01-26  Chris Lumens  <clumens@redhat.com>

	* gui.py:  Fixed deprecation warnings for gtk.idle_add,
	gtk.idle_remove, gtk.timeout_add, gtk.timeout_remove.
	* iw/installpath_gui.py:  Fixed deprecation warning for
	ics.readPixmap.
	* iw/language_gui.py:  Likewise.
	* iw/welcome_gui.py:  Likewise.
	* iw/package_gui.py:  Fixed deprecation warnings for gtk.idle_add,
	gtk.idle_remove.
	* iw/progress_gui.py:  Fixed deprecation warnings for
	ics.readPixmapDithered.

2005-01-25  Peter Jones  <pjones@redhat.com>

	* loader2/method.c: make validIsoImages check the buildstamp and report
	back if it found invalid entries.
	* loader2/method.h: update prototype for validIsoImages
	* loader2/hdinstall.c: call validIsoImages() with foundinvalid = 0
	* loader2/nfsinstall.c: pass the address of foundinvalid to
	validIsoImages

2005-01-21  Peter Jones  <pjones@redhat.com>

	* lvm.py (lvlist): return size in MB.
	* lvm.py (pvlist): return size in MB.
	* lvm.py (vglist): return size in MB, and pesize in KB.
	* lvm.py (clampLVSizeRequest): use math.ceil and math.floor for
	"roundup", so we don't need to special case "size % pe == 0"
	* lvm.py (clampPVSize): replace the completely broken code that
	fails to implement a size heuristic for lvm1.  We still need to guess
	at the available size, but not here.
	* partRequest.py: add PartitionSpec.getPVSize, which returns a size
	for a Physical Volume given a partition.  If there's no PV in the
	real partition, it guesses the size based on the free space.
	Make VolumeGroupRequestSpec.getActualSize use PartitonSpec.getPVSize
	instead of PartitionSpec.getActualSize
	* partitions.py: make Partitions.setFromDisk use the PE size from
	the volume group, so we don't give the wrong pesize to clamp later
	and create an LV with an invalid size.  Also make it handle lv size
	in MB.
	make Partitions.getAvailLVMPartitions use the PV's size, not the
	partition's size.  It'll estimate the size from the partition's size
	if there's no LV created yet.
	* iw/lvm_dialog_gui.py: use getPVSize instead of getActualSize for
	LVM physical volume sizes.
	                  
2005-01-20  Chris Lumens  <clumens@redhat.com>

	* autopart.py (growLogicalVolumes):  Properly grow logical partitions
	in cases where there's more than one volume group defined (Potential
	fix for #144280, #145145).

2005-01-19  Jeremy Katz  <katzj@redhat.com>

	* isys/pdc.c: Fix build if HDIO_GETGEO_BIG_RAW isn't defined.
	* isys/silraid.c: Likewise.

	* isys/hpt.c: Remove unused include.
	* isys/isys.c: Likewise.

2005-01-19  Chris Lumens  <clumens@redhat.com>

	* anaconda.spec: Bump version.

	* autopart.py (fitConstrained):  Allow logical partitions to go all
	the way to the end of the extended partition.  (Potential fix for
	#101432).

2005-01-18  Chris Lumens  <clumens@redhat.com>

	* iw/partition_gui.py (PartitionWindow.refresh):  Only repopulate the
	partition display screen if we were successful in adding the request.
	(corner case - #137119).

2005-01-14  Chris Lumens  <clumens@redhat.com>

	* fsset.py:  Support bytes per inode on a per-partition basis
	(#57550).
	* kickstart.py:  Likewise.  Also, add --bytes-per-inode as an option
	for logical volumes as well.
	* partRequest.py:  Likewise.

2005-01-13  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

2005-01-13  Peter Jones  <pjones@redhat.com>

	* loader2/loader.c: Initialize terminals 0 to 9 before we start
	bterm, so fbcon won't mess our color palette up when we need them.
	Make the shell on tty2 use LANG=C so the error messages work.

2005-01-13  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot: Use busybox for our shell instead of ash

	* gui.py (InstallControlWindow.prevClicked): Allow programatically
	going back even if prev isn't active.
	(InstallControlWindow.nextClicked): Likewise.
	(InstallControlState.setHelpButtonEnabled): Fixup for newer help
	handling.
	(InstallControlWindow.refreshHelp): Don't try to show help for a
	non-existent screen

	* gui.py (InstallControlState.findPixmap): Fix warning syntax.
	(InstallControlState.readPixmap): Likewise.
	(InstallControlState.readPixmapDithered): Likewise.

2005-01-13  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* Makefile (SUBDIRS): Add ui subdir.

	* ui/Makefile: Add the makefile.

	* po/Makefile: Handle extracting strings which need translating
	from the glade files.  Requires fixed intltool-extract (0.31.2-3)

	* scripts/upd-instroot: Add libglade2 and pygtk2-libglade2.

	* iw/package_gui.py (PackageSelectionWindow.getScreen): Use
	gui.readImageFromFile instead of deprecated ics methods.

	* splashscreen.py (splashScreenShow): Use gui.readImageFromFile to
	find the splashscreen.

	* gui.py (readImageFromFile): Pull pixbuf handling out of ICS into
	stand-alone methods.
	(getPixbuf): Likewise.
	(findPixbuf): Likewise.
	(InstallControlWindow.createWidgets): Remove the hack of using ics
	for finding the header image.
	(InstallControlState.findPixmap): Deprecate.
	(InstallControlState.readPixmap): Deprecate.
	(InstallControlState.readPixmapDithered): Deprecate.

	* gui.py (findGladeFile): Look for the glade file in the
	appropriate places

2005-01-12  Jeremy Katz  <katzj@redhat.com>

	* iw/congrats_gui.py (CongratulationWindow.__init__): Change the
	handling of the reboot button for the glade stuff.

	* gui.py: Switch to using glade.  Nuke some dead code.  Note that
	low-res isn't currently 100% functional.

	* ui/anaconda.glade: Add glade file for base anaconda UI.

	* ui/: New directory for glade files.

2005-01-12  Chris Lumens  <clumens@redhat.com>

	* loader2: When unable to connect to an HTTP or FTP server for some
	reason, display an error message instead of flashing back to the input
	screen.  (#144546).

2005-01-12  Jeremy Katz  <katzj@redhat.com>

	* anaconda: If graphics mode fails to start in test mode, print
	the exception and then exit.

2005-01-11  Jeremy Katz  <katzj@redhat.com>

	* packages.py (readPackages): Ensure that the Core group exists in
	the comps file (#143930)
	
	* packages.py (readPackages): Remove hack for ia64 stuff added in
	revision 1.169.6.32 as we don't install i386 packages on ia64
	in anaconda anymore.

2005-01-10  Jeremy Katz  <katzj@redhat.com>

	* installclass.py (BaseInstallClass.setSteps): Allow install
	classes to turn off showing upgrade as an option (only really
	applicable if you only have one install class)

	* scripts/upd-instroot (KEEPFILE): Add /usr/sbin/lvm since
	/sbin/lvm is gone

2005-01-05  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/upd-instroot (KEEPFILEGR): Add libXfixes

2005-01-05  Chris Lumens  <clumens@redhat.com>

	* scripts/mk-images.x86_64:  Write a README like i386 (#143366).

	* scripts/mk-rescueimage.x86_64:  Make a rescue image (#143366).

2005-01-04  Jeremy Katz  <katzj@redhat.com>

	* partedUtils.py (getDefaultDiskType): the default disk type on
	s390 should be dasd, but we can't format those with parted and if
	we get here, we're formatting an fcp disk which should 
	be msdos (#144199)

	* loader2/net.c: Fix multiple dns servers being specified on the
	command line.  Again.  Patch from Matthew Miller (#84409)

	* packages.py (rpmErrorClass.selected): Fix tyop (#143257)

	* loader2/loader.c: Apparently, I can't count (#144006)

2004-12-23  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* isys/isys.py (readSwapLabel_int): Update for newer swap label
	format (#143447)

2004-12-23  Chris Lumens  <clumens@redhat.com>

	* loader2/lang.c  (setupLanguage): Let the user know that they're
	in rescue mode from the very beginning (#136171).

2004-12-23  Jeremy Katz  <katzj@redhat.com>

	* network.py (Network.available): Work around kudzu not being able
	to determine which netdev is which and set hwaddrs anyway (except
	on s390 to avoid setting it on qeth) (#143535)

2004-12-21  Jeremy Katz  <katzj@redhat.com>

	* loader2/init.c (createDevices): Fix silly typo breaking creation
	of devices under /dev

2004-12-21  Chris Lumens  <clumens@redhat.com>

	* fsset.py (turnOnSwap): Print out a more descriptive error
	message if swap partition cannot be mounted (#143000).
	* upgrade.py (createSwapFile,upgradeMountFilesystems): Likewise.

2004-12-21  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images (makeinitrd): Just create /dev

	* partIntfHelpers.py (sanityCheckVolumeGroupName): Blacklist root
	as a VG name (#142785)

	* loader2/init.c: tmpfs, not ramfs for /dev

2004-12-20  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* packages.py (InstallCallback.cb): Let people reboot more easily
	in case of bad packages but warn them that it's going to be bad.

	* partitions.py (Partitions.writeKS): Improve quoting of fstypes.
	Patch from Danen Brcker <dbrucker AT modwest DOT com> on
	anaconda-devel-list

	* iw/progress_gui.py: Remove old InstallProgressWindow class to
	avoid confusion with dead code

	* scripts/mk-images (makeinitrd): Remove /dev creation from here,
	it's handled by init now.

	* loader2/linuxrc.s390: Create /dev and devices in it here too

	* loader2/devices.h: Add static list of basic devices to create in 
	/dev.

	* loader2/init.c: Create /dev as a tmpfs so that we don't try to
	bind-mount to the rootfs (#141570)

	* packages.py (doPreInstall): Some finagling for kernel-*devel 
	handling (#143257)
	
	* command-stubs/mknod-stub (main): Add 
	* partedUtils.py (get_partition_name): 
	* iutil.py (makeDriveDeviceNodes): 
	* fsset.py (prepbootFileSystem.getDiskPart): 
	Promise SX8 devices are of the form /dev/sx8/dpn; support this as 
	needed.	

2004-12-16  Paul Nasrat  <pnasrat@redhat.com>

	* loader2/init.c: Extra checking to distinguish hvsi consoles #134397

2004-12-14  Jeremy Katz  <katzj@redhat.com>

	* loader2/driverdisk.c (useKickstartDD): Add support for 
	biosdev in driverdisk directive.  Patch basically from Rez Kabir
	AT dell (#142738)

2004-12-14  Paul Nasrat  <pnasrat@redhat.com>

	* lvm.py: LVM on RAID1 - (#141781)

2004-12-14  Jeremy Katz  <katzj@redhat.com>

	* dispatch.py (installSteps): Pass new arg to desktopchoice

	* iw/desktop_choice_gui.py (DesktopChoiceWindow.getNext): Reset
	package selection to defaults if selected (#142415)
	* textw/desktop_choice_text.py (DesktopChoiceWindow): Likewise.

2004-12-13  Jeremy Katz  <katzj@redhat.com>

	* loader2/module-info: Add tcmscsim (#142692)

2004-12-09  Jeremy Katz  <katzj@redhat.com>

	* fsset.py (getDevFD): Better error handling if we can't create
	the device (#142273)

2004-12-08  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* partitions.py (Partitions.setFromDisk): Adding as a request
	requires more bits, do as a delete (#142304)
	(Partitions.getPartialLVMRequests): Check deletes now

	* partRequests.py (PartialVolumeGroupRequestSpec): It's not really
	a RequestSpec, change accordingly.

2004-12-03  Jeremy Katz  <katzj@redhat.com>

	* partitions.py (Partitions.setFromDisk): Detect partial vgs,
	preserve the name (#139058)

	* lvm.py (partialvgs): Detect partial volume groups.

	* partitions.py (Partitions.getPartialLVMRequests): Get partial
	volume group requests
	(Partitions.isVolumeGroupNameInUse): If we have a partial by the
	requested name, let it be known so that we avoid conflicts.

	* partRequests.py (PartialVolumeGroupRequestSpec.__init__): Add
	partial volume group request for handling non-complete volume
	groups so we avoid conflicting names.

2004-12-01  Jeremy Katz  <katzj@redhat.com>

	* loader2/shutdown.c (shutDown): Make loop while waiting for
	reboot less cpu-intensive to improve user-experience with, eg, VMWare

	* partitions.py (Partitions.writeKS): Include pesize (#141370)

2004-12-01  Paul Nasrat  <pnasrat@redhat.com>

	* fsset.py: Don't trace back for bad/missing / in fstab (#141174)

2004-11-30  Jeremy Katz  <katzj@redhat.com>

	* image.py (findIsoImages): Skip ISOs which don't have a
	product/RPMS dir to avoid some of the confusion if users put the
	source ISOs in the same dir as the binary (#106017)

	* network.py (Network.write): Write WEPKEY in
	/etc/sysconfig/network-scripts/keys-$DEVNAME with mode 0600 (#140645)

	* iw/network_gui.py (NetworkWindow.editDevice): KEY, not 
	WEPKEY (#140645)

2004-11-30  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* autopart.py (setPreexistParts): Fix handling of existing
	partitions on drives which don't have a partition table we
	understand (#131333)

	* loader2/modules.c (lateModuleSort): Fix the list to be big
	enough (#140541, #140876)

2004-11-29  Jeremy Katz  <katzj@redhat.com>

	* iw/zfcp_gui.py: Fix removal and editing of devices to stick (#140559)

2004-11-29  Paul Nasrat  <pnasrat@redhat.com>

	* autopart.py: Fix LVM resizing with new partitions (#141268)

2004-11-29  Karsten Hopp <karsten|redhat.com>

	* loader2/net.c: CTCPROT fix (#133088)

2004-11-23  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.
	
	* upgrade.py (upgradeFindPackages): More iiiimf upgrade (#129218)

	* Makefile.inc (USEDIET): No diet on i386.

	* textw/upgrade_bootloader_text.py
	(UpgradeBootloaderWindow.__call__): Set a default when we can't
	determine the boot loader to avoid indeterminate state (#139603)

	* lvm.py: Don't disable LVM if vgscan, et al segfault (#134263)

	* packages.py (doPreInstall): Don't remove the directories as
	they may not be empty (#133773)

2004-11-22  Jeremy Katz  <katzj@redhat.com>

	* loader2/init.c: Only open /dev/console once.

2004-11-22  Paul Nasrat  <pnasrat@redhat.com>

	* loader2/init.c:
	Improved ppc console detection, based on notting's kudzu 
	patch #135707 (#134397)

2004-11-17  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images (makeinitrd): initramfs execs on /init
	instead of /linuxrc

	* scripts/upd-instroot: Update python version in urllib hack

2004-11-16  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/mk-images: Remove some old code.  Switch makeinitrd to
	create an initramfs instead of an initrd.

	* loader2/loader.c (setupRamdisk): Remove old code.

	* loader2/net.c (setKickstartNetwork): Allow passing --notksdevice
	to your network lines so that you don't try to use them as your
	device (#136903)

	* kickstart.py (KickstartBase.doNetwork): Handle --notksdevice
	here too.

	* loader2/net.c: Allow going back and manually changing the
	network device used even if ksdevice= is passed (#136903)

	* loader2/loader.c: Fix for serial console magic to work again
	with just console= and not explicit serial (#137971)

2004-11-15  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* isys/isys.py (hardDriveDict): ignore IBM *STMF disks as they're
	just the *STMF for booting on a power5 iSeries box (#137920)

2004-11-15  Paul Nasrat  <pnasrat@redhat.com>

	* scripts/splittree.py: Fix error not msg #139391

2004-11-12  Jeremy Katz  <katzj@redhat.com>

	* bootloader.py: Add patch from HJ Lu to fix popping hang in cases
	where boot loader isn't being installed (#138932)

	* packages.py (copyAnacondaLogs): Copy in the X log too per
	pnasrat's request.

2004-11-11  Jeremy Katz  <katzj@redhat.com>

	* iw/partition_ui_helpers_gui.py (mountptchangeCB): Automatically
	set the filesystem type to vfat if the user selects /boot/efi as
	the mountpoint on ia64 (#138580)

	* iw/datacombo.py (DataComboBox.set_active_text): Add convenience
	method to set the active item based on text.

2004-11-10  Jeremy Katz  <katzj@redhat.com>

	* loader2/loader.c: Make serial imply nofb (#134167)

2004-11-10  Paul Nasrat <pnasrat@redhat.com>

	* findpackageset.py:
	Fix for obsoletes E being long. Gratuitously borrowed from rpmUtils

2004-11-09  Jeremy Katz  <katzj@redhat.com>

	* packages.py (doPreInstall): If we go back, we need to try
	unmount /dev, too (#133773)

2004-11-08  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* users.py: whrandom is deprecated, use random instead

	* bootloader.py: remove unneeded import of deprecated whrandom module

	* iw/bootloader_main_gui.py
	(MainBootloaderWindow.changeBootloaderCallback): Fix syntax.

	* loader2/modules.c (lateModuleSort): Fix stack corruption.

	* text.py (InstallInterface.run): Fallback to English for
	languages that can't do text-mode (#138308)

2004-11-08  Karsten Hopp  <karsten@redhat.com>

	* loader2/linuxrc.s390: Don't ask for input if PORTNAME or CTCPROT
	are already set. Use defaults if RUNKS is set for kickstart
	installations

2004-11-07  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* gui.py (MnemonicLabel.__init__): Allow setting of label
	alignment on creation.

	* iw/network_gui.py (NetworkWindow.editDevice): Get rid of 
	warning from pygtk

	* Makefile.inc (PYTHON): devel now has python 2.4

	* loader2/loader.c (parseCmdLineIp): Add patch from Bastien Nocera
	to support parsing of pxelinux IPAPPEND (#134054)

	* scripts/scrubtree: Clean up handling of binaries that we
	want busybox to override.  Inspired by #137948.

	* dispatch.py (installSteps): Add handleMiscPackages steps.
	* installclass.py (BaseInstallClass.setSteps): Likewise.
	* upgradeclass.py (InstallClass.setSteps): Likewise.

	* packages.py (handleMiscPackages): Add a step to do all of the
	miscellaneous package selection based on installer selections
	instead of doing them in doPreInstall so that our needed CD list
	is correct (#122017)

	* loader2/urls.c: Mark strings for translation (#137197)

	* iw/bootloader_main_gui.py: Don't reference boot 
	disks anymore (#135851)
	* iw/bootloader_advanced_gui.py: Likewise.
	* textw/bootloader_text.py: Likewise.

	* iw/network_gui.py (NetworkWindow.editDevice): Add hardware
	address as another way to figure out which device is which (#131814)
	* textw/network_text.py (NetworkDeviceWindow.runScreen): Likewise.

2004-11-05  Jeremy Katz  <katzj@redhat.com>

	* isys/isys.py (readJFSLabel_int): Fix exception handling.
	(readXFSLabel_int): Likewise.
	(readSwapLabel_int): Likewise.

2004-11-04  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* partitions.py (Partitions.writeKS): Have to have sizes as
	integers (#138109)

	* loader2/modules.c (lateModuleSort): Implement an additional sort
	to move drivers to the end of our list of drivers to load.  This
	is handy for, eg, fibre channel so that it doesn't end up at the
	front of the list so that people don't get confused with sda being
	their FC disk.  Also, put ibmvscsic in the list due to #137920

	* loader2/module-info: More qlogic fibre channel adapters

	* upgrade.py (upgradeFindPackages): Key iiimf-le-canna off of
	kinput2-canna-wnn6 instead of just kinput2 (#129218)

2004-11-03  Jeremy Katz  <katzj@redhat.com>

	* iw/network_gui.py (NetworkWindow.setupDevices): 
	* textw/network_text.py (NetworkDeviceWindow.runScreen): 
	Sync behavior of onboot between gui/text (#138011)

	* autopart.py (getAutopartitionBoot): Use
	iutil.hasiSeriesNativeStorage instead of iutil.hasIbmSis()
	* partitions.py (Partitions.sanityCheckAllRequests): Likewise.

	* iutil.py (hasiSeriesNativeStorage): Rename from hasIbmSis(),
	check for ipr as well as ibmsis.

	* packages.py (copyAnacondaLogs): Set permissions on logs (#137963)

	* scripts/scrubtree: Don't use busybox shutdown, poweroff, or
	reboot (#137948)

2004-11-03  Karsten Hopp  <karsten@redhat.com>

	* loader2/linuxrc.s390: Check input for CTCPROT, remove ctc-tty
	from selection

2004-11-02  Jeremy Katz  <katzj@redhat.com>

	* rescue.py (runRescue): Fix traceback with going back in the
	network config (#137844)

2004-11-02  Karsten Hopp  <karsten@redhat.com>

	* loader2/linuxrc.s390: Ask for CTCPROT even if MTU is already
	specified (mainframe)

2004-11-02  Karsten Hopp  <karsten@redhat.com>

	* loader2/linuxrc.s390: Try harder to find out the LCS
	interface name
	
2004-11-02  Jeremy Katz  <katzj@redhat.com>

	* packages.py (handleX11Packages): Handle making sure gdm is
	installed and don't get TWM started if people don't 
	install GNOME (#132743)

	* isys/isys.py (readJFSLabel_int): Better handling of errors while
	trying to read the label (#137846).
	(readXFSLabel_int): Likewise.
	(readSwapLabel_int): Likewise.

2004-11-02  Tim Waugh  <twaugh@redhat.com>

	* loader2/hdinstall.c (mountHardDrive): Pass the correct pointer to
	free() (bug #137533).

2004-10-29  Kristian Hgsberg  <krh@redhat.com>

	* mini-wm.c (main): Write acknowledge token back to anaconda to
	indicate successful connection to the X server.

	* anaconda (startMiniWM): Wait for token before launching other X
	clients (#108777).

2004-10-29  Jeremy Katz  <katzj@redhat.com>

	* loader2/net.c (getWirelessConfig): Allow 128-bit WEP keys (#137447)

2004-10-27  Jeremy Katz  <katzj@redhat.com>

	* upgrade.py (upgradeFindPackages): Fix traceback on cjk 
	upgrades (#137345)

2004-10-26  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* partedUtils.py (DiskSet.openDevices): Don't die if we don't have
	an intf set up yet (#130123, #137239)

	* upgrade.py (upgradeFindPackages): firefox replaces
	mozilla/netscape (#137244)
	
2004-10-26  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

	* kickstart.py (KickstartBase.definePartition): More fixing for
	size of zero (#137120)

	* scripts/mk-images: Use busybox sleep for s390 instead of
	coreutils sleep to avoid needing librt and libpthread (#131167)

2004-10-25  Jeremy Katz  <katzj@redhat.com>

	* loader2/net.c (setKickstartNetwork): Handle onboot 
	properly (#136903)

	* lang-table: Punjabi shouldn't try to do text mode (#137030)

2004-10-24  Jeremy Katz  <katzj@redhat.com>

	* scripts/mk-images.ia64 (IDEMODULES): Add sgiioc4 module for
	Altix cdrom drive (#136730)

2004-10-21  Bill Nottingham <notting@redhat.com>

	* scripts/mk-images: forward port pci.ids trimming from taroon-branch
	
	* utils/trimpciids: new file

2004-10-20  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* scripts/mk-images.ppc: Update to work with new mkzimage so we
	get a netboot.img again (#125129)

2004-10-20  Jeremy Katz  <katzj@redhat.com>	

	* anaconda.spec: Bump version.

2004-10-19  Karsten Hopp <karsten@redhat.com>

	* loader2/linuxrc.s390: make sure to lowercase SUBCHANNELS sourced 
	from the .parm/.conf file, too

2004-10-19  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* loader2/linuxrc.s390: Ensure OSA addresses are lowercase so the
	kernel will like them (#133190)

	* autopart.py (doAutoPartition): Don't hard code VG name for
	auto-partitioned volume groups as VolGroup00 (#134263)

	* partRequests.py (VolumeGroupRequestSpec.__init__): Add autoname
	hack for autopart + lvm.

	* packages.py (handleX11Packages): Make sure that we don't do a
	graphical startup if people run out of space and then go back to
	unselect stuff (#135895)

	* scripts/upd-instroot: Change filenames for Indic fonts

2004-10-18  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.  
	Rebuild against newer bogl to hopefully fix CJK text installs

	* scripts/upd-instroot: Add Bluecurve icon theme index, hopefully
	fixes the icon theme to be correct.

	* bootloader.py: Add a trailing newline to /etc/sysconfig/kernel

	* loader2/urlinstall.c: When using the local stage2.img shortcut,
	ensure that an hdlist exists in the tree they point at to catch
	typos sooner (#135603, #117155, #120101)

	* kickstart.py: Fix traceback using %post logging (Gijs
	Hollestelle, #136154)

2004-10-17  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* iw/partition_gui.py: Fix font size to fit a little bit 
	better (#135731)

	* partitions.py (Partitions.writeKS): Write out size=0 (#135714)

	* kickstart.py (KickstartBase.definePartition): Allow partition
	size to be zero to work better with LVM autopart (#135714)

2004-10-15  Jeremy Katz  <katzj@redhat.com>

	* iw/driveorderwidget.py: Remove empty row leading 
	to traceback (#135944)

	* urlinstall.py: Replace "%" in urls with "%%" to avoid format
	string problems (#135929)

	* rescue.py (runRescue): bind mount /dev (#135860)

	* lang-table: Set Dutch and Danish keyboards by default (#135839)

2004-10-14  Jeremy Katz  <katzj@redhat.com>

	* loader2/module-info: Add s2io 10GbE driver

	* anaconda.spec: Bump version.

2004-10-14  Karsten Hopp  <karsten@redhat.com>

	* loader/linuxrc.s390: Hardcode LCS interface to eth0 (workaround
	until fix with sysfs interface is available)

2004-10-14  Jeremy Katz  <katzj@redhat.com>

	* scripts/upd-instroot: Add fonts for ta, gu, hi, bn and pa (#119283)

	* isys/lang.c (bterm_main): Enable bterm again for testing (#113910)

	* loader2/hdinstall.c: Fix segfault when using biospart for hard
	drive kickstart install.  Patch from Rez Kabir (#135609)

2004-10-13  Jeremy Katz  <katzj@redhat.com>

	* bootloader.py: Write out /etc/sysconfig/kernel with the default
	kernel type and to change the bootloader default on new kernel
	installation (#135161)

2004-10-13  Karsten Hopp <karsten@redhat.com>

	* scripts/mk-images: add /etc/pam.d/remote for telnet logins
	                     (mainframe)

2004-10-12  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* autopart.py (doAutoPartition): Be more certain we have
	one of "our" LVM partitions (#135440)

	* scripts/mk-images.x86_64:
	* scripts/mk-images.i386:
	Remove localboot option from syslinux.cfg for diskboot.img (#135263)

	* upgrade.py (upgradeFindPackages): Handle the great input method
	switch (#129218)

	* network.py (Network.__init__): Don't save the hwaddr 
	for qeth (#135023)

	* packages.py (doPostInstall): Add rhgb in post-install, not
	doInstall (from msw on anaconda-devel-list)

2004-10-12  Bill Nottingham  <notting@redhat.com>

	* loader2/module-info: add ahci, sx8

2004-10-11  Bill Nottingham  <notting@redhat.com>

	* scripts/genlocalelist.py: reverse norwegian blacklisting (#129453)

	* loader2/module-info: add sata_nv, sata_sx4, ixgb; sort sata list

2004-10-07  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* fsset.py (FileSystemSet.makeLVMNodes): Make sure the DM node
	doesn't exist before we create it (#124092)

	* textw/packages_text.py: Sort packages in the group 
	details screen (#123437)

	* scripts/upd-instroot (KEEPFILEGR): Add prelink config (#117867)

2004-10-06  Jeremy Katz  <katzj@redhat.com>

	* iw/lvm_dialog_gui.py (VolumeGroupEditor.updateLogVolStore):
	Don't show "0" as a mountpoint for an LV that's not being mounted
	anywhere (#134867)

	* partRequests.py (RequestSpec.sanityCheckRequest): Call
	sanityCheckMountPoint with new option

	* partIntfHelpers.py (sanityCheckMountPoint): Don't allow
	formatting unless they specify a mountpoint on pre-existing
	partitions (#134865)

	* iw/network_gui.py (NetworkWindow.getScreen): Make Bengali fit a
	little bit better (#134762)

2004-10-06  Karsten Hopp <karsten@redhat.com>

	* partedUtils.py: Fix traceback with unpartitioned FCP disks (mainframe)

2004-10-05  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version:

	* kickstart.py (KickstartBase.readKickstart): Have to reset things
	when we enter a new scriptlet to break multiple scriptlet with
	different interpreters (#134707)

	* isys/devnodes.c: Working scsi disk nodes again (#134709)

2004-10-04  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* scripts/upd-instroot (PACKAGES): Add selinux-policy-targeted so
	that text-mode installs will have working SELinux (#134549)

	* kickstart.py (KickstartBase.readKickstart): Handle having a
	%include inside a scriptlet. (#120252)

	* iw/zfcp_gui.py: Fix zfcp help tag
	(ZFCPWindow.getScreen): Don't change fcp devs until going forward.

2004-10-04  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* isys/devnodes.c: Add support more than 128 SCSI disks
	(#134575).

	* dispatch.py (installSteps): Remove my new typo.

	* partRequests.py (LogicalVolumeRequestSpec.getDevice): Fix
	changing of VG name carrying through to boot loader setup (#132213)

	* partitions.py (Partitions.writeKS): Include PPC PReP boot
	partition (#133934)

	* kickstart.py (KickstartBase.definePartition) 
	Allow specifying the PPC PReP Boot partition as "part prepboot"
	
	* kickstart.py (KickstartBase.setPackageSelection): Fix a thinko
	in the arch-specific case.  Also, add arch-specific removal (#133396)

	* lang-table: Fix Polish (#134554)

	* dispatch.py (installSteps): 
	* installclass.py (BaseInstallClass.setSteps): 
	* upgradeclass.py (InstallClass.setSteps): 
	Add copylogs step.

	* packages.py (copyAnacondaLogs): Copy /tmp/anaconda.log and
	/tmp/syslog to /var/log/anaconda.log and /var/log/anaconda.syslog
	so that they exist post-install (#124370)

	* kickstart.py: Add logging of kickstart scripts with --log to
	%post/%pre, etc.  Note that the filename is relative to use of
	--chroot or not. (#124370)

2004-10-04  Mike McLean  <mikem@redhat.com>
	* scripts/pkgorder: Add some command line options: --file <f> to
	write to a file instead of stdout, --debug to increas the rpm
	verbosity, --product to set the product path.

2004-10-04  Karsten Hopp  <karsten@redhat.com>

	* loader2/linuxrc.s390: fix LCS PORTNAME

2004-10-04  Jeremy Katz  <katzj@redhat.com>

	* iutil.py (makeDriveDeviceNodes): Create more RAID devs (#134438)

2004-10-01  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* installclass.py (BaseInstallClass.setZFCP): Add method for use
	in kickstart setting of zfcp config.

	* kickstart.py (KickstartBase.doZFCP): 
	Add syntax for defining zfcp volumes in kickstart.  
	Use --devnum=, --scsiid=, --wwpn=, --scsilun=, --fcplun=.  
	All are required. (#130070, #133288)
	(KickstartBase.doAutoPart): Skip zfcpconfig (#133288)
	(KickstartBase.definePartition): Skip zfcpconfig (#133288)

	* isys/nfsmount.c (HAVE_NFSV3): Let's use NFSv3.  Will fix using
	the DVD iso via nfsiso (#122032)

	* loader2/module-info: Fix megaraid_mbox module name (#134369)

	* loader2/driverdisk.c: Another uninitialized variable (#133996)

	* scripts/upd-instroot (PACKAGESGR): Actually add the zh_CN fonts
	package (#133330)

2004-09-30  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* po/anaconda.pot, po/*.po:
	refresh-po

	* installclasses/workstation.py:
	* installclasses/rhel_ws.py:	
	Install compat-arch-support and compat-arch-devel-support 
	by default (#133514).
	s/OpenOffice/OpenOffice.org/
	Mozilla isn't the web browser now.
	
	* installclasses/personal_desktop.py:
	* installclasses/server.py:
	* installclasses/rhel_as.py:	
	* installclasses/rhel_es.py:	
	* installclasses/rhel_desktop.py:
	Install compat-arch-support by default (#133514)
	s/OpenOffice/OpenOffice.org/
	Mozilla isn't the web browser now.

	* installclasses/rhel_ws.py: 
	* installclasses/rhel_desktop.py:
	Should say OpenOffice.org, not OpenOffice.

	* upgrade.py (upgradeFindPackages): If this is RHEL, warn if
	they're upgrading from < RHEL 3 (#134523)

	* fsset.py (FileSystemSet.makeLVMNodes): Try to fix upgrade
	traceback (#134258)

	* loader2/net.c: Make changing the DNS server work (#122554)

2004-09-30 Paul Nasrat <pnasrat@redhat.com>

	* findpackageset.py: Improved arch handling  (#133045)

	* findpackageset.py: Fix thinko with missing rpm.ts (#133045)

2004-09-29  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* isys/isys.py (getDasdState): Unformatted dasd seem to show up as
	"basic" now instead of "ready" (#130123)

	* loader2/driverdisk.c: Fix hang with driver disks (#131112, #122952)

	* iw/examine_gui.py: Remove spurious option in upgrade combo (#134058)

	* iw/language_support_gui.py: Avoid changing default language when
	selecting additional languages (#134040)

2004-09-29 Paul Nasrat <pnasrat@redhat.com>

	* findpackageset.py: Better arch handling for biarch system upgrades
	(#133045)

2004-09-28  Jeremy Katz  <katzj@redhat.com>

	* loader2/hdinstall.c (setKickstartHD): 
	* loader2/urlinstall.c (setKickstartUrl): 
	Make sure variables are initialized (#133996).

	* isys/isys.py (readSwapLabel): Add function to read label from
	swap filesystems.
	(readFSLabel): Read swap and JFS labels too.

	* fsset.py: Add support for label'ing swap filesystems (#127892).

	* anaconda: Lack of a mouse if using remote display shouldn't ask
	about the mouse type (#133902)

2004-09-27  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* iw/zfcp_gui.py (ZFCPWindow.getNext): Update FCP config after
	adding SCSI LUNs (#133290)

	* autopart.py (doAutoPartition): Fix LVM traceback if going back
	from not enough space (#131325)

	* isys/isys.py (getGeometry): Remove unused function.
	* isys/isys.c (doGetGeometry): Likewise.

	* anaconda.spec: Bump version.

	* loader2/driverdisk.c: 
	Don't try to mount as ext3 (we don't have the module).
	If we haven't mounted a partition, don't fail the driver 
	disk load (#133036)

	* loader2/hardware.c: we need to always do our busprobe (fixes
	nonet, etc)

	* loader2/loader.c: noprobe ==> nousb and nofirewire

	* kickstart.py: Allow name.arch syntax for selecting a package in
	%packages (#124456)

	* iw/partition_dialog_gui.py (PartitionEditor.run): 
	* iw/raid_dialog_gui.py (RaidEditor.run): 
	Update SpinButtons before getting their value (#133456)

	* iw/language_support_gui.py
	(LanguageSupportWindow.rebuild_combo): Fix traceback when
	unselecting last language (#133164)

	* fsset.py (swapFileSystem.mount): Skip version 0 swaps (#122101)

	* partedUtils.py (sniffFilesystemType): Don't accept version 0
	swaps as swap

	* kickstart.py (KickstartBase.definePartition): strip /dev from
	--onpart (inspired by #121486)

	* loader2/hdinstall.c: skip over /dev if given for path (#121486)

	* lang-table: Use no instead of no-latin1 as 
	Norwegian keyboard (#133757)

	* loader2/loader.c: Load dm-zero, dm-snapshot and dm-mirror (#132001)

	* scripts/mk-images.i386: 
	* scripts/mk-images.ia64: 
	* scripts/mk-images.ppc: 
	* scripts/mk-images.s390: 
	* scripts/mk-images.x86_64:
	Use a variable for raid and lvm modules.  Add dm-zero, dm-snapshot
	and dm-mirror (#132001)

2004-09-24  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* iw/partition_gui.py (PartitionWindow.populate): 
	* textw/partition_text.py (PartitionWindow.populate): 
	Free space isn't active, so we can't just ignore it.  Instead,
	just ignore non-active partitions of < 1 MB (#133425)

	* installclasses/rhel_as.py: 
	* installclasses/rhel_desktop.py: 
	* installclasses/rhel_es.py: 
	* installclasses/rhel_ws.py: 	
	Add installclasses for Red Hat Enterprise Linux (hidden) for
	translation purposes.

	* loader2/Makefile (VERSION): Define VERSION.

	* Makefile: Define VERSION and RELEASE here.

	* Makefile.inc (VERSION):
	* Makefile.inc (RELEASE):
	Move to Makefile

	* loader2/module-info: Add 3w-9xxx (#133525)

	* scripts/upd-instroot: Switch back to default zh_CN font instead
	of the bitmap one (#133330)

2004-09-23  Jeremy Katz  <katzj@redhat.com>

	* loader2/getparts.c (isPartitionName): i2o devices don't use a
	"p" separator (#133379)

	* iutil.py (makeDriveDeviceNodes): Create more RAID devices.
	(makeDriveDeviceNodes): i2o devices don't use a "p" separator (#133379)

	* loader2/cdinstall.c: Don't use PROBE_LOADED for cd probing (#131033)

	* loader2/hardware.c: We can always probe devices with current
	supported hardware. (#132592)

2004-09-23  Bill Nottingham <notting@redhat.com>

	* loader2/module-info, scripts/mk-images.*: fix megaraid module name

2004-09-22  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version.

	* fsset.py (DevptsFileSystem.isMountable): Don't mount /dev/pts
	during install (#133301)

	* scripts/splittree.py: Fix for SRPMs (#122737)

	* bootdisk/i386/syslinux.cfg: 
	* bootdisk/x86_64/syslinux.cfg:
	Add localboot option (#120687).

	* scripts/mk-images.ia64: 
	* scripts/mk-images.x86_64
	Remove spurious fi

	* textw/firewall_text.py: Oops, fix syntax error

2004-09-21  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: Bump version

	* lang-table (Arabic): Don't attempt Arabic text mode (#122228)

	* scripts/upd-instroot (KEEPFILEGR): Add KacstQura font (#122228)

	* scripts/mk-images.x86_64: Add a README in the images/pxeboot dir.

	* scripts/mk-images.ia64: Create an images/pxeboot directory with
	the kernel + initrd used in the boot.img.

	* loader2/net.c (chooseNetworkInterface): Support using
	ksdevice=macaddr instead of ksdevice=link or ksdevice=ethX.
	Should sanitize the mac address to handle most sane formats (#130605).

	* isys/getmacaddr.c (sanitizeMacAddr): Add function.
	* isys/getmacaddr.h (sanitizeMacAddr): Add prototype.

	* Makefile: Get 'make build' working with build system changes.

2004-09-21  Jeremy Katz  <katzj@redhat.com>

	* anaconda.spec: 
	* Makefile:
	* Makefile.inc:
	Rework build to not get date substituted in with
	a snapbuild.  Include changes explicitly in package changelog.

